import{S as ce,i as _e,s as me,Z as ft,y as Ne,z as qe,c as A,a as J,B as Be,t as D,b as F,d as K,$ as ct,G as _t,N as mt,O as dt,Q as bt,a0 as W,a1 as pe,a2 as et,a3 as tt,a4 as be,a5 as wt,a6 as V,j as T,g as y,h as k,V as le,a7 as Ct,a8 as ht,a9 as gt,E as pt,v as vt,w as yt,aa as De,e as d,k as L,q as c,ab as X,f as j,u as P,n as Ie,x as Fe,ac as Lt,ad as St,ae as Tt,l as te,A as lt,X as ue,af as zt,ag as Z,ah as It}from"./Layout-af65b6e0.js";function he(t,e){const l={},n={},o={$$scope:1};let s=t.length;for(;s--;){const i=t[s],a=e[s];if(a){for(const r in i)r in a||(n[r]=1);for(const r in a)o[r]||(l[r]=a[r],o[r]=1);t[s]=a}else for(const r in i)o[r]=1}for(const i in n)i in l||(l[i]=void 0);return l}function ge(t){return typeof t=="object"&&t!==null?t:{}}function Mt(t){let e;const l=t[16].default,n=_t(l,t,t[24],null);return{c(){n&&n.c()},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&16777216)&&mt(n,l,o,o[24],e?bt(l,o[24],s,null):dt(o[24]),null)},i(o){e||(D(n,o),e=!0)},o(o){F(n,o),e=!1},d(o){n&&n.d(o)}}}function Ot(t){let e,l,n;function o(i){t[17](i)}let s={id:t[1],type:"circle",source:t[2],sourceLayer:t[3],beforeId:t[4],beforeLayerType:t[5],paint:t[6],layout:t[7],filter:t[8],applyToClusters:t[9],minzoom:t[10],maxzoom:t[11],hoverCursor:t[12],manageHoverState:t[13],eventsIfTopMost:t[14],interactive:t[15],$$slots:{default:[Mt]},$$scope:{ctx:t}};return t[0]!==void 0&&(s.hovered=t[0]),e=new ft({props:s}),Ne.push(()=>qe(e,"hovered",o)),e.$on("click",t[18]),e.$on("dblclick",t[19]),e.$on("contextmenu",t[20]),e.$on("mouseenter",t[21]),e.$on("mousemove",t[22]),e.$on("mouseleave",t[23]),{c(){A(e.$$.fragment)},m(i,a){J(e,i,a),n=!0},p(i,[a]){const r={};a&2&&(r.id=i[1]),a&4&&(r.source=i[2]),a&8&&(r.sourceLayer=i[3]),a&16&&(r.beforeId=i[4]),a&32&&(r.beforeLayerType=i[5]),a&64&&(r.paint=i[6]),a&128&&(r.layout=i[7]),a&256&&(r.filter=i[8]),a&512&&(r.applyToClusters=i[9]),a&1024&&(r.minzoom=i[10]),a&2048&&(r.maxzoom=i[11]),a&4096&&(r.hoverCursor=i[12]),a&8192&&(r.manageHoverState=i[13]),a&16384&&(r.eventsIfTopMost=i[14]),a&32768&&(r.interactive=i[15]),a&16777216&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.hovered=i[0],Be(()=>l=!1)),e.$set(r)},i(i){n||(D(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function Rt(t,e,l){let{$$slots:n={},$$scope:o}=e,{id:s=ct("circle")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:r=void 0}=e,{beforeLayerType:_=void 0}=e,{paint:p}=e,{layout:v=void 0}=e,{filter:S=void 0}=e,{applyToClusters:w=void 0}=e,{minzoom:C=void 0}=e,{maxzoom:I=void 0}=e,{hoverCursor:R=void 0}=e,{manageHoverState:f=!1}=e,{hovered:m=null}=e,{eventsIfTopMost:B=!1}=e,{interactive:H=!0}=e;function q(u){m=u,l(0,m)}function b(u){W.call(this,t,u)}function M(u){W.call(this,t,u)}function N(u){W.call(this,t,u)}function g(u){W.call(this,t,u)}function z(u){W.call(this,t,u)}function oe(u){W.call(this,t,u)}return t.$$set=u=>{"id"in u&&l(1,s=u.id),"source"in u&&l(2,i=u.source),"sourceLayer"in u&&l(3,a=u.sourceLayer),"beforeId"in u&&l(4,r=u.beforeId),"beforeLayerType"in u&&l(5,_=u.beforeLayerType),"paint"in u&&l(6,p=u.paint),"layout"in u&&l(7,v=u.layout),"filter"in u&&l(8,S=u.filter),"applyToClusters"in u&&l(9,w=u.applyToClusters),"minzoom"in u&&l(10,C=u.minzoom),"maxzoom"in u&&l(11,I=u.maxzoom),"hoverCursor"in u&&l(12,R=u.hoverCursor),"manageHoverState"in u&&l(13,f=u.manageHoverState),"hovered"in u&&l(0,m=u.hovered),"eventsIfTopMost"in u&&l(14,B=u.eventsIfTopMost),"interactive"in u&&l(15,H=u.interactive),"$$scope"in u&&l(24,o=u.$$scope)},[m,s,i,a,r,_,p,v,S,w,C,I,R,f,B,H,n,q,b,M,N,g,z,oe,o]}class nt extends ce{constructor(e){super(),_e(this,e,Rt,Ot,me,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Ht(t){let e;const l=t[16].default,n=_t(l,t,t[24],null);return{c(){n&&n.c()},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&16777216)&&mt(n,l,o,o[24],e?bt(l,o[24],s,null):dt(o[24]),null)},i(o){e||(D(n,o),e=!0)},o(o){F(n,o),e=!1},d(o){n&&n.d(o)}}}function Nt(t){let e,l,n;function o(i){t[17](i)}let s={id:t[1],type:"symbol",source:t[2],sourceLayer:t[3],beforeId:t[4],beforeLayerType:t[5],paint:t[6],layout:t[7],filter:t[8],applyToClusters:t[9],minzoom:t[10],maxzoom:t[11],hoverCursor:t[12],manageHoverState:t[13],eventsIfTopMost:t[14],interactive:t[15],$$slots:{default:[Ht]},$$scope:{ctx:t}};return t[0]!==void 0&&(s.hovered=t[0]),e=new ft({props:s}),Ne.push(()=>qe(e,"hovered",o)),e.$on("click",t[18]),e.$on("dblclick",t[19]),e.$on("contextmenu",t[20]),e.$on("mouseenter",t[21]),e.$on("mousemove",t[22]),e.$on("mouseleave",t[23]),{c(){A(e.$$.fragment)},m(i,a){J(e,i,a),n=!0},p(i,[a]){const r={};a&2&&(r.id=i[1]),a&4&&(r.source=i[2]),a&8&&(r.sourceLayer=i[3]),a&16&&(r.beforeId=i[4]),a&32&&(r.beforeLayerType=i[5]),a&64&&(r.paint=i[6]),a&128&&(r.layout=i[7]),a&256&&(r.filter=i[8]),a&512&&(r.applyToClusters=i[9]),a&1024&&(r.minzoom=i[10]),a&2048&&(r.maxzoom=i[11]),a&4096&&(r.hoverCursor=i[12]),a&8192&&(r.manageHoverState=i[13]),a&16384&&(r.eventsIfTopMost=i[14]),a&32768&&(r.interactive=i[15]),a&16777216&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.hovered=i[0],Be(()=>l=!1)),e.$set(r)},i(i){n||(D(e.$$.fragment,i),n=!0)},o(i){F(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function qt(t,e,l){let{$$slots:n={},$$scope:o}=e,{id:s=ct("symbol")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:r=void 0}=e,{beforeLayerType:_=void 0}=e,{paint:p=void 0}=e,{layout:v=void 0}=e,{filter:S=void 0}=e,{applyToClusters:w=void 0}=e,{minzoom:C=void 0}=e,{maxzoom:I=void 0}=e,{hoverCursor:R=void 0}=e,{manageHoverState:f=!1}=e,{hovered:m=null}=e,{eventsIfTopMost:B=!1}=e,{interactive:H=!0}=e;function q(u){m=u,l(0,m)}function b(u){W.call(this,t,u)}function M(u){W.call(this,t,u)}function N(u){W.call(this,t,u)}function g(u){W.call(this,t,u)}function z(u){W.call(this,t,u)}function oe(u){W.call(this,t,u)}return t.$$set=u=>{"id"in u&&l(1,s=u.id),"source"in u&&l(2,i=u.source),"sourceLayer"in u&&l(3,a=u.sourceLayer),"beforeId"in u&&l(4,r=u.beforeId),"beforeLayerType"in u&&l(5,_=u.beforeLayerType),"paint"in u&&l(6,p=u.paint),"layout"in u&&l(7,v=u.layout),"filter"in u&&l(8,S=u.filter),"applyToClusters"in u&&l(9,w=u.applyToClusters),"minzoom"in u&&l(10,C=u.minzoom),"maxzoom"in u&&l(11,I=u.maxzoom),"hoverCursor"in u&&l(12,R=u.hoverCursor),"manageHoverState"in u&&l(13,f=u.manageHoverState),"hovered"in u&&l(0,m=u.hovered),"eventsIfTopMost"in u&&l(14,B=u.eventsIfTopMost),"interactive"in u&&l(15,H=u.interactive),"$$scope"in u&&l(24,o=u.$$scope)},[m,s,i,a,r,_,p,v,S,w,C,I,R,f,B,H,n,q,b,M,N,g,z,oe,o]}class Bt extends ce{constructor(e){super(),_e(this,e,qt,Nt,me,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}let Me=pe(!0),Oe=pe(!1),Re=pe(!1),He=pe(!1);function ot(t){let e,l;return e=new De({props:{$$slots:{default:[Dt,({props:n})=>({10:n}),({props:n})=>n?1024:0]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(n,o){J(e,n,o),l=!0},p(n,o){const s={};o&3072&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){K(e,n)}}}function it(t){let e,l,n,o=t[10].slope.toFixed(1)+"",s,i;return{c(){e=d("p"),l=L("Slope: "),n=d("b"),s=L(o),i=L("%")},m(a,r){y(a,e,r),c(e,l),c(e,n),c(n,s),c(n,i)},p(a,r){r&1024&&o!==(o=a[10].slope.toFixed(1)+"")&&X(s,o)},d(a){a&&k(e)}}}function st(t){let e,l,n,o=t[10].forward_cost+"",s;return{c(){e=d("p"),l=L("Cost forwards: "),n=d("b"),s=L(o)},m(i,a){y(i,e,a),c(e,l),c(e,n),c(n,s)},p(i,a){a&1024&&o!==(o=i[10].forward_cost+"")&&X(s,o)},d(i){i&&k(e)}}}function at(t){let e,l,n,o=t[10].backward_cost+"",s;return{c(){e=d("p"),l=L("Cost backwards: "),n=d("b"),s=L(o)},m(i,a){y(i,e,a),c(e,l),c(e,n),c(n,s)},p(i,a){a&1024&&o!==(o=i[10].backward_cost+"")&&X(s,o)},d(i){i&&k(e)}}}function Dt(t){let e,l,n=t[10].count.toFixed(1)+"",o,s,i,a,r,_=t[10].lts+"",p,v,S,w,C,I=t[10].nearby_amenities+"",R,f,m,B,H,q,b=t[10].slope&&it(t),M=t[10].forward_cost&&st(t),N=t[10].backward_cost&&at(t);return{c(){e=d("h2"),l=L("Count: "),o=L(n),s=T(),i=d("p"),a=L("LTS: "),r=d("b"),p=L(_),v=T(),S=d("p"),w=L("Nearby amenities: "),C=d("b"),R=L(I),f=T(),b&&b.c(),m=T(),M&&M.c(),B=T(),N&&N.c(),H=T(),q=d("p"),q.textContent="Click to open OSM"},m(g,z){y(g,e,z),c(e,l),c(e,o),y(g,s,z),y(g,i,z),c(i,a),c(i,r),c(r,p),y(g,v,z),y(g,S,z),c(S,w),c(S,C),c(C,R),y(g,f,z),b&&b.m(g,z),y(g,m,z),M&&M.m(g,z),y(g,B,z),N&&N.m(g,z),y(g,H,z),y(g,q,z)},p(g,z){z&1024&&n!==(n=g[10].count.toFixed(1)+"")&&X(o,n),z&1024&&_!==(_=g[10].lts+"")&&X(p,_),z&1024&&I!==(I=g[10].nearby_amenities+"")&&X(R,I),g[10].slope?b?b.p(g,z):(b=it(g),b.c(),b.m(m.parentNode,m)):b&&(b.d(1),b=null),g[10].forward_cost?M?M.p(g,z):(M=st(g),M.c(),M.m(B.parentNode,B)):M&&(M.d(1),M=null),g[10].backward_cost?N?N.p(g,z):(N=at(g),N.c(),N.m(H.parentNode,H)):N&&(N.d(1),N=null)},d(g){g&&(k(e),k(s),k(i),k(v),k(S),k(f),k(m),k(B),k(H),k(q)),b&&b.d(g),M&&M.d(g),N&&N.d(g)}}}function Ft(t){let e,l,n=t[2]&&ot(t);return{c(){n&&n.c(),e=pt()},m(o,s){n&&n.m(o,s),y(o,e,s),l=!0},p(o,s){o[2]?n?(n.p(o,s),s&4&&D(n,1)):(n=ot(o),n.c(),D(n,1),n.m(e.parentNode,e)):n&&(vt(),F(n,1,1,()=>{n=null}),yt())},i(o){l||(D(n),l=!0)},o(o){F(n),l=!1},d(o){o&&k(e),n&&n.d(o)}}}function Vt(t){let e=t[10].origin_count+"",l,n;return{c(){l=L(e),n=L(" routes start here")},m(o,s){y(o,l,s),y(o,n,s)},p(o,s){s&1024&&e!==(e=o[10].origin_count+"")&&X(l,e)},d(o){o&&(k(l),k(n))}}}function jt(t){let e,l;return e=new De({props:{$$slots:{default:[Vt,({props:n})=>({10:n}),({props:n})=>n?1024:0]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(n,o){J(e,n,o),l=!0},p(n,o){const s={};o&3072&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){K(e,n)}}}function Pt(t){let e=t[10].destination_count+"",l,n;return{c(){l=L(e),n=L(" routes end here")},m(o,s){y(o,l,s),y(o,n,s)},p(o,s){s&1024&&e!==(e=o[10].destination_count+"")&&X(l,e)},d(o){o&&(k(l),k(n))}}}function Et(t){let e,l;return e=new De({props:{$$slots:{default:[Pt,({props:n})=>({10:n}),({props:n})=>n?1024:0]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(n,o){J(e,n,o),l=!0},p(n,o){const s={};o&3072&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){K(e,n)}}}function Gt(t){let e,l,n,o,s,i,a,r;const _=[{id:"input-layer"},t[0],{filter:["==",["geometry-type"],"LineString"]},{manageHoverState:!0},{hoverCursor:t[2]?"pointer":void 0},{paint:{"line-width":t[3],"line-color":t[4]?t[9]:et,"line-opacity":tt(1,.5)}},{layout:{visibility:t[5]?"visible":"none"}},{beforeId:"Road labels"}];let p={$$slots:{default:[Ft]},$$scope:{ctx:t}};for(let f=0;f<_.length;f+=1)p=be(p,_[f]);e=new wt({props:p}),e.$on("click",t[8]);const v=[{id:"slope-arrows"},t[0],{filter:["all",["==",["geometry-type"],"LineString"],[">",["abs",["get","slope"]],3]]},{minzoom:12},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","slope"],0],180,0],visibility:t[4]?"visible":"none"}}];let S={};for(let f=0;f<v.length;f+=1)S=be(S,v[f]);n=new Bt({props:S});const w=[{id:"origins-layer"},t[0],{filter:["has","origin_count"]},{manageHoverState:!0},{paint:{"circle-color":V.origins,"circle-radius":t[1].originRadius}},{layout:{visibility:t[6]?"visible":"none"}}];let C={$$slots:{default:[jt]},$$scope:{ctx:t}};for(let f=0;f<w.length;f+=1)C=be(C,w[f]);s=new nt({props:C});const I=[{id:"destinations-layer"},t[0],{filter:["has","destination_count"]},{manageHoverState:!0},{paint:{"circle-color":V.destinations,"circle-radius":t[1].destinationRadius}},{layout:{visibility:t[7]?"visible":"none"}}];let R={$$slots:{default:[Et]},$$scope:{ctx:t}};for(let f=0;f<I.length;f+=1)R=be(R,I[f]);return a=new nt({props:R}),{c(){A(e.$$.fragment),l=T(),A(n.$$.fragment),o=T(),A(s.$$.fragment),i=T(),A(a.$$.fragment)},m(f,m){J(e,f,m),y(f,l,m),J(n,f,m),y(f,o,m),J(s,f,m),y(f,i,m),J(a,f,m),r=!0},p(f,[m]){const B=m&573?he(_,[_[0],m&1&&ge(f[0]),_[2],_[3],m&4&&{hoverCursor:f[2]?"pointer":void 0},m&536&&{paint:{"line-width":f[3],"line-color":f[4]?f[9]:et,"line-opacity":tt(1,.5)}},m&32&&{layout:{visibility:f[5]?"visible":"none"}},_[7]]):{};m&2052&&(B.$$scope={dirty:m,ctx:f}),e.$set(B);const H=m&17?he(v,[v[0],m&1&&ge(f[0]),v[2],v[3],m&16&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","slope"],0],180,0],visibility:f[4]?"visible":"none"}}]):{};n.$set(H);const q=m&67?he(w,[w[0],m&1&&ge(f[0]),w[2],w[3],m&2&&{paint:{"circle-color":V.origins,"circle-radius":f[1].originRadius}},m&64&&{layout:{visibility:f[6]?"visible":"none"}}]):{};m&2048&&(q.$$scope={dirty:m,ctx:f}),s.$set(q);const b=m&131?he(I,[I[0],m&1&&ge(f[0]),I[2],I[3],m&2&&{paint:{"circle-color":V.destinations,"circle-radius":f[1].destinationRadius}},m&128&&{layout:{visibility:f[7]?"visible":"none"}}]):{};m&2048&&(b.$$scope={dirty:m,ctx:f}),a.$set(b)},i(f){r||(D(e.$$.fragment,f),D(n.$$.fragment,f),D(s.$$.fragment,f),D(a.$$.fragment,f),r=!0)},o(f){F(e.$$.fragment,f),F(n.$$.fragment,f),F(s.$$.fragment,f),F(a.$$.fragment,f),r=!1},d(f){f&&(k(l),k(o),k(i)),K(e,f),K(n,f),K(s,f),K(a,f)}}}function Wt(t){let e=0,l=2,n=10,o=t-e,s=n-l;return["+",l,["*",s,["min",1,["/",["-",["get","count"],e],o]]]]}function At(t,e,l){let n,o,s,i,a,r;le(t,He,w=>l(4,s=w)),le(t,Me,w=>l(5,i=w)),le(t,Oe,w=>l(6,a=w)),le(t,Re,w=>l(7,r=w));let{sourceOverride:_={}}=e,{controls:p}=e;function v(w){if(!n)return;let C=w.detail.features[0].properties.way;window.open(`http://openstreetmap.org/way/${C}`,"_blank")}let S=Ct(["abs",["get","slope"]],gt,ht);return t.$$set=w=>{"sourceOverride"in w&&l(0,_=w.sourceOverride),"controls"in w&&l(1,p=w.controls)},t.$$.update=()=>{t.$$.dirty&2&&l(2,n=!p.streetviewOn),t.$$.dirty&2&&l(3,o=Wt(p.maxCount))},[_,p,n,o,s,i,a,r,v,S]}class el extends ce{constructor(e){super(),_e(this,e,At,Gt,me,{sourceOverride:0,controls:1})}}const{window:Jt}=St;function rt(t){let e,l,n,o,s,i,a,r,_,p;return r=Tt(t[6][0]),{c(){e=d("label"),l=d("input"),n=L(`
    Google StreetView`),o=T(),s=d("label"),i=d("input"),a=L(`
    Bing Streetside`),j(l,"type","radio"),l.__value="google",te(l,l.__value),j(i,"type","radio"),i.__value="bing",te(i,i.__value),r.p(l,i)},m(v,S){y(v,e,S),c(e,l),l.checked=l.__value===t[1],c(e,n),y(v,o,S),y(v,s,S),c(s,i),i.checked=i.__value===t[1],c(s,a),_||(p=[P(l,"change",t[5]),P(i,"change",t[7])],_=!0)},p(v,S){S&2&&(l.checked=l.__value===v[1]),S&2&&(i.checked=i.__value===v[1])},d(v){v&&(k(e),k(o),k(s)),r.r(),_=!1,Fe(p)}}}function Kt(t){let e,l,n,o,s,i,a,r=t[0]&&rt(t);return{c(){e=d("label"),l=d("input"),n=L(`
  StreetView`),o=T(),r&&r.c(),s=pt(),j(l,"type","checkbox")},m(_,p){y(_,e,p),c(e,l),l.checked=t[0],c(e,n),y(_,o,p),r&&r.m(_,p),y(_,s,p),i||(a=[P(Jt,"keydown",t[2]),P(l,"change",t[4])],i=!0)},p(_,[p]){p&1&&(l.checked=_[0]),_[0]?r?r.p(_,p):(r=rt(_),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},i:Ie,o:Ie,d(_){_&&(k(e),k(o),k(s)),r&&r.d(_),i=!1,Fe(a)}}}function Qt(t,e,l){let{map:n}=e,{enabled:o=!1}=e,s="google";function i(){n.on("click",r),n.getCanvas().style.cursor="zoom-in"}function a(){n.off("click",r),n.getCanvas().style.cursor="auto"}Lt(a);function r(C){let I=C.lngLat.lng,R=C.lngLat.lat;s=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${R},${I}&cbp=11,0,0,0,0`,"_blank"):s=="bing"&&window.open(`https://www.bing.com/maps?cp=${R}~${I}&style=x`,"_blank")}function _(C){o&&C.key=="Escape"&&l(0,o=!1)}const p=[[]];function v(){o=this.checked,l(0,o)}function S(){s=this.__value,l(1,s)}function w(){s=this.__value,l(1,s)}return t.$$set=C=>{"map"in C&&l(3,n=C.map),"enabled"in C&&l(0,o=C.enabled)},t.$$.update=()=>{t.$$.dirty&1&&(o?i():a())},[o,s,_,n,v,S,p,w]}class Xt extends ce{constructor(e){super(),_e(this,e,Qt,Kt,me,{map:3,enabled:0})}}function ut(t){let e,l,n,o,s;return{c(){e=d("label"),l=d("input"),n=L(`
      Visualize slope`),j(l,"type","checkbox")},m(i,a){y(i,e,a),c(e,l),l.checked=t[6],c(e,n),o||(s=P(l,"change",t[17]),o=!0)},p(i,a){a&64&&(l.checked=i[6])},d(i){i&&k(e),o=!1,s()}}}function Zt(t){let e,l,n,o;return e=new zt({props:{rows:[[`${Z.lts1}: ${U(t[1].total_meters_lts1)}`,V.lts1],[`${Z.lts2}: ${U(t[1].total_meters_lts2)}`,V.lts2],[`${Z.lts3}: ${U(t[1].total_meters_lts3)}`,V.lts3],[`${Z.lts4}: ${U(t[1].total_meters_lts4)}`,V.lts4],[`${Z.lts_not_allowed}: ${U(t[1].total_meters_not_allowed)}`,V.lts_not_allowed]]}}),{c(){A(e.$$.fragment),l=T(),n=d("p"),n.innerHTML='Note: LTS model from <a href="https://github.com/BikeOttawa/stressmodel/blob/master/stressmodel.js" target="_blank">BikeOttawa</a>'},m(s,i){J(e,s,i),y(s,l,i),y(s,n,i),o=!0},p(s,i){const a={};i&2&&(a.rows=[[`${Z.lts1}: ${U(s[1].total_meters_lts1)}`,V.lts1],[`${Z.lts2}: ${U(s[1].total_meters_lts2)}`,V.lts2],[`${Z.lts3}: ${U(s[1].total_meters_lts3)}`,V.lts3],[`${Z.lts4}: ${U(s[1].total_meters_lts4)}`,V.lts4],[`${Z.lts_not_allowed}: ${U(s[1].total_meters_not_allowed)}`,V.lts_not_allowed]]),e.$set(a)},i(s){o||(D(e.$$.fragment,s),o=!0)},o(s){F(e.$$.fragment,s),o=!1},d(s){s&&(k(l),k(n)),K(e,s)}}}function Ut(t){let e,l;return e=new It({props:{colorScale:ht,limits:gt}}),{c(){A(e.$$.fragment)},m(n,o){J(e,n,o),l=!0},p:Ie,i(n){l||(D(e.$$.fragment,n),l=!0)},o(n){F(e.$$.fragment,n),l=!1},d(n){K(e,n)}}}function Yt(t){let e,l=t[1].config.requests.description+"",n,o,s,i,a,r,_,p,v,S,w,C,I,R,f,m,B,H,q,b,M,N,g=t[1].num_origins.toLocaleString()+"",z,oe,u,ie,Ve,je,Pe,Y,Ee,fe,se,Ge,ae,We,de=t[1].num_destinations.toLocaleString()+"",ve,Ae,Je,re,Ke,Qe,Xe,$,Ze,ye,G,Q,ke,we,Ce,x,Le,ne,Se,Ue,E=t[1].config.elevation_geotiff&&ut(t);const Ye=[Ut,Zt],ee=[];function $e(h,O){return h[6]?0:1}G=$e(t),Q=ee[G]=Ye[G](t);function kt(h){t[18](h)}let xe={map:t[2]};return t[0].streetviewOn!==void 0&&(xe.enabled=t[0].streetviewOn),x=new Xt({props:xe}),Ne.push(()=>qe(x,"enabled",kt)),{c(){e=d("p"),n=L(l),o=T(),s=d("button"),s.textContent="See all output details",i=T(),a=d("details"),r=d("summary"),r.textContent="Route network layer",_=T(),p=d("label"),v=d("input"),S=L(`
    Route network`),w=T(),C=d("label"),I=L(`Max for line width styling:
    `),R=d("br"),f=T(),m=d("input"),B=T(),H=d("label"),q=d("input"),b=T(),M=d("span"),N=L("Origins ("),z=L(g),oe=L(")"),u=T(),ie=d("label"),Ve=L(`Change origin point size:
    `),je=d("br"),Pe=T(),Y=d("input"),Ee=T(),fe=d("label"),se=d("input"),Ge=T(),ae=d("span"),We=L("Destinations ("),ve=L(de),Ae=L(")"),Je=T(),re=d("label"),Ke=L(`Change destination point size:
    `),Qe=d("br"),Xe=T(),$=d("input"),Ze=T(),E&&E.c(),ye=T(),Q.c(),ke=T(),we=d("hr"),Ce=T(),A(x.$$.fragment),j(r,"role","button"),j(r,"class","secondary"),j(v,"type","checkbox"),j(m,"type","number"),j(m,"min",1),j(q,"type","checkbox"),lt(M,"color",V.origins),j(Y,"type","number"),j(Y,"min",1),j(se,"type","checkbox"),lt(ae,"color",V.destinations),j($,"type","number"),j($,"min",1)},m(h,O){y(h,e,O),c(e,n),y(h,o,O),y(h,s,O),y(h,i,O),y(h,a,O),c(a,r),c(a,_),c(a,p),c(p,v),v.checked=t[3],c(p,S),c(a,w),c(a,C),c(C,I),c(C,R),c(C,f),c(C,m),te(m,t[0].maxCount),c(a,B),c(a,H),c(H,q),q.checked=t[4],c(H,b),c(H,M),c(M,N),c(M,z),c(M,oe),c(a,u),c(a,ie),c(ie,Ve),c(ie,je),c(ie,Pe),c(ie,Y),te(Y,t[0].originRadius),c(a,Ee),c(a,fe),c(fe,se),se.checked=t[5],c(fe,Ge),c(fe,ae),c(ae,We),c(ae,ve),c(ae,Ae),c(a,Je),c(a,re),c(re,Ke),c(re,Qe),c(re,Xe),c(re,$),te($,t[0].destinationRadius),c(a,Ze),E&&E.m(a,null),c(a,ye),ee[G].m(a,null),y(h,ke,O),y(h,we,O),y(h,Ce,O),J(x,h,O),ne=!0,Se||(Ue=[P(s,"click",t[7]),P(v,"change",t[8]),P(m,"input",t[9]),P(m,"change",t[10]),P(q,"change",t[11]),P(Y,"input",t[12]),P(Y,"change",t[13]),P(se,"change",t[14]),P($,"input",t[15]),P($,"change",t[16])],Se=!0)},p(h,[O]){(!ne||O&2)&&l!==(l=h[1].config.requests.description+"")&&X(n,l),O&8&&(v.checked=h[3]),O&1&&ue(m.value)!==h[0].maxCount&&te(m,h[0].maxCount),O&16&&(q.checked=h[4]),(!ne||O&2)&&g!==(g=h[1].num_origins.toLocaleString()+"")&&X(z,g),O&1&&ue(Y.value)!==h[0].originRadius&&te(Y,h[0].originRadius),O&32&&(se.checked=h[5]),(!ne||O&2)&&de!==(de=h[1].num_destinations.toLocaleString()+"")&&X(ve,de),O&1&&ue($.value)!==h[0].destinationRadius&&te($,h[0].destinationRadius),h[1].config.elevation_geotiff?E?E.p(h,O):(E=ut(h),E.c(),E.m(a,ye)):E&&(E.d(1),E=null);let Te=G;G=$e(h),G===Te?ee[G].p(h,O):(vt(),F(ee[Te],1,1,()=>{ee[Te]=null}),yt(),Q=ee[G],Q?Q.p(h,O):(Q=ee[G]=Ye[G](h),Q.c()),D(Q,1),Q.m(a,null));const ze={};O&4&&(ze.map=h[2]),!Le&&O&1&&(Le=!0,ze.enabled=h[0].streetviewOn,Be(()=>Le=!1)),x.$set(ze)},i(h){ne||(D(Q),D(x.$$.fragment,h),ne=!0)},o(h){F(Q),F(x.$$.fragment,h),ne=!1},d(h){h&&(k(e),k(o),k(s),k(i),k(a),k(ke),k(we),k(Ce)),E&&E.d(),ee[G].d(),K(x,h),Se=!1,Fe(Ue)}}}function U(t){return`${(t/1e3).toFixed(1)} km total for all trips (before uptake)`}function $t(t,e,l){let n,o,s,i;le(t,Me,b=>l(3,n=b)),le(t,Oe,b=>l(4,o=b)),le(t,Re,b=>l(5,s=b)),le(t,He,b=>l(6,i=b));let{outputMetadata:a}=e,{map:r}=e,{controls:_}=e;const p=()=>window.alert(JSON.stringify(a,null,"  "));function v(){n=this.checked,Me.set(n)}function S(){_.maxCount=ue(this.value),l(0,_)}const w=()=>l(0,_);function C(){o=this.checked,Oe.set(o)}function I(){_.originRadius=ue(this.value),l(0,_)}const R=()=>l(0,_);function f(){s=this.checked,Re.set(s)}function m(){_.destinationRadius=ue(this.value),l(0,_)}const B=()=>l(0,_);function H(){i=this.checked,He.set(i)}function q(b){t.$$.not_equal(_.streetviewOn,b)&&(_.streetviewOn=b,l(0,_))}return t.$$set=b=>{"outputMetadata"in b&&l(1,a=b.outputMetadata),"map"in b&&l(2,r=b.map),"controls"in b&&l(0,_=b.controls)},[_,a,r,n,o,s,i,p,v,S,w,C,I,R,f,m,B,H,q]}class tl extends ce{constructor(e){super(),_e(this,e,$t,Yt,me,{outputMetadata:1,map:2,controls:0})}}export{el as L,tl as S};
