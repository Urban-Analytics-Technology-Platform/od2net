import{S as me,i as de,s as be,Z as dt,y as Pe,z as Ee,c as A,a as J,B as Ge,t as D,b as F,d as K,$ as bt,G as pt,N as ht,O as vt,Q as gt,a0 as W,a1 as Ce,a2 as ot,a3 as it,a4 as ke,a5 as Tt,a6 as V,j as z,g as p,h,V as le,a7 as zt,a8 as kt,a9 as yt,E as wt,v as Ct,w as Lt,aa as We,e as b,k as S,q as _,ab as X,f as E,u as j,n as Be,x as Ae,ac as It,ad as Mt,ae as Ot,l as te,A as st,X as re,af as Rt,ag as Z,ah as Ht}from"./Layout-af65b6e0.js";function ye(t,e){const n={},l={},o={$$scope:1};let a=t.length;for(;a--;){const s=t[a],i=e[a];if(i){for(const u in s)u in i||(l[u]=1);for(const u in i)o[u]||(n[u]=i[u],o[u]=1);t[a]=i}else for(const u in s)o[u]=1}for(const s in l)s in n||(n[s]=void 0);return n}function we(t){return typeof t=="object"&&t!==null?t:{}}function Nt(t){let e;const n=t[16].default,l=pt(n,t,t[24],null);return{c(){l&&l.c()},m(o,a){l&&l.m(o,a),e=!0},p(o,a){l&&l.p&&(!e||a&16777216)&&ht(l,n,o,o[24],e?gt(n,o[24],a,null):vt(o[24]),null)},i(o){e||(D(l,o),e=!0)},o(o){F(l,o),e=!1},d(o){l&&l.d(o)}}}function qt(t){let e,n,l;function o(s){t[17](s)}let a={id:t[1],type:"circle",source:t[2],sourceLayer:t[3],beforeId:t[4],beforeLayerType:t[5],paint:t[6],layout:t[7],filter:t[8],applyToClusters:t[9],minzoom:t[10],maxzoom:t[11],hoverCursor:t[12],manageHoverState:t[13],eventsIfTopMost:t[14],interactive:t[15],$$slots:{default:[Nt]},$$scope:{ctx:t}};return t[0]!==void 0&&(a.hovered=t[0]),e=new dt({props:a}),Pe.push(()=>Ee(e,"hovered",o)),e.$on("click",t[18]),e.$on("dblclick",t[19]),e.$on("contextmenu",t[20]),e.$on("mouseenter",t[21]),e.$on("mousemove",t[22]),e.$on("mouseleave",t[23]),{c(){A(e.$$.fragment)},m(s,i){J(e,s,i),l=!0},p(s,[i]){const u={};i&2&&(u.id=s[1]),i&4&&(u.source=s[2]),i&8&&(u.sourceLayer=s[3]),i&16&&(u.beforeId=s[4]),i&32&&(u.beforeLayerType=s[5]),i&64&&(u.paint=s[6]),i&128&&(u.layout=s[7]),i&256&&(u.filter=s[8]),i&512&&(u.applyToClusters=s[9]),i&1024&&(u.minzoom=s[10]),i&2048&&(u.maxzoom=s[11]),i&4096&&(u.hoverCursor=s[12]),i&8192&&(u.manageHoverState=s[13]),i&16384&&(u.eventsIfTopMost=s[14]),i&32768&&(u.interactive=s[15]),i&16777216&&(u.$$scope={dirty:i,ctx:s}),!n&&i&1&&(n=!0,u.hovered=s[0],Ge(()=>n=!1)),e.$set(u)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){F(e.$$.fragment,s),l=!1},d(s){K(e,s)}}}function Bt(t,e,n){let{$$slots:l={},$$scope:o}=e,{id:a=bt("circle")}=e,{source:s=void 0}=e,{sourceLayer:i=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:c=void 0}=e,{paint:k}=e,{layout:I=void 0}=e,{filter:L=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:C=void 0}=e,{maxzoom:M=void 0}=e,{hoverCursor:R=void 0}=e,{manageHoverState:f=!1}=e,{hovered:m=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:q=!0}=e;function B(r){m=r,n(0,m)}function v(r){W.call(this,t,r)}function H(r){W.call(this,t,r)}function O(r){W.call(this,t,r)}function w(r){W.call(this,t,r)}function T(r){W.call(this,t,r)}function ne(r){W.call(this,t,r)}return t.$$set=r=>{"id"in r&&n(1,a=r.id),"source"in r&&n(2,s=r.source),"sourceLayer"in r&&n(3,i=r.sourceLayer),"beforeId"in r&&n(4,u=r.beforeId),"beforeLayerType"in r&&n(5,c=r.beforeLayerType),"paint"in r&&n(6,k=r.paint),"layout"in r&&n(7,I=r.layout),"filter"in r&&n(8,L=r.filter),"applyToClusters"in r&&n(9,g=r.applyToClusters),"minzoom"in r&&n(10,C=r.minzoom),"maxzoom"in r&&n(11,M=r.maxzoom),"hoverCursor"in r&&n(12,R=r.hoverCursor),"manageHoverState"in r&&n(13,f=r.manageHoverState),"hovered"in r&&n(0,m=r.hovered),"eventsIfTopMost"in r&&n(14,N=r.eventsIfTopMost),"interactive"in r&&n(15,q=r.interactive),"$$scope"in r&&n(24,o=r.$$scope)},[m,a,s,i,u,c,k,I,L,g,C,M,R,f,N,q,l,B,v,H,O,w,T,ne,o]}class at extends me{constructor(e){super(),de(this,e,Bt,qt,be,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Dt(t){let e;const n=t[16].default,l=pt(n,t,t[24],null);return{c(){l&&l.c()},m(o,a){l&&l.m(o,a),e=!0},p(o,a){l&&l.p&&(!e||a&16777216)&&ht(l,n,o,o[24],e?gt(n,o[24],a,null):vt(o[24]),null)},i(o){e||(D(l,o),e=!0)},o(o){F(l,o),e=!1},d(o){l&&l.d(o)}}}function Ft(t){let e,n,l;function o(s){t[17](s)}let a={id:t[1],type:"symbol",source:t[2],sourceLayer:t[3],beforeId:t[4],beforeLayerType:t[5],paint:t[6],layout:t[7],filter:t[8],applyToClusters:t[9],minzoom:t[10],maxzoom:t[11],hoverCursor:t[12],manageHoverState:t[13],eventsIfTopMost:t[14],interactive:t[15],$$slots:{default:[Dt]},$$scope:{ctx:t}};return t[0]!==void 0&&(a.hovered=t[0]),e=new dt({props:a}),Pe.push(()=>Ee(e,"hovered",o)),e.$on("click",t[18]),e.$on("dblclick",t[19]),e.$on("contextmenu",t[20]),e.$on("mouseenter",t[21]),e.$on("mousemove",t[22]),e.$on("mouseleave",t[23]),{c(){A(e.$$.fragment)},m(s,i){J(e,s,i),l=!0},p(s,[i]){const u={};i&2&&(u.id=s[1]),i&4&&(u.source=s[2]),i&8&&(u.sourceLayer=s[3]),i&16&&(u.beforeId=s[4]),i&32&&(u.beforeLayerType=s[5]),i&64&&(u.paint=s[6]),i&128&&(u.layout=s[7]),i&256&&(u.filter=s[8]),i&512&&(u.applyToClusters=s[9]),i&1024&&(u.minzoom=s[10]),i&2048&&(u.maxzoom=s[11]),i&4096&&(u.hoverCursor=s[12]),i&8192&&(u.manageHoverState=s[13]),i&16384&&(u.eventsIfTopMost=s[14]),i&32768&&(u.interactive=s[15]),i&16777216&&(u.$$scope={dirty:i,ctx:s}),!n&&i&1&&(n=!0,u.hovered=s[0],Ge(()=>n=!1)),e.$set(u)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){F(e.$$.fragment,s),l=!1},d(s){K(e,s)}}}function Vt(t,e,n){let{$$slots:l={},$$scope:o}=e,{id:a=bt("symbol")}=e,{source:s=void 0}=e,{sourceLayer:i=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:c=void 0}=e,{paint:k=void 0}=e,{layout:I=void 0}=e,{filter:L=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:C=void 0}=e,{maxzoom:M=void 0}=e,{hoverCursor:R=void 0}=e,{manageHoverState:f=!1}=e,{hovered:m=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:q=!0}=e;function B(r){m=r,n(0,m)}function v(r){W.call(this,t,r)}function H(r){W.call(this,t,r)}function O(r){W.call(this,t,r)}function w(r){W.call(this,t,r)}function T(r){W.call(this,t,r)}function ne(r){W.call(this,t,r)}return t.$$set=r=>{"id"in r&&n(1,a=r.id),"source"in r&&n(2,s=r.source),"sourceLayer"in r&&n(3,i=r.sourceLayer),"beforeId"in r&&n(4,u=r.beforeId),"beforeLayerType"in r&&n(5,c=r.beforeLayerType),"paint"in r&&n(6,k=r.paint),"layout"in r&&n(7,I=r.layout),"filter"in r&&n(8,L=r.filter),"applyToClusters"in r&&n(9,g=r.applyToClusters),"minzoom"in r&&n(10,C=r.minzoom),"maxzoom"in r&&n(11,M=r.maxzoom),"hoverCursor"in r&&n(12,R=r.hoverCursor),"manageHoverState"in r&&n(13,f=r.manageHoverState),"hovered"in r&&n(0,m=r.hovered),"eventsIfTopMost"in r&&n(14,N=r.eventsIfTopMost),"interactive"in r&&n(15,q=r.interactive),"$$scope"in r&&n(24,o=r.$$scope)},[m,a,s,i,u,c,k,I,L,g,C,M,R,f,N,q,l,B,v,H,O,w,T,ne,o]}class jt extends me{constructor(e){super(),de(this,e,Vt,Ft,be,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}let De=Ce(!0),Fe=Ce(!1),Ve=Ce(!1),je=Ce(!1);function ut(t){let e,n;return e=new We({props:{$$slots:{default:[Pt,({props:l})=>({10:l}),({props:l})=>l?1024:0]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(l,o){J(e,l,o),n=!0},p(l,o){const a={};o&3072&&(a.$$scope={dirty:o,ctx:l}),e.$set(a)},i(l){n||(D(e.$$.fragment,l),n=!0)},o(l){F(e.$$.fragment,l),n=!1},d(l){K(e,l)}}}function rt(t){let e,n,l,o=t[10].slope.toFixed(1)+"",a,s;return{c(){e=b("p"),n=S("Slope: "),l=b("b"),a=S(o),s=S("%")},m(i,u){p(i,e,u),_(e,n),_(e,l),_(l,a),_(l,s)},p(i,u){u&1024&&o!==(o=i[10].slope.toFixed(1)+"")&&X(a,o)},d(i){i&&h(e)}}}function ft(t){let e,n,l,o=t[10].forward_cost+"",a;return{c(){e=b("p"),n=S("Cost forwards: "),l=b("b"),a=S(o)},m(s,i){p(s,e,i),_(e,n),_(e,l),_(l,a)},p(s,i){i&1024&&o!==(o=s[10].forward_cost+"")&&X(a,o)},d(s){s&&h(e)}}}function _t(t){let e,n,l,o=t[10].backward_cost+"",a;return{c(){e=b("p"),n=S("Cost backwards: "),l=b("b"),a=S(o)},m(s,i){p(s,e,i),_(e,n),_(e,l),_(l,a)},p(s,i){i&1024&&o!==(o=s[10].backward_cost+"")&&X(a,o)},d(s){s&&h(e)}}}function Pt(t){let e,n,l=t[10].count.toFixed(1)+"",o,a,s,i,u,c=t[10].lts+"",k,I,L,g,C,M=t[10].nearby_amenities+"",R,f,m,N,q,B,v=t[10].slope&&rt(t),H=t[10].forward_cost&&ft(t),O=t[10].backward_cost&&_t(t);return{c(){e=b("h2"),n=S("Count: "),o=S(l),a=z(),s=b("p"),i=S("LTS: "),u=b("b"),k=S(c),I=z(),L=b("p"),g=S("Nearby amenities: "),C=b("b"),R=S(M),f=z(),v&&v.c(),m=z(),H&&H.c(),N=z(),O&&O.c(),q=z(),B=b("p"),B.textContent="Click to open OSM"},m(w,T){p(w,e,T),_(e,n),_(e,o),p(w,a,T),p(w,s,T),_(s,i),_(s,u),_(u,k),p(w,I,T),p(w,L,T),_(L,g),_(L,C),_(C,R),p(w,f,T),v&&v.m(w,T),p(w,m,T),H&&H.m(w,T),p(w,N,T),O&&O.m(w,T),p(w,q,T),p(w,B,T)},p(w,T){T&1024&&l!==(l=w[10].count.toFixed(1)+"")&&X(o,l),T&1024&&c!==(c=w[10].lts+"")&&X(k,c),T&1024&&M!==(M=w[10].nearby_amenities+"")&&X(R,M),w[10].slope?v?v.p(w,T):(v=rt(w),v.c(),v.m(m.parentNode,m)):v&&(v.d(1),v=null),w[10].forward_cost?H?H.p(w,T):(H=ft(w),H.c(),H.m(N.parentNode,N)):H&&(H.d(1),H=null),w[10].backward_cost?O?O.p(w,T):(O=_t(w),O.c(),O.m(q.parentNode,q)):O&&(O.d(1),O=null)},d(w){w&&(h(e),h(a),h(s),h(I),h(L),h(f),h(m),h(N),h(q),h(B)),v&&v.d(w),H&&H.d(w),O&&O.d(w)}}}function Et(t){let e,n,l=t[2]&&ut(t);return{c(){l&&l.c(),e=wt()},m(o,a){l&&l.m(o,a),p(o,e,a),n=!0},p(o,a){o[2]?l?(l.p(o,a),a&4&&D(l,1)):(l=ut(o),l.c(),D(l,1),l.m(e.parentNode,e)):l&&(Ct(),F(l,1,1,()=>{l=null}),Lt())},i(o){n||(D(l),n=!0)},o(o){F(l),n=!1},d(o){o&&h(e),l&&l.d(o)}}}function Gt(t){let e=t[10].origin_count+"",n,l;return{c(){n=S(e),l=S(" routes start here")},m(o,a){p(o,n,a),p(o,l,a)},p(o,a){a&1024&&e!==(e=o[10].origin_count+"")&&X(n,e)},d(o){o&&(h(n),h(l))}}}function Wt(t){let e,n;return e=new We({props:{$$slots:{default:[Gt,({props:l})=>({10:l}),({props:l})=>l?1024:0]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(l,o){J(e,l,o),n=!0},p(l,o){const a={};o&3072&&(a.$$scope={dirty:o,ctx:l}),e.$set(a)},i(l){n||(D(e.$$.fragment,l),n=!0)},o(l){F(e.$$.fragment,l),n=!1},d(l){K(e,l)}}}function At(t){let e=t[10].destination_count+"",n,l;return{c(){n=S(e),l=S(" routes end here")},m(o,a){p(o,n,a),p(o,l,a)},p(o,a){a&1024&&e!==(e=o[10].destination_count+"")&&X(n,e)},d(o){o&&(h(n),h(l))}}}function Jt(t){let e,n;return e=new We({props:{$$slots:{default:[At,({props:l})=>({10:l}),({props:l})=>l?1024:0]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(l,o){J(e,l,o),n=!0},p(l,o){const a={};o&3072&&(a.$$scope={dirty:o,ctx:l}),e.$set(a)},i(l){n||(D(e.$$.fragment,l),n=!0)},o(l){F(e.$$.fragment,l),n=!1},d(l){K(e,l)}}}function Kt(t){let e,n,l,o,a,s,i,u;const c=[{id:"input-layer"},t[0],{filter:["==",["geometry-type"],"LineString"]},{manageHoverState:!0},{hoverCursor:t[2]?"pointer":void 0},{paint:{"line-width":t[3],"line-color":t[4]?t[9]:ot,"line-opacity":it(1,.5)}},{layout:{visibility:t[5]?"visible":"none"}},{beforeId:"Road labels"}];let k={$$slots:{default:[Et]},$$scope:{ctx:t}};for(let f=0;f<c.length;f+=1)k=ke(k,c[f]);e=new Tt({props:k}),e.$on("click",t[8]);const I=[{id:"slope-arrows"},t[0],{filter:["all",["==",["geometry-type"],"LineString"],[">",["abs",["get","slope"]],3]]},{minzoom:12},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","slope"],0],180,0],visibility:t[4]?"visible":"none"}}];let L={};for(let f=0;f<I.length;f+=1)L=ke(L,I[f]);l=new jt({props:L});const g=[{id:"origins-layer"},t[0],{filter:["has","origin_count"]},{manageHoverState:!0},{paint:{"circle-color":V.origins,"circle-radius":t[1].originRadius}},{layout:{visibility:t[6]?"visible":"none"}}];let C={$$slots:{default:[Wt]},$$scope:{ctx:t}};for(let f=0;f<g.length;f+=1)C=ke(C,g[f]);a=new at({props:C});const M=[{id:"destinations-layer"},t[0],{filter:["has","destination_count"]},{manageHoverState:!0},{paint:{"circle-color":V.destinations,"circle-radius":t[1].destinationRadius}},{layout:{visibility:t[7]?"visible":"none"}}];let R={$$slots:{default:[Jt]},$$scope:{ctx:t}};for(let f=0;f<M.length;f+=1)R=ke(R,M[f]);return i=new at({props:R}),{c(){A(e.$$.fragment),n=z(),A(l.$$.fragment),o=z(),A(a.$$.fragment),s=z(),A(i.$$.fragment)},m(f,m){J(e,f,m),p(f,n,m),J(l,f,m),p(f,o,m),J(a,f,m),p(f,s,m),J(i,f,m),u=!0},p(f,[m]){const N=m&573?ye(c,[c[0],m&1&&we(f[0]),c[2],c[3],m&4&&{hoverCursor:f[2]?"pointer":void 0},m&536&&{paint:{"line-width":f[3],"line-color":f[4]?f[9]:ot,"line-opacity":it(1,.5)}},m&32&&{layout:{visibility:f[5]?"visible":"none"}},c[7]]):{};m&2052&&(N.$$scope={dirty:m,ctx:f}),e.$set(N);const q=m&17?ye(I,[I[0],m&1&&we(f[0]),I[2],I[3],m&16&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","slope"],0],180,0],visibility:f[4]?"visible":"none"}}]):{};l.$set(q);const B=m&67?ye(g,[g[0],m&1&&we(f[0]),g[2],g[3],m&2&&{paint:{"circle-color":V.origins,"circle-radius":f[1].originRadius}},m&64&&{layout:{visibility:f[6]?"visible":"none"}}]):{};m&2048&&(B.$$scope={dirty:m,ctx:f}),a.$set(B);const v=m&131?ye(M,[M[0],m&1&&we(f[0]),M[2],M[3],m&2&&{paint:{"circle-color":V.destinations,"circle-radius":f[1].destinationRadius}},m&128&&{layout:{visibility:f[7]?"visible":"none"}}]):{};m&2048&&(v.$$scope={dirty:m,ctx:f}),i.$set(v)},i(f){u||(D(e.$$.fragment,f),D(l.$$.fragment,f),D(a.$$.fragment,f),D(i.$$.fragment,f),u=!0)},o(f){F(e.$$.fragment,f),F(l.$$.fragment,f),F(a.$$.fragment,f),F(i.$$.fragment,f),u=!1},d(f){f&&(h(n),h(o),h(s)),K(e,f),K(l,f),K(a,f),K(i,f)}}}function Qt(t){let e=0,n=2,l=10,o=t-e,a=l-n;return["+",n,["*",a,["min",1,["/",["-",["get","count"],e],o]]]]}function Xt(t,e,n){let l,o,a,s,i,u;le(t,je,g=>n(4,a=g)),le(t,De,g=>n(5,s=g)),le(t,Fe,g=>n(6,i=g)),le(t,Ve,g=>n(7,u=g));let{sourceOverride:c={}}=e,{controls:k}=e;function I(g){if(!l)return;let C=g.detail.features[0].properties.way;window.open(`http://openstreetmap.org/way/${C}`,"_blank")}let L=zt(["abs",["get","slope"]],yt,kt);return t.$$set=g=>{"sourceOverride"in g&&n(0,c=g.sourceOverride),"controls"in g&&n(1,k=g.controls)},t.$$.update=()=>{t.$$.dirty&2&&n(2,l=!k.streetviewOn),t.$$.dirty&2&&n(3,o=Qt(k.maxCount))},[c,k,l,o,a,s,i,u,I,L]}class ol extends me{constructor(e){super(),de(this,e,Xt,Kt,be,{sourceOverride:0,controls:1})}}const{window:Zt}=Mt;function ct(t){let e,n,l,o,a,s,i,u,c,k,I;return c=Ot(t[6][0]),{c(){e=b("div"),n=b("label"),l=b("input"),o=S(`
      Google StreetView`),a=z(),s=b("label"),i=b("input"),u=S(`
      Bing Streetside`),E(l,"type","radio"),l.__value="google",te(l,l.__value),E(i,"type","radio"),i.__value="bing",te(i,i.__value),c.p(l,i)},m(L,g){p(L,e,g),_(e,n),_(n,l),l.checked=l.__value===t[1],_(n,o),_(e,a),_(e,s),_(s,i),i.checked=i.__value===t[1],_(s,u),k||(I=[j(l,"change",t[5]),j(i,"change",t[7])],k=!0)},p(L,g){g&2&&(l.checked=l.__value===L[1]),g&2&&(i.checked=i.__value===L[1])},d(L){L&&h(e),c.r(),k=!1,Ae(I)}}}function Ut(t){let e,n,l,o,a,s,i,u=t[0]&&ct(t);return{c(){e=b("label"),n=b("input"),l=S(`
  StreetView`),o=z(),u&&u.c(),a=wt(),E(n,"type","checkbox")},m(c,k){p(c,e,k),_(e,n),n.checked=t[0],_(e,l),p(c,o,k),u&&u.m(c,k),p(c,a,k),s||(i=[j(Zt,"keydown",t[2]),j(n,"change",t[4])],s=!0)},p(c,[k]){k&1&&(n.checked=c[0]),c[0]?u?u.p(c,k):(u=ct(c),u.c(),u.m(a.parentNode,a)):u&&(u.d(1),u=null)},i:Be,o:Be,d(c){c&&(h(e),h(o),h(a)),u&&u.d(c),s=!1,Ae(i)}}}function Yt(t,e,n){let{map:l}=e,{enabled:o=!1}=e,a="google";function s(){l.on("click",u),l.getCanvas().style.cursor="zoom-in"}function i(){l.off("click",u),l.getCanvas().style.cursor="auto"}It(i);function u(C){let M=C.lngLat.lng,R=C.lngLat.lat;a=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${R},${M}&cbp=11,0,0,0,0`,"_blank"):a=="bing"&&window.open(`https://www.bing.com/maps?cp=${R}~${M}&style=x`,"_blank")}function c(C){o&&C.key=="Escape"&&n(0,o=!1)}const k=[[]];function I(){o=this.checked,n(0,o)}function L(){a=this.__value,n(1,a)}function g(){a=this.__value,n(1,a)}return t.$$set=C=>{"map"in C&&n(3,l=C.map),"enabled"in C&&n(0,o=C.enabled)},t.$$.update=()=>{t.$$.dirty&1&&(o?s():i())},[o,a,c,l,I,L,k,g]}class $t extends me{constructor(e){super(),de(this,e,Yt,Ut,be,{map:3,enabled:0})}}function mt(t){let e,n,l,o,a,s;return{c(){e=b("div"),n=b("label"),l=b("input"),o=S(`
      Visualize slope`),E(l,"type","checkbox")},m(i,u){p(i,e,u),_(e,n),_(n,l),l.checked=t[6],_(n,o),a||(s=j(l,"change",t[17]),a=!0)},p(i,u){u&64&&(l.checked=i[6])},d(i){i&&h(e),a=!1,s()}}}function xt(t){let e,n,l,o,a,s;return l=new Rt({props:{rows:[[`${Z.lts1}: ${U(t[1].total_meters_lts1)}`,V.lts1],[`${Z.lts2}: ${U(t[1].total_meters_lts2)}`,V.lts2],[`${Z.lts3}: ${U(t[1].total_meters_lts3)}`,V.lts3],[`${Z.lts4}: ${U(t[1].total_meters_lts4)}`,V.lts4],[`${Z.lts_not_allowed}: ${U(t[1].total_meters_not_allowed)}`,V.lts_not_allowed]]}}),{c(){e=b("hr"),n=z(),A(l.$$.fragment),o=z(),a=b("p"),a.innerHTML='Note: LTS model from <a href="https://github.com/BikeOttawa/stressmodel/blob/master/stressmodel.js" target="_blank">BikeOttawa</a>'},m(i,u){p(i,e,u),p(i,n,u),J(l,i,u),p(i,o,u),p(i,a,u),s=!0},p(i,u){const c={};u&2&&(c.rows=[[`${Z.lts1}: ${U(i[1].total_meters_lts1)}`,V.lts1],[`${Z.lts2}: ${U(i[1].total_meters_lts2)}`,V.lts2],[`${Z.lts3}: ${U(i[1].total_meters_lts3)}`,V.lts3],[`${Z.lts4}: ${U(i[1].total_meters_lts4)}`,V.lts4],[`${Z.lts_not_allowed}: ${U(i[1].total_meters_not_allowed)}`,V.lts_not_allowed]]),l.$set(c)},i(i){s||(D(l.$$.fragment,i),s=!0)},o(i){F(l.$$.fragment,i),s=!1},d(i){i&&(h(e),h(n),h(o),h(a)),K(l,i)}}}function el(t){let e,n;return e=new Ht({props:{colorScale:kt,limits:yt}}),{c(){A(e.$$.fragment)},m(l,o){J(e,l,o),n=!0},p:Be,i(l){n||(D(e.$$.fragment,l),n=!0)},o(l){F(e.$$.fragment,l),n=!1},d(l){K(e,l)}}}function tl(t){let e,n=t[1].config.requests.description+"",l,o,a,s,i,u,c,k,I,L,g,C,M,R,f,m,N,q,B,v,H,O,w,T=t[1].num_origins.toLocaleString()+"",ne,r,Le,pe,ie,Je,Ke,Qe,Y,Se,he,fe,se,Xe,ae,Ze,ve=t[1].num_destinations.toLocaleString()+"",Te,Ue,ze,ge,ue,Ye,$e,xe,$,Ie,_e,G,Q,ce,Me,Oe,x,Re,oe,He,et,P=t[1].config.elevation_geotiff&&mt(t);const tt=[el,xt],ee=[];function lt(d,y){return d[6]?0:1}G=lt(t),Q=ee[G]=tt[G](t);function St(d){t[18](d)}let nt={map:t[2]};return t[0].streetviewOn!==void 0&&(nt.enabled=t[0].streetviewOn),x=new $t({props:nt}),Pe.push(()=>Ee(x,"enabled",St)),{c(){e=b("p"),l=S(n),o=z(),a=b("div"),s=b("button"),s.textContent="See all output details",i=z(),u=b("div"),c=b("label"),k=b("input"),I=S(`
    Route network`),L=z(),g=b("div"),C=b("label"),M=S(`Max for line width styling:
    `),R=b("br"),f=z(),m=b("input"),N=z(),q=b("div"),B=b("label"),v=b("input"),H=z(),O=b("span"),w=S("Origins ("),ne=S(T),r=S(")"),Le=z(),pe=b("div"),ie=b("label"),Je=S(`Change origin point size:
    `),Ke=b("br"),Qe=z(),Y=b("input"),Se=z(),he=b("div"),fe=b("label"),se=b("input"),Xe=z(),ae=b("span"),Ze=S("Destinations ("),Te=S(ve),Ue=S(")"),ze=z(),ge=b("div"),ue=b("label"),Ye=S(`Change destination point size:
    `),$e=b("br"),xe=z(),$=b("input"),Ie=z(),P&&P.c(),_e=z(),Q.c(),ce=z(),Me=b("hr"),Oe=z(),A(x.$$.fragment),E(k,"type","checkbox"),E(m,"type","number"),E(m,"min",1),E(v,"type","checkbox"),st(O,"color",V.origins),E(Y,"type","number"),E(Y,"min",1),E(se,"type","checkbox"),st(ae,"color",V.destinations),E($,"type","number"),E($,"min",1)},m(d,y){p(d,e,y),_(e,l),p(d,o,y),p(d,a,y),_(a,s),p(d,i,y),p(d,u,y),_(u,c),_(c,k),k.checked=t[3],_(c,I),p(d,L,y),p(d,g,y),_(g,C),_(C,M),_(C,R),_(C,f),_(C,m),te(m,t[0].maxCount),p(d,N,y),p(d,q,y),_(q,B),_(B,v),v.checked=t[4],_(B,H),_(B,O),_(O,w),_(O,ne),_(O,r),p(d,Le,y),p(d,pe,y),_(pe,ie),_(ie,Je),_(ie,Ke),_(ie,Qe),_(ie,Y),te(Y,t[0].originRadius),p(d,Se,y),p(d,he,y),_(he,fe),_(fe,se),se.checked=t[5],_(fe,Xe),_(fe,ae),_(ae,Ze),_(ae,Te),_(ae,Ue),p(d,ze,y),p(d,ge,y),_(ge,ue),_(ue,Ye),_(ue,$e),_(ue,xe),_(ue,$),te($,t[0].destinationRadius),p(d,Ie,y),P&&P.m(d,y),p(d,_e,y),ee[G].m(d,y),p(d,ce,y),p(d,Me,y),p(d,Oe,y),J(x,d,y),oe=!0,He||(et=[j(s,"click",t[7]),j(k,"change",t[8]),j(m,"input",t[9]),j(m,"change",t[10]),j(v,"change",t[11]),j(Y,"input",t[12]),j(Y,"change",t[13]),j(se,"change",t[14]),j($,"input",t[15]),j($,"change",t[16])],He=!0)},p(d,[y]){(!oe||y&2)&&n!==(n=d[1].config.requests.description+"")&&X(l,n),y&8&&(k.checked=d[3]),y&1&&re(m.value)!==d[0].maxCount&&te(m,d[0].maxCount),y&16&&(v.checked=d[4]),(!oe||y&2)&&T!==(T=d[1].num_origins.toLocaleString()+"")&&X(ne,T),y&1&&re(Y.value)!==d[0].originRadius&&te(Y,d[0].originRadius),y&32&&(se.checked=d[5]),(!oe||y&2)&&ve!==(ve=d[1].num_destinations.toLocaleString()+"")&&X(Te,ve),y&1&&re($.value)!==d[0].destinationRadius&&te($,d[0].destinationRadius),d[1].config.elevation_geotiff?P?P.p(d,y):(P=mt(d),P.c(),P.m(_e.parentNode,_e)):P&&(P.d(1),P=null);let Ne=G;G=lt(d),G===Ne?ee[G].p(d,y):(Ct(),F(ee[Ne],1,1,()=>{ee[Ne]=null}),Lt(),Q=ee[G],Q?Q.p(d,y):(Q=ee[G]=tt[G](d),Q.c()),D(Q,1),Q.m(ce.parentNode,ce));const qe={};y&4&&(qe.map=d[2]),!Re&&y&1&&(Re=!0,qe.enabled=d[0].streetviewOn,Ge(()=>Re=!1)),x.$set(qe)},i(d){oe||(D(Q),D(x.$$.fragment,d),oe=!0)},o(d){F(Q),F(x.$$.fragment,d),oe=!1},d(d){d&&(h(e),h(o),h(a),h(i),h(u),h(L),h(g),h(N),h(q),h(Le),h(pe),h(Se),h(he),h(ze),h(ge),h(Ie),h(_e),h(ce),h(Me),h(Oe)),P&&P.d(d),ee[G].d(d),K(x,d),He=!1,Ae(et)}}}function U(t){return`${(t/1e3).toFixed(1)} km total for all trips (before uptake)`}function ll(t,e,n){let l,o,a,s;le(t,De,v=>n(3,l=v)),le(t,Fe,v=>n(4,o=v)),le(t,Ve,v=>n(5,a=v)),le(t,je,v=>n(6,s=v));let{outputMetadata:i}=e,{map:u}=e,{controls:c}=e;const k=()=>window.alert(JSON.stringify(i,null,"  "));function I(){l=this.checked,De.set(l)}function L(){c.maxCount=re(this.value),n(0,c)}const g=()=>n(0,c);function C(){o=this.checked,Fe.set(o)}function M(){c.originRadius=re(this.value),n(0,c)}const R=()=>n(0,c);function f(){a=this.checked,Ve.set(a)}function m(){c.destinationRadius=re(this.value),n(0,c)}const N=()=>n(0,c);function q(){s=this.checked,je.set(s)}function B(v){t.$$.not_equal(c.streetviewOn,v)&&(c.streetviewOn=v,n(0,c))}return t.$$set=v=>{"outputMetadata"in v&&n(1,i=v.outputMetadata),"map"in v&&n(2,u=v.map),"controls"in v&&n(0,c=v.controls)},[c,i,u,l,o,a,s,k,I,L,g,C,M,R,f,m,N,q,B]}class il extends me{constructor(e){super(),de(this,e,ll,tl,be,{outputMetadata:1,map:2,controls:0})}}export{ol as L,il as S};
