var Im=Object.defineProperty;var Rm=(n,t,e)=>t in n?Im(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var j=(n,t,e)=>(Rm(n,typeof t!="symbol"?t+"":t,e),e);import{ah as Fm,ai as Nm,S as Gi,i as qi,s as yi,D as ia,l as Ot,t as gn,r as $l,b as Rn,u as Vl,v as Et,aj as Bm,T as Ia,ab as yf,U as Ra,ak as wh,E as ue,G as zm,J as $m,K as Vm,N as jm,Z as Wm,e as ot,g as Xe,j as ee,k as xf,n as nt,p as Lr,q as ye,C as vf,f as pe,z as Bi,I as Mh,w as Ki,Q as wf,W as jl,x as Cr,V as hi,y as Fa,al as Vi,c as Hm,h as _e,a as Um,A as Na,d as Ym,am as Wl,ae as Mf,an as os,ao as Xm}from"./SequentialLegend-e4b1108f.js";function Gm(n,t,e,i,s){let o=!1;n.getSource(t)&&(o=!0,n.removeSource(t));const r=()=>{i(t)&&(n.addSource(t,e),s())};if(o){const a=()=>{t&&(n.getSource(t)?setTimeout(a,1):r())};a()}else r()}function qm(n,t,e){Fm().then(()=>{let i=Nm(n);if(!i)return;i.getSource(t)===e&&i.removeSource(t)})}function Sh(n){let t=n[0],e,i,s=kh(n);return{c(){s.c(),e=ia()},m(o,r){s.m(o,r),Ot(o,e,r),i=!0},p(o,r){r&1&&yi(t,t=o[0])?($l(),Rn(s,1,1,ue),Vl(),s=kh(o),s.c(),gn(s,1),s.m(e.parentNode,e)):s.p(o,r)},i(o){i||(gn(s),i=!0)},o(o){Rn(s),i=!1},d(o){o&&Et(e),s.d(o)}}}function kh(n){let t;const e=n[15].default,i=zm(e,n,n[14],null);return{c(){i&&i.c()},m(s,o){i&&i.m(s,o),t=!0},p(s,o){i&&i.p&&(!t||o&16384)&&$m(i,e,s,s[14],t?jm(e,s[14],o,null):Vm(s[14]),null)},i(s){t||(gn(i,s),t=!0)},o(s){Rn(i,s),t=!1},d(s){i&&i.d(s)}}}function Km(n){let t,e,i=n[0]&&Sh(n);return{c(){i&&i.c(),t=ia()},m(s,o){i&&i.m(s,o),Ot(s,t,o),e=!0},p(s,[o]){s[0]?i?(i.p(s,o),o&1&&gn(i,1)):(i=Sh(s),i.c(),gn(i,1),i.m(t.parentNode,t)):i&&($l(),Rn(i,1,1,()=>{i=null}),Vl())},i(s){e||(gn(i),e=!0)},o(s){Rn(i),e=!1},d(s){s&&Et(t),i&&i.d(s)}}}function Jm(n,t,e){let i,s,o,{$$slots:r={},$$scope:a}=t,{id:l=Wm("geojson")}=t,{data:c}=t,{generateId:h=!1}=t,{promoteId:d=void 0}=t,{filter:f=void 0}=t,{lineMetrics:p=void 0}=t,{cluster:m=void 0}=t;const{map:b,cluster:_,self:x}=Bm();Ia(n,b,v=>e(13,s=v)),Ia(n,_,v=>e(16,o=v)),Ia(n,x,v=>e(0,i=v));let M,k=!0;return yf(()=>{i&&M&&s&&(qm(b,i,M),Ra(x,i=null,i),e(11,M=void 0))}),n.$$set=v=>{"id"in v&&e(4,l=v.id),"data"in v&&e(5,c=v.data),"generateId"in v&&e(6,h=v.generateId),"promoteId"in v&&e(7,d=v.promoteId),"filter"in v&&e(8,f=v.filter),"lineMetrics"in v&&e(9,p=v.lineMetrics),"cluster"in v&&e(10,m=v.cluster),"$$scope"in v&&e(14,a=v.$$scope)},n.$$.update=()=>{n.$$.dirty&1024&&Ra(_,o=m,o),n.$$.dirty&12273&&s&&i!==l&&(Ra(x,i=l,i),Gm(s,i,wh({type:"geojson",data:c,filter:f,lineMetrics:p,generateId:h,promoteId:d,cluster:!!m,clusterMinPoints:m==null?void 0:m.minPoints,clusterMaxZoom:m==null?void 0:m.maxZoom,clusterRadius:m==null?void 0:m.radius,clusterProperties:m==null?void 0:m.properties}),v=>s&&v===i,()=>{i&&(e(11,M=s==null?void 0:s.getSource(i)),e(12,k=!0))})),n.$$.dirty&8208&&(s==null||s.on("style.load",()=>{e(11,M=s==null?void 0:s.getSource(l))})),n.$$.dirty&6176&&M&&(k?e(12,k=!1):M.setData(c)),n.$$.dirty&3072&&(M==null||M.setClusterOptions(wh({cluster:!!m,clusterMaxZoom:m==null?void 0:m.maxZoom,clusterRadius:m==null?void 0:m.radius})))},[i,b,_,x,l,c,h,d,f,p,m,M,k,s,a,r]}class lC extends Gi{constructor(t){super(),qi(this,t,Jm,Km,yi,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10})}}let rt;const Sf=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Sf.decode();let Es=null;function Vs(){return(Es===null||Es.byteLength===0)&&(Es=new Uint8Array(rt.memory.buffer)),Es}function ci(n,t){return n=n>>>0,Sf.decode(Vs().subarray(n,n+t))}const hn=new Array(128).fill(void 0);hn.push(void 0,null,!0,!1);let js=hn.length;function pt(n){js===hn.length&&hn.push(hn.length+1);const t=js;return js=hn[t],hn[t]=n,t}function J(n){return hn[n]}function Zm(n){n<132||(hn[n]=js,js=n)}function Pn(n){const t=J(n);return Zm(n),t}let di=0;const Pr=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Qm=typeof Pr.encodeInto=="function"?function(n,t){return Pr.encodeInto(n,t)}:function(n,t){const e=Pr.encode(n);return t.set(e),{read:n.length,written:e.length}};function Ba(n,t,e){if(e===void 0){const a=Pr.encode(n),l=t(a.length,1)>>>0;return Vs().subarray(l,l+a.length).set(a),di=a.length,l}let i=n.length,s=t(i,1)>>>0;const o=Vs();let r=0;for(;r<i;r++){const a=n.charCodeAt(r);if(a>127)break;o[s+r]=a}if(r!==i){r!==0&&(n=n.slice(r)),s=e(s,i,i=r+n.length*3,1)>>>0;const a=Vs().subarray(s+r,s+i),l=Qm(n,a);r+=l.written,s=e(s,i,r,1)>>>0}return di=r,s}function rs(n){return n==null}let Ts=null;function Ft(){return(Ts===null||Ts.byteLength===0)&&(Ts=new Int32Array(rt.memory.buffer)),Ts}let As=null;function kf(){return(As===null||As.byteLength===0)&&(As=new Float64Array(rt.memory.buffer)),As}let Ds=null;function tb(){return(Ds===null||Ds.byteLength===0)&&(Ds=new BigInt64Array(rt.memory.buffer)),Ds}function dl(n){const t=typeof n;if(t=="number"||t=="boolean"||n==null)return`${n}`;if(t=="string")return`"${n}"`;if(t=="symbol"){const s=n.description;return s==null?"Symbol":`Symbol(${s})`}if(t=="function"){const s=n.name;return typeof s=="string"&&s.length>0?`Function(${s})`:"Function"}if(Array.isArray(n)){const s=n.length;let o="[";s>0&&(o+=dl(n[0]));for(let r=1;r<s;r++)o+=", "+dl(n[r]);return o+="]",o}const e=/\[object ([^\]]+)\]/.exec(toString.call(n));let i;if(e.length>1)i=e[1];else return toString.call(n);if(i=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:i}function eb(n,t){const e=t(n.length*1,1)>>>0;return Vs().set(n,e/1),di=n.length,e}function nb(n,t){return n=n>>>0,kf().subarray(n/8,n/8+t)}function Jn(n,t){try{return n.apply(this,t)}catch(e){rt.__wbindgen_exn_store(pt(e))}}const ib=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>rt.__wbg_jsnetwork_free(n>>>0));class cC{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,ib.unregister(this),t}free(){const t=this.__destroy_into_raw();rt.__wbg_jsnetwork_free(t)}constructor(t){try{const o=rt.__wbindgen_add_to_stack_pointer(-16),r=eb(t,rt.__wbindgen_malloc),a=di;rt.jsnetwork_new(o,r,a);var e=Ft()[o/4+0],i=Ft()[o/4+1],s=Ft()[o/4+2];if(s)throw Pn(i);return this.__wbg_ptr=e>>>0,this}finally{rt.__wbindgen_add_to_stack_pointer(16)}}recalculate(t){let e,i;try{const h=rt.__wbindgen_add_to_stack_pointer(-16);rt.jsnetwork_recalculate(h,this.__wbg_ptr,pt(t));var s=Ft()[h/4+0],o=Ft()[h/4+1],r=Ft()[h/4+2],a=Ft()[h/4+3],l=s,c=o;if(a)throw l=0,c=0,Pn(r);return e=l,i=c,ci(l,c)}finally{rt.__wbindgen_add_to_stack_pointer(16),rt.__wbindgen_free(e,i,1)}}updateCostFunction(t){try{const s=rt.__wbindgen_add_to_stack_pointer(-16);rt.jsnetwork_updateCostFunction(s,this.__wbg_ptr,pt(t));var e=Ft()[s/4+0],i=Ft()[s/4+1];if(i)throw Pn(e)}finally{rt.__wbindgen_add_to_stack_pointer(16)}}getBounds(){try{const s=rt.__wbindgen_add_to_stack_pointer(-16);rt.jsnetwork_getBounds(s,this.__wbg_ptr);var t=Ft()[s/4+0],e=Ft()[s/4+1],i=nb(t,e).slice();return rt.__wbindgen_free(t,e*8,8),i}finally{rt.__wbindgen_add_to_stack_pointer(16)}}debugNetwork(){let t,e;try{const c=rt.__wbindgen_add_to_stack_pointer(-16);rt.jsnetwork_debugNetwork(c,this.__wbg_ptr);var i=Ft()[c/4+0],s=Ft()[c/4+1],o=Ft()[c/4+2],r=Ft()[c/4+3],a=i,l=s;if(r)throw a=0,l=0,Pn(o);return t=a,e=l,ci(a,l)}finally{rt.__wbindgen_add_to_stack_pointer(16),rt.__wbindgen_free(t,e,1)}}}async function sb(n,t){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,t)}catch(i){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",i);else throw i}const e=await n.arrayBuffer();return await WebAssembly.instantiate(e,t)}else{const e=await WebAssembly.instantiate(n,t);return e instanceof WebAssembly.Instance?{instance:e,module:n}:e}}function ob(){const n={};return n.wbg={},n.wbg.__wbindgen_string_new=function(t,e){const i=ci(t,e);return pt(i)},n.wbg.__wbindgen_is_bigint=function(t){return typeof J(t)=="bigint"},n.wbg.__wbindgen_bigint_from_u64=function(t){const e=BigInt.asUintN(64,t);return pt(e)},n.wbg.__wbindgen_jsval_eq=function(t,e){return J(t)===J(e)},n.wbg.__wbindgen_object_drop_ref=function(t){Pn(t)},n.wbg.__wbindgen_error_new=function(t,e){const i=new Error(ci(t,e));return pt(i)},n.wbg.__wbindgen_string_get=function(t,e){const i=J(e),s=typeof i=="string"?i:void 0;var o=rs(s)?0:Ba(s,rt.__wbindgen_malloc,rt.__wbindgen_realloc),r=di;Ft()[t/4+1]=r,Ft()[t/4+0]=o},n.wbg.__wbindgen_number_get=function(t,e){const i=J(e),s=typeof i=="number"?i:void 0;kf()[t/8+1]=rs(s)?0:s,Ft()[t/4+0]=!rs(s)},n.wbg.__wbindgen_is_string=function(t){return typeof J(t)=="string"},n.wbg.__wbindgen_is_object=function(t){const e=J(t);return typeof e=="object"&&e!==null},n.wbg.__wbindgen_is_undefined=function(t){return J(t)===void 0},n.wbg.__wbindgen_in=function(t,e){return J(t)in J(e)},n.wbg.__wbindgen_jsval_loose_eq=function(t,e){return J(t)==J(e)},n.wbg.__wbindgen_boolean_get=function(t){const e=J(t);return typeof e=="boolean"?e?1:0:2},n.wbg.__wbindgen_as_number=function(t){return+J(t)},n.wbg.__wbindgen_number_new=function(t){return pt(t)},n.wbg.__wbindgen_object_clone_ref=function(t){const e=J(t);return pt(e)},n.wbg.__wbg_getwithrefkey_edc2c8960f0f1191=function(t,e){const i=J(t)[J(e)];return pt(i)},n.wbg.__wbg_new_abda76e883ba8a5f=function(){const t=new Error;return pt(t)},n.wbg.__wbg_stack_658279fe44541cf6=function(t,e){const i=J(e).stack,s=Ba(i,rt.__wbindgen_malloc,rt.__wbindgen_realloc),o=di;Ft()[t/4+1]=o,Ft()[t/4+0]=s},n.wbg.__wbg_error_f851667af71bcfc6=function(t,e){let i,s;try{i=t,s=e,console.error(ci(t,e))}finally{rt.__wbindgen_free(i,s,1)}},n.wbg.__wbg_getwithrefkey_5e6d9547403deab8=function(t,e){const i=J(t)[J(e)];return pt(i)},n.wbg.__wbg_set_841ac57cff3d672b=function(t,e,i){J(t)[Pn(e)]=Pn(i)},n.wbg.__wbg_now_4e659b3d15f470d9=function(t){return J(t).now()},n.wbg.__wbg_debug_5fb96680aecf5dc8=function(t){console.debug(J(t))},n.wbg.__wbg_error_8e3928cfb8a43e2b=function(t){console.error(J(t))},n.wbg.__wbg_info_530a29cb2e4e3304=function(t){console.info(J(t))},n.wbg.__wbg_log_5bb5f88f245d7762=function(t){console.log(J(t))},n.wbg.__wbg_warn_63bbae1730aead09=function(t){console.warn(J(t))},n.wbg.__wbg_get_bd8e338fbd5f5cc8=function(t,e){const i=J(t)[e>>>0];return pt(i)},n.wbg.__wbg_length_cd7af8117672b8b8=function(t){return J(t).length},n.wbg.__wbg_new_16b304a2cfa7ff4a=function(){const t=new Array;return pt(t)},n.wbg.__wbindgen_is_function=function(t){return typeof J(t)=="function"},n.wbg.__wbg_newnoargs_e258087cd0daa0ea=function(t,e){const i=new Function(ci(t,e));return pt(i)},n.wbg.__wbg_next_40fc327bfc8770e6=function(t){const e=J(t).next;return pt(e)},n.wbg.__wbg_next_196c84450b364254=function(){return Jn(function(t){const e=J(t).next();return pt(e)},arguments)},n.wbg.__wbg_done_298b57d23c0fc80c=function(t){return J(t).done},n.wbg.__wbg_value_d93c65011f51a456=function(t){const e=J(t).value;return pt(e)},n.wbg.__wbg_iterator_2cee6dadfd956dfa=function(){return pt(Symbol.iterator)},n.wbg.__wbg_get_e3c254076557e348=function(){return Jn(function(t,e){const i=Reflect.get(J(t),J(e));return pt(i)},arguments)},n.wbg.__wbg_call_27c0f87801dedf93=function(){return Jn(function(t,e){const i=J(t).call(J(e));return pt(i)},arguments)},n.wbg.__wbg_new_72fb9a18b5ae2624=function(){const t=new Object;return pt(t)},n.wbg.__wbg_self_ce0dbfc45cf2f5be=function(){return Jn(function(){const t=self.self;return pt(t)},arguments)},n.wbg.__wbg_window_c6fb939a7f436783=function(){return Jn(function(){const t=window.window;return pt(t)},arguments)},n.wbg.__wbg_globalThis_d1e6af4856ba331b=function(){return Jn(function(){const t=globalThis.globalThis;return pt(t)},arguments)},n.wbg.__wbg_global_207b558942527489=function(){return Jn(function(){const t=global.global;return pt(t)},arguments)},n.wbg.__wbg_set_d4638f722068f043=function(t,e,i){J(t)[e>>>0]=Pn(i)},n.wbg.__wbg_instanceof_ArrayBuffer_836825be07d4c9d2=function(t){let e;try{e=J(t)instanceof ArrayBuffer}catch{e=!1}return e},n.wbg.__wbg_isSafeInteger_f7b04ef02296c4d2=function(t){return Number.isSafeInteger(J(t))},n.wbg.__wbg_entries_95cc2c823b285a09=function(t){const e=Object.entries(J(t));return pt(e)},n.wbg.__wbg_buffer_12d079cc21e14bdb=function(t){const e=J(t).buffer;return pt(e)},n.wbg.__wbg_new_63b92bc8671ed464=function(t){const e=new Uint8Array(J(t));return pt(e)},n.wbg.__wbg_set_a47bac70306a19a7=function(t,e,i){J(t).set(J(e),i>>>0)},n.wbg.__wbg_length_c20a40f15020d68a=function(t){return J(t).length},n.wbg.__wbg_instanceof_Uint8Array_2b3bbecd033d19f6=function(t){let e;try{e=J(t)instanceof Uint8Array}catch{e=!1}return e},n.wbg.__wbindgen_bigint_get_as_i64=function(t,e){const i=J(e),s=typeof i=="bigint"?i:void 0;tb()[t/8+1]=rs(s)?BigInt(0):s,Ft()[t/4+0]=!rs(s)},n.wbg.__wbindgen_debug_string=function(t,e){const i=dl(J(e)),s=Ba(i,rt.__wbindgen_malloc,rt.__wbindgen_realloc),o=di;Ft()[t/4+1]=o,Ft()[t/4+0]=s},n.wbg.__wbindgen_throw=function(t,e){throw new Error(ci(t,e))},n.wbg.__wbindgen_memory=function(){const t=rt.memory;return pt(t)},n}function rb(n,t){return rt=n.exports,ab.__wbindgen_wasm_module=t,Ds=null,As=null,Ts=null,Es=null,rt}async function ab(n){if(rt!==void 0)return rt;typeof n>"u"&&(n="/od2net/assets/wasm_od2net_bg.wasm");const t=ob();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:e,module:i}=await sb(await n,t);return rb(e,i)}function lb(n){let t,e,i,s,o,r,a,l,c,h,d,f;return{c(){t=ot("div"),e=ot("label"),i=Xe(`Or load an example:
    `),s=ot("select"),o=ot("option"),o.textContent="Custom file loaded",r=ot("option"),r.textContent="Antwerp",a=ot("option"),a.textContent="Berlin",l=ot("option"),l.textContent="South London",c=ot("option"),c.textContent="Paris",h=ot("option"),h.textContent="Seattle",o.__value="",ee(o,o.__value),r.__value="antwerp",ee(r,r.__value),a.__value="berlin",ee(a,a.__value),l.__value="london",ee(l,l.__value),c.__value="paris",ee(c,c.__value),h.__value="seattle",ee(h,h.__value),n[0]===void 0&&xf(()=>n[1].call(s))},m(p,m){Ot(p,t,m),nt(t,e),nt(e,i),nt(e,s),nt(s,o),nt(s,r),nt(s,a),nt(s,l),nt(s,c),nt(s,h),Lr(s,n[0],!0),d||(f=ye(s,"change",n[1]),d=!0)},p(p,[m]){m&1&&Lr(s,p[0])},i:ue,o:ue,d(p){p&&Et(t),d=!1,f()}}}function cb(n,t,e){let{example:i}=t;function s(){i=vf(this),e(0,i)}return n.$$set=o=>{"example"in o&&e(0,i=o.example)},[i,s]}class hC extends Gi{constructor(t){super(),qi(this,t,cb,lb,yi,{example:0})}}/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function ao(n){return n+.5|0}const On=(n,t,e)=>Math.max(Math.min(n,e),t);function Ls(n){return On(ao(n*2.55),0,255)}function Ln(n){return On(ao(n*255),0,255)}function an(n){return On(ao(n/2.55)/100,0,1)}function Ch(n){return On(ao(n*100),0,100)}const Ce={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},fl=[..."0123456789ABCDEF"],hb=n=>fl[n&15],ub=n=>fl[(n&240)>>4]+fl[n&15],Uo=n=>(n&240)>>4===(n&15),db=n=>Uo(n.r)&&Uo(n.g)&&Uo(n.b)&&Uo(n.a);function fb(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Ce[n[1]]*17,g:255&Ce[n[2]]*17,b:255&Ce[n[3]]*17,a:t===5?Ce[n[4]]*17:255}:(t===7||t===9)&&(e={r:Ce[n[1]]<<4|Ce[n[2]],g:Ce[n[3]]<<4|Ce[n[4]],b:Ce[n[5]]<<4|Ce[n[6]],a:t===9?Ce[n[7]]<<4|Ce[n[8]]:255})),e}const gb=(n,t)=>n<255?t(n):"";function pb(n){var t=db(n)?hb:ub;return n?"#"+t(n.r)+t(n.g)+t(n.b)+gb(n.a,t):void 0}const mb=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Cf(n,t,e){const i=t*Math.min(e,1-e),s=(o,r=(o+n/30)%12)=>e-i*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function bb(n,t,e){const i=(s,o=(s+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function _b(n,t,e){const i=Cf(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function yb(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function Hl(n){const e=n.r/255,i=n.g/255,s=n.b/255,o=Math.max(e,i,s),r=Math.min(e,i,s),a=(o+r)/2;let l,c,h;return o!==r&&(h=o-r,c=a>.5?h/(2-o-r):h/(o+r),l=yb(e,i,s,h,o),l=l*60+.5),[l|0,c||0,a]}function Ul(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Ln)}function Yl(n,t,e){return Ul(Cf,n,t,e)}function xb(n,t,e){return Ul(_b,n,t,e)}function vb(n,t,e){return Ul(bb,n,t,e)}function Pf(n){return(n%360+360)%360}function wb(n){const t=mb.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Ls(+t[5]):Ln(+t[5]));const s=Pf(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?i=xb(s,o,r):t[1]==="hsv"?i=vb(s,o,r):i=Yl(s,o,r),{r:i[0],g:i[1],b:i[2],a:e}}function Mb(n,t){var e=Hl(n);e[0]=Pf(e[0]+t),e=Yl(e),n.r=e[0],n.g=e[1],n.b=e[2]}function Sb(n){if(!n)return;const t=Hl(n),e=t[0],i=Ch(t[1]),s=Ch(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${an(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const Ph={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Oh={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function kb(){const n={},t=Object.keys(Oh),e=Object.keys(Ph);let i,s,o,r,a;for(i=0;i<t.length;i++){for(r=a=t[i],s=0;s<e.length;s++)o=e[s],a=a.replace(o,Ph[o]);o=parseInt(Oh[r],16),n[a]=[o>>16&255,o>>8&255,o&255]}return n}let Yo;function Cb(n){Yo||(Yo=kb(),Yo.transparent=[0,0,0,0]);const t=Yo[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Pb=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Ob(n){const t=Pb.exec(n);let e=255,i,s,o;if(t){if(t[7]!==i){const r=+t[7];e=t[8]?Ls(r):On(r*255,0,255)}return i=+t[1],s=+t[3],o=+t[5],i=255&(t[2]?Ls(i):On(i,0,255)),s=255&(t[4]?Ls(s):On(s,0,255)),o=255&(t[6]?Ls(o):On(o,0,255)),{r:i,g:s,b:o,a:e}}}function Eb(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${an(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const za=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Oi=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Tb(n,t,e){const i=Oi(an(n.r)),s=Oi(an(n.g)),o=Oi(an(n.b));return{r:Ln(za(i+e*(Oi(an(t.r))-i))),g:Ln(za(s+e*(Oi(an(t.g))-s))),b:Ln(za(o+e*(Oi(an(t.b))-o))),a:n.a+e*(t.a-n.a)}}function Xo(n,t,e){if(n){let i=Hl(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Yl(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Of(n,t){return n&&Object.assign(t||{},n)}function Eh(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Ln(n[3]))):(t=Of(n,{r:0,g:0,b:0,a:1}),t.a=Ln(t.a)),t}function Ab(n){return n.charAt(0)==="r"?Ob(n):wb(n)}let Ef=class gl{constructor(t){if(t instanceof gl)return t;const e=typeof t;let i;e==="object"?i=Eh(t):e==="string"&&(i=fb(t)||Cb(t)||Ab(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Of(this._rgb);return t&&(t.a=an(t.a)),t}set rgb(t){this._rgb=Eh(t)}rgbString(){return this._valid?Eb(this._rgb):void 0}hexString(){return this._valid?pb(this._rgb):void 0}hslString(){return this._valid?Sb(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let o;const r=e===o?.5:e,a=2*r-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,i.r=255&c*i.r+o*s.r+.5,i.g=255&c*i.g+o*s.g+.5,i.b=255&c*i.b+o*s.b+.5,i.a=r*i.a+(1-r)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=Tb(this._rgb,t._rgb,e)),this}clone(){return new gl(this.rgb)}alpha(t){return this._rgb.a=Ln(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=ao(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Xo(this._rgb,2,t),this}darken(t){return Xo(this._rgb,2,-t),this}saturate(t){return Xo(this._rgb,1,t),this}desaturate(t){return Xo(this._rgb,1,-t),this}rotate(t){return Mb(this._rgb,t),this}};/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function en(){}const Db=(()=>{let n=0;return()=>n++})();function ut(n){return n===null||typeof n>"u"}function Tt(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function lt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function zt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ve(n,t){return zt(n)?n:t}function it(n,t){return typeof n>"u"?t:n}const Lb=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,Tf=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Mt(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function mt(n,t,e,i){let s,o,r;if(Tt(n))if(o=n.length,i)for(s=o-1;s>=0;s--)t.call(e,n[s],s);else for(s=0;s<o;s++)t.call(e,n[s],s);else if(lt(n))for(r=Object.keys(n),o=r.length,s=0;s<o;s++)t.call(e,n[r[s]],r[s])}function Ir(n,t){let e,i,s,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],o=t[e],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Rr(n){if(Tt(n))return n.map(Rr);if(lt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=Rr(n[e[s]]);return t}return n}function Af(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Ib(n,t,e,i){if(!Af(n))return;const s=t[n],o=e[n];lt(s)&&lt(o)?Js(s,o,i):t[n]=Rr(o)}function Js(n,t,e){const i=Tt(t)?t:[t],s=i.length;if(!lt(n))return n;e=e||{};const o=e.merger||Ib;let r;for(let a=0;a<s;++a){if(r=i[a],!lt(r))continue;const l=Object.keys(r);for(let c=0,h=l.length;c<h;++c)o(l[c],n,r,e)}return n}function Ws(n,t){return Js(n,t,{merger:Rb})}function Rb(n,t,e){if(!Af(n))return;const i=t[n],s=e[n];lt(i)&&lt(s)?Ws(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Rr(s))}const Th={"":n=>n,x:n=>n.x,y:n=>n.y};function Fb(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function Nb(n){const t=Fb(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Fn(n,t){return(Th[t]||(Th[t]=Nb(t)))(n)}function Xl(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Zs=n=>typeof n<"u",Nn=n=>typeof n=="function",Ah=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function Bb(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Dt=Math.PI,At=2*Dt,zb=At+Dt,Fr=Number.POSITIVE_INFINITY,$b=Dt/180,Wt=Dt/2,Zn=Dt/4,Dh=Dt*2/3,En=Math.log10,Ge=Math.sign;function Hs(n,t,e){return Math.abs(n-t)<e}function Lh(n){const t=Math.round(n);n=Hs(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(En(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function Vb(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,o)=>s-o).pop(),t}function ji(n){return!isNaN(parseFloat(n))&&isFinite(n)}function jb(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function Df(n,t,e){let i,s,o;for(i=0,s=n.length;i<s;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Fe(n){return n*(Dt/180)}function Gl(n){return n*(180/Dt)}function Ih(n){if(!zt(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function Lf(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*Dt&&(o+=At),{angle:o,distance:s}}function pl(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function Wb(n,t){return(n-t+zb)%At-Dt}function we(n){return(n%At+At)%At}function Qs(n,t,e,i){const s=we(n),o=we(t),r=we(e),a=we(o-s),l=we(r-s),c=we(s-o),h=we(s-r);return s===o||s===r||i&&o===r||a>l&&c<h}function ne(n,t,e){return Math.max(t,Math.min(e,n))}function Hb(n){return ne(n,-32768,32767)}function un(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function ql(n,t,e){e=e||(r=>n[r]<t);let i=n.length-1,s=0,o;for(;i-s>1;)o=s+i>>1,e(o)?s=o:i=o;return{lo:s,hi:i}}const dn=(n,t,e,i)=>ql(n,e,i?s=>{const o=n[s][t];return o<e||o===e&&n[s+1][t]===e}:s=>n[s][t]<e),Ub=(n,t,e)=>ql(n,e,i=>n[i][t]>=e);function Yb(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const If=["push","pop","shift","splice","unshift"];function Xb(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),If.forEach(e=>{const i="_onData"+Xl(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const r=s.apply(this,o);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...o)}),r}})})}function Rh(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(If.forEach(o=>{delete n[o]}),delete n._chartjs)}function Rf(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const Ff=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Nf(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,Ff.call(window,()=>{i=!1,n.apply(t,e)}))}}function Gb(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const Kl=n=>n==="start"?"left":n==="end"?"right":"center",oe=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,qb=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function Bf(n,t,e){const i=t.length;let s=0,o=i;if(n._sorted){const{iScale:r,_parsed:a}=n,l=r.axis,{min:c,max:h,minDefined:d,maxDefined:f}=r.getUserBounds();d&&(s=ne(Math.min(dn(a,l,c).lo,e?i:dn(t,l,r.getPixelForValue(c)).lo),0,i-1)),f?o=ne(Math.max(dn(a,r.axis,h,!0).hi+1,e?0:dn(t,l,r.getPixelForValue(h),!0).hi+1),s,i)-s:o=i-s}return{start:s,count:o}}function zf(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=s,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,s),o}const Go=n=>n===0||n===1,Fh=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*At/e)),Nh=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*At/e)+1,Us={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Wt)+1,easeOutSine:n=>Math.sin(n*Wt),easeInOutSine:n=>-.5*(Math.cos(Dt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Go(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Go(n)?n:Fh(n,.075,.3),easeOutElastic:n=>Go(n)?n:Nh(n,.075,.3),easeInOutElastic(n){return Go(n)?n:n<.5?.5*Fh(n*2,.1125,.45):.5+.5*Nh(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Us.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Us.easeInBounce(n*2)*.5:Us.easeOutBounce(n*2-1)*.5+.5};function Jl(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Bh(n){return Jl(n)?n:new Ef(n)}function $a(n){return Jl(n)?n:new Ef(n).saturate(.5).darken(.1).hexString()}const Kb=["x","y","borderWidth","radius","tension"],Jb=["color","borderColor","backgroundColor"];function Zb(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:Jb},numbers:{type:"number",properties:Kb}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function Qb(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const zh=new Map;function t_(n,t){t=t||{};const e=n+JSON.stringify(t);let i=zh.get(e);return i||(i=new Intl.NumberFormat(n,t),zh.set(e,i)),i}function lo(n,t,e){return t_(t,e).format(n)}const $f={values(n){return Tt(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,o=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),o=e_(n,e)}const r=En(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),lo(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";const i=e[t].significand||n/Math.pow(10,Math.floor(En(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?$f.numeric.call(this,n,t,e):""}};function e_(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var sa={formatters:$f};function n_(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:sa.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const mi=Object.create(null),ml=Object.create(null);function Ys(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function Va(n,t,e){return typeof t=="string"?Js(Ys(n,t),e):Js(Ys(n,""),t)}let i_=class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>$a(s.backgroundColor),this.hoverBorderColor=(i,s)=>$a(s.borderColor),this.hoverColor=(i,s)=>$a(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Va(this,t,e)}get(t){return Ys(this,t)}describe(t,e){return Va(ml,t,e)}override(t,e){return Va(mi,t,e)}route(t,e,i,s){const o=Ys(this,t),r=Ys(this,i),a="_"+e;Object.defineProperties(o,{[a]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=r[s];return lt(l)?Object.assign({},c,l):it(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}};var $t=new i_({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Zb,Qb,n_]);function s_(n){return!n||ut(n.size)||ut(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Nr(n,t,e,i,s){let o=t[s];return o||(o=t[s]=n.measureText(s).width,e.push(s)),o>i&&(i=o),i}function o_(n,t,e,i){i=i||{};let s=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(s=i.data={},o=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let r=0;const a=e.length;let l,c,h,d,f;for(l=0;l<a;l++)if(d=e[l],d!=null&&!Tt(d))r=Nr(n,s,o,r,d);else if(Tt(d))for(c=0,h=d.length;c<h;c++)f=d[c],f!=null&&!Tt(f)&&(r=Nr(n,s,o,r,f));n.restore();const p=o.length/2;if(p>e.length){for(l=0;l<p;l++)delete s[o[l]];o.splice(0,p)}return r}function Qn(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function $h(n,t){t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore()}function bl(n,t,e,i){Vf(n,t,e,i,null)}function Vf(n,t,e,i,s){let o,r,a,l,c,h,d,f;const p=t.pointStyle,m=t.rotation,b=t.radius;let _=(m||0)*$b;if(p&&typeof p=="object"&&(o=p.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(_),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),p){default:s?n.ellipse(e,i,s/2,b,0,0,At):n.arc(e,i,b,0,At),n.closePath();break;case"triangle":h=s?s/2:b,n.moveTo(e+Math.sin(_)*h,i-Math.cos(_)*b),_+=Dh,n.lineTo(e+Math.sin(_)*h,i-Math.cos(_)*b),_+=Dh,n.lineTo(e+Math.sin(_)*h,i-Math.cos(_)*b),n.closePath();break;case"rectRounded":c=b*.516,l=b-c,r=Math.cos(_+Zn)*l,d=Math.cos(_+Zn)*(s?s/2-c:l),a=Math.sin(_+Zn)*l,f=Math.sin(_+Zn)*(s?s/2-c:l),n.arc(e-d,i-a,c,_-Dt,_-Wt),n.arc(e+f,i-r,c,_-Wt,_),n.arc(e+d,i+a,c,_,_+Wt),n.arc(e-f,i+r,c,_+Wt,_+Dt),n.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*b,h=s?s/2:l,n.rect(e-h,i-l,2*h,2*l);break}_+=Zn;case"rectRot":d=Math.cos(_)*(s?s/2:b),r=Math.cos(_)*b,a=Math.sin(_)*b,f=Math.sin(_)*(s?s/2:b),n.moveTo(e-d,i-a),n.lineTo(e+f,i-r),n.lineTo(e+d,i+a),n.lineTo(e-f,i+r),n.closePath();break;case"crossRot":_+=Zn;case"cross":d=Math.cos(_)*(s?s/2:b),r=Math.cos(_)*b,a=Math.sin(_)*b,f=Math.sin(_)*(s?s/2:b),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+f,i-r),n.lineTo(e-f,i+r);break;case"star":d=Math.cos(_)*(s?s/2:b),r=Math.cos(_)*b,a=Math.sin(_)*b,f=Math.sin(_)*(s?s/2:b),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+f,i-r),n.lineTo(e-f,i+r),_+=Zn,d=Math.cos(_)*(s?s/2:b),r=Math.cos(_)*b,a=Math.sin(_)*b,f=Math.sin(_)*(s?s/2:b),n.moveTo(e-d,i-a),n.lineTo(e+d,i+a),n.moveTo(e+f,i-r),n.lineTo(e-f,i+r);break;case"line":r=s?s/2:Math.cos(_)*b,a=Math.sin(_)*b,n.moveTo(e-r,i-a),n.lineTo(e+r,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(_)*(s?s/2:b),i+Math.sin(_)*b);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function fn(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function oa(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function ra(n){n.restore()}function r_(n,t,e,i,s){if(!t)return n.lineTo(e.x,e.y);if(s==="middle"){const o=(t.x+e.x)/2;n.lineTo(o,t.y),n.lineTo(o,e.y)}else s==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function a_(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function l_(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),ut(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function c_(n,t,e,i,s){if(s.strikethrough||s.underline){const o=n.measureText(i),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=e-o.actualBoundingBoxAscent,c=e+o.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(r,h),n.lineTo(a,h),n.stroke()}}function h_(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function bi(n,t,e,i,s,o={}){const r=Tt(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(n.save(),n.font=s.string,l_(n,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&h_(n,o.backdrop),a&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),ut(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(c,e,i,o.maxWidth)),n.fillText(c,e,i,o.maxWidth),c_(n,e,i,c,o),i+=Number(s.lineHeight);n.restore()}function to(n,t){const{x:e,y:i,w:s,h:o,radius:r}=t;n.arc(e+r.topLeft,i+r.topLeft,r.topLeft,1.5*Dt,Dt,!0),n.lineTo(e,i+o-r.bottomLeft),n.arc(e+r.bottomLeft,i+o-r.bottomLeft,r.bottomLeft,Dt,Wt,!0),n.lineTo(e+s-r.bottomRight,i+o),n.arc(e+s-r.bottomRight,i+o-r.bottomRight,r.bottomRight,Wt,0,!0),n.lineTo(e+s,i+r.topRight),n.arc(e+s-r.topRight,i+r.topRight,r.topRight,0,-Wt,!0),n.lineTo(e+r.topLeft,i)}const u_=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,d_=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function f_(n,t){const e=(""+n).match(u_);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const g_=n=>+n||0;function Zl(n,t){const e={},i=lt(t),s=i?Object.keys(t):t,o=lt(n)?i?r=>it(n[r],n[t[r]]):r=>n[r]:()=>n;for(const r of s)e[r]=g_(o(r));return e}function jf(n){return Zl(n,{top:"y",right:"x",bottom:"y",left:"x"})}function fi(n){return Zl(n,["topLeft","topRight","bottomLeft","bottomRight"])}function le(n){const t=jf(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Qt(n,t){n=n||{},t=t||$t.font;let e=it(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=it(n.style,t.style);i&&!(""+i).match(d_)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:it(n.family,t.family),lineHeight:f_(it(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:it(n.weight,t.weight),string:""};return s.string=s_(s),s}function Is(n,t,e,i){let s=!0,o,r,a;for(o=0,r=n.length;o<r;++o)if(a=n[o],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),s=!1),e!==void 0&&Tt(a)&&(a=a[e%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function p_(n,t,e){const{min:i,max:s}=n,o=Tf(t,(s-i)/2),r=(a,l)=>e&&a===0?0:a+l;return{min:r(i,-Math.abs(o)),max:r(s,o)}}function $n(n,t){return Object.assign(Object.create(n),t)}function Ql(n,t=[""],e,i,s=()=>n[0]){const o=e||n;typeof i>"u"&&(i=Yf("_fallback",n));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:i,_getTarget:s,override:a=>Ql([a,...n],t,o,i)};return new Proxy(r,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return Hf(a,l,()=>M_(l,t,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return jh(a).includes(l)},ownKeys(a){return jh(a)},set(a,l,c){const h=a._storage||(a._storage=s());return a[l]=h[l]=c,delete a._keys,!0}})}function Wi(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Wf(n,i),setContext:o=>Wi(n,o,e,i),override:o=>Wi(n.override(o),t,e,i)};return new Proxy(s,{deleteProperty(o,r){return delete o[r],delete n[r],!0},get(o,r,a){return Hf(o,r,()=>b_(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(n,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,r)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,r){return Reflect.has(n,r)},ownKeys(){return Reflect.ownKeys(n)},set(o,r,a){return n[r]=a,delete o[r],!0}})}function Wf(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:Nn(e)?e:()=>e,isIndexable:Nn(i)?i:()=>i}}const m_=(n,t)=>n?n+Xl(t):t,tc=(n,t)=>lt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Hf(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t))return n[t];const i=e();return n[t]=i,i}function b_(n,t,e){const{_proxy:i,_context:s,_subProxy:o,_descriptors:r}=n;let a=i[t];return Nn(a)&&r.isScriptable(t)&&(a=__(t,a,n,e)),Tt(a)&&a.length&&(a=y_(t,a,n,r.isIndexable)),tc(t,a)&&(a=Wi(a,s,o&&o[t],r)),a}function __(n,t,e,i){const{_proxy:s,_context:o,_subProxy:r,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(o,r||i);return a.delete(n),tc(n,l)&&(l=ec(s._scopes,s,n,l)),l}function y_(n,t,e,i){const{_proxy:s,_context:o,_subProxy:r,_descriptors:a}=e;if(typeof o.index<"u"&&i(n))return t[o.index%t.length];if(lt(t[0])){const l=t,c=s._scopes.filter(h=>h!==l);t=[];for(const h of l){const d=ec(c,s,n,h);t.push(Wi(d,o,r&&r[n],a))}}return t}function Uf(n,t,e){return Nn(n)?n(t,e):n}const x_=(n,t)=>n===!0?t:typeof n=="string"?Fn(t,n):void 0;function v_(n,t,e,i,s){for(const o of t){const r=x_(e,o);if(r){n.add(r);const a=Uf(r._fallback,e,s);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(r===!1&&typeof i<"u"&&e!==i)return null}return!1}function ec(n,t,e,i){const s=t._rootScopes,o=Uf(t._fallback,e,i),r=[...n,...s],a=new Set;a.add(i);let l=Vh(a,r,e,o||e,i);return l===null||typeof o<"u"&&o!==e&&(l=Vh(a,r,o,l,i),l===null)?!1:Ql(Array.from(a),[""],s,o,()=>w_(t,e,i))}function Vh(n,t,e,i,s){for(;e;)e=v_(n,t,e,i,s);return e}function w_(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return Tt(s)&&lt(e)?e:s||{}}function M_(n,t,e,i){let s;for(const o of t)if(s=Yf(m_(o,n),e),typeof s<"u")return tc(n,s)?ec(e,i,n,s):s}function Yf(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function jh(n){let t=n._keys;return t||(t=n._keys=S_(n._scopes)),t}function S_(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function Xf(n,t,e,i){const{iScale:s}=n,{key:o="r"}=this._parsing,r=new Array(i);let a,l,c,h;for(a=0,l=i;a<l;++a)c=a+e,h=t[c],r[a]={r:s.parse(Fn(h,o),c)};return r}const k_=Number.EPSILON||1e-14,Hi=(n,t)=>t<n.length&&!n[t].skip&&n[t],Gf=n=>n==="x"?"y":"x";function C_(n,t,e,i){const s=n.skip?t:n,o=t,r=e.skip?t:e,a=pl(o,s),l=pl(r,o);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=i*c,f=i*h;return{previous:{x:o.x-d*(r.x-s.x),y:o.y-d*(r.y-s.y)},next:{x:o.x+f*(r.x-s.x),y:o.y+f*(r.y-s.y)}}}function P_(n,t,e){const i=n.length;let s,o,r,a,l,c=Hi(n,0);for(let h=0;h<i-1;++h)if(l=c,c=Hi(n,h+1),!(!l||!c)){if(Hs(t[h],0,k_)){e[h]=e[h+1]=0;continue}s=e[h]/t[h],o=e[h+1]/t[h],a=Math.pow(s,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),e[h]=s*r*t[h],e[h+1]=o*r*t[h])}}function O_(n,t,e="x"){const i=Gf(e),s=n.length;let o,r,a,l=Hi(n,0);for(let c=0;c<s;++c){if(r=a,a=l,l=Hi(n,c+1),!a)continue;const h=a[e],d=a[i];r&&(o=(h-r[e])/3,a[`cp1${e}`]=h-o,a[`cp1${i}`]=d-o*t[c]),l&&(o=(l[e]-h)/3,a[`cp2${e}`]=h+o,a[`cp2${i}`]=d+o*t[c])}}function E_(n,t="x"){const e=Gf(t),i=n.length,s=Array(i).fill(0),o=Array(i);let r,a,l,c=Hi(n,0);for(r=0;r<i;++r)if(a=l,l=c,c=Hi(n,r+1),!!l){if(c){const h=c[t]-l[t];s[r]=h!==0?(c[e]-l[e])/h:0}o[r]=a?c?Ge(s[r-1])!==Ge(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}P_(n,s,o),O_(n,o,t)}function qo(n,t,e){return Math.max(Math.min(n,e),t)}function T_(n,t){let e,i,s,o,r,a=fn(n[0],t);for(e=0,i=n.length;e<i;++e)r=o,o=a,a=e<i-1&&fn(n[e+1],t),o&&(s=n[e],r&&(s.cp1x=qo(s.cp1x,t.left,t.right),s.cp1y=qo(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=qo(s.cp2x,t.left,t.right),s.cp2y=qo(s.cp2y,t.top,t.bottom)))}function A_(n,t,e,i,s){let o,r,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")E_(n,s);else{let c=i?n[n.length-1]:n[0];for(o=0,r=n.length;o<r;++o)a=n[o],l=C_(c,a,n[Math.min(o+1,r-(i?0:1))%r],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&T_(n,e)}function nc(){return typeof window<"u"&&typeof document<"u"}function ic(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Br(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const aa=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function D_(n,t){return aa(n).getPropertyValue(t)}const L_=["top","right","bottom","left"];function gi(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const o=L_[s];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const I_=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function R_(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:o}=i;let r=!1,a,l;if(I_(s,o,n.target))a=s,l=o;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function si(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=aa(e),o=s.boxSizing==="border-box",r=gi(s,"padding"),a=gi(s,"border","width"),{x:l,y:c,box:h}=R_(n,e),d=r.left+(h&&a.left),f=r.top+(h&&a.top);let{width:p,height:m}=t;return o&&(p-=r.width+a.width,m-=r.height+a.height),{x:Math.round((l-d)/p*e.width/i),y:Math.round((c-f)/m*e.height/i)}}function F_(n,t,e){let i,s;if(t===void 0||e===void 0){const o=ic(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const r=o.getBoundingClientRect(),a=aa(o),l=gi(a,"border","width"),c=gi(a,"padding");t=r.width-c.width-l.width,e=r.height-c.height-l.height,i=Br(a.maxWidth,o,"clientWidth"),s=Br(a.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||Fr,maxHeight:s||Fr}}const Ko=n=>Math.round(n*10)/10;function N_(n,t,e,i){const s=aa(n),o=gi(s,"margin"),r=Br(s.maxWidth,n,"clientWidth")||Fr,a=Br(s.maxHeight,n,"clientHeight")||Fr,l=F_(n,t,e);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const f=gi(s,"border","width"),p=gi(s,"padding");c-=p.width+f.width,h-=p.height+f.height}return c=Math.max(0,c-o.width),h=Math.max(0,i?c/i:h-o.height),c=Ko(Math.min(c,r,l.maxWidth)),h=Ko(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Ko(c/2)),(t!==void 0||e!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=Ko(Math.floor(h*i))),{width:c,height:h}}function Wh(n,t,e){const i=t||1,s=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const r=n.canvas;return r.style&&(e||!r.style.height&&!r.style.width)&&(r.style.height=`${n.height}px`,r.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||r.height!==s||r.width!==o?(n.currentDevicePixelRatio=i,r.height=s,r.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const B_=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};nc()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function Hh(n,t){const e=D_(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function oi(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function z_(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function $_(n,t,e,i){const s={x:n.cp2x,y:n.cp2y},o={x:t.cp1x,y:t.cp1y},r=oi(n,s,e),a=oi(s,o,e),l=oi(o,t,e),c=oi(r,a,e),h=oi(a,l,e);return oi(c,h,e)}const V_=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},j_=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function zi(n,t,e){return n?V_(t,e):j_()}function qf(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function Kf(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Jf(n){return n==="angle"?{between:Qs,compare:Wb,normalize:we}:{between:un,compare:(t,e)=>t-e,normalize:t=>t}}function Uh({start:n,end:t,count:e,loop:i,style:s}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:s}}function W_(n,t,e){const{property:i,start:s,end:o}=e,{between:r,normalize:a}=Jf(i),l=t.length;let{start:c,end:h,loop:d}=n,f,p;if(d){for(c+=l,h+=l,f=0,p=l;f<p&&r(a(t[c%l][i]),s,o);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:n.style}}function Zf(n,t,e){if(!e)return[n];const{property:i,start:s,end:o}=e,r=t.length,{compare:a,between:l,normalize:c}=Jf(i),{start:h,end:d,loop:f,style:p}=W_(n,t,e),m=[];let b=!1,_=null,x,M,k;const v=()=>l(s,k,x)&&a(s,k)!==0,w=()=>a(o,x)===0||l(o,k,x),O=()=>b||v(),T=()=>!b||w();for(let D=h,R=h;D<=d;++D)M=t[D%r],!M.skip&&(x=c(M[i]),x!==k&&(b=l(x,s,o),_===null&&O()&&(_=a(x,s)===0?D:R),_!==null&&T()&&(m.push(Uh({start:_,end:D,loop:f,count:r,style:p})),_=null),R=D,k=x));return _!==null&&m.push(Uh({start:_,end:d,loop:f,count:r,style:p})),m}function Qf(n,t){const e=[],i=n.segments;for(let s=0;s<i.length;s++){const o=Zf(i[s],n.points,t);o.length&&e.push(...o)}return e}function H_(n,t,e,i){let s=0,o=t-1;if(e&&!i)for(;s<t&&!n[s].skip;)s++;for(;s<t&&n[s].skip;)s++;for(s%=t,e&&(o+=s);o>s&&n[o%t].skip;)o--;return o%=t,{start:s,end:o}}function U_(n,t,e,i){const s=n.length,o=[];let r=t,a=n[t],l;for(l=t+1;l<=e;++l){const c=n[l%s];c.skip||c.stop?a.skip||(i=!1,o.push({start:t%s,end:(l-1)%s,loop:i}),t=r=c.stop?l:null):(r=l,a.skip&&(t=l)),a=c}return r!==null&&o.push({start:t%s,end:r%s,loop:i}),o}function Y_(n,t){const e=n.points,i=n.options.spanGaps,s=e.length;if(!s)return[];const o=!!n._loop,{start:r,end:a}=H_(e,s,o,i);if(i===!0)return Yh(n,[{start:r,end:a,loop:o}],e,t);const l=a<r?a+s:a,c=!!n._fullLoop&&r===0&&a===s-1;return Yh(n,U_(e,r,l,c),e,t)}function Yh(n,t,e,i){return!i||!i.setContext||!e?t:X_(n,t,e,i)}function X_(n,t,e,i){const s=n._chart.getContext(),o=Xh(n.options),{_datasetIndex:r,options:{spanGaps:a}}=n,l=e.length,c=[];let h=o,d=t[0].start,f=d;function p(m,b,_,x){const M=a?-1:1;if(m!==b){for(m+=l;e[m%l].skip;)m-=M;for(;e[b%l].skip;)b+=M;m%l!==b%l&&(c.push({start:m%l,end:b%l,loop:_,style:x}),h=x,d=b%l)}}for(const m of t){d=a?d:m.start;let b=e[d%l],_;for(f=d+1;f<=m.end;f++){const x=e[f%l];_=Xh(i.setContext($n(s,{type:"segment",p0:b,p1:x,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:r}))),G_(_,h)&&p(d,f-1,m.loop,h),b=x,h=_}d<f-1&&p(d,f-1,m.loop,h)}return c}function Xh(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function G_(n,t){if(!t)return!1;const e=[],i=function(s,o){return Jl(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(n,i)!==JSON.stringify(t,i)}/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */let q_=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const o=e.listeners[s],r=e.duration;o.forEach(a=>a({chart:t,initial:e.initial,numSteps:r,currentStep:Math.min(i-e.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Ff.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const o=i.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(s.draw(),this._notify(s,i,t,"progress")),o.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};var nn=new q_;const Gh="transparent",K_={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=Bh(n||Gh),s=i.valid&&Bh(t||Gh);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};let J_=class{constructor(t,e,i,s){const o=e[i];s=Is([t.to,s,o,t.from]);const r=Is([t.from,o,s]);this._active=!0,this._fn=t.fn||K_[t.type||typeof r],this._easing=Us[t.easing]||Us.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],o=i-this._start,r=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=Is([t.to,e,s,t.from]),this._from=Is([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||e<i),!this._active){this._target[s]=a,this._notify(!0);return}if(e<0){this._target[s]=o;return}l=e/i%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(o,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}},tg=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!lt(t))return;const e=Object.keys($t.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const o=t[s];if(!lt(o))return;const r={};for(const a of e)r[a]=o[a];(Tt(o.properties)&&o.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,r)})})}_animateOptions(t,e){const i=e.options,s=Q_(t,i);if(!s)return[];const o=this._createAnimations(s,i);return i.$shared&&Z_(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,s=[],o=t.$animations||(t.$animations={}),r=Object.keys(e),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,e));continue}const h=e[c];let d=o[c];const f=i.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){t[c]=h;continue}o[c]=d=new J_(f,t,c,h),s.push(d)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return nn.add(this._chart,i),!0}};function Z_(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const o=n[i[s]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function Q_(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function qh(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:s,end:i?s:o}}function ty(n,t,e){if(e===!1)return!1;const i=qh(n,e),s=qh(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function ey(n){let t,e,i,s;return lt(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function eg(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,o;for(s=0,o=i.length;s<o;++s)e.push(i[s].index);return e}function Kh(n,t,e,i={}){const s=n.keys,o=i.mode==="single";let r,a,l,c;if(t!==null){for(r=0,a=s.length;r<a;++r){if(l=+s[r],l===e){if(i.all)continue;break}c=n.values[l],zt(c)&&(o||t===0||Ge(t)===Ge(c))&&(t+=c)}return t}}function ny(n){const t=Object.keys(n),e=new Array(t.length);let i,s,o;for(i=0,s=t.length;i<s;++i)o=t[i],e[i]={x:o,y:n[o]};return e}function Jh(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function iy(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function sy(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function oy(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Zh(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const o=n[s.index];if(e&&o>0||!e&&o<0)return s.index}return null}function Qh(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:o,vScale:r,index:a}=i,l=o.axis,c=r.axis,h=iy(o,r,i),d=t.length;let f;for(let p=0;p<d;++p){const m=t[p],{[l]:b,[c]:_}=m,x=m._stacks||(m._stacks={});f=x[c]=oy(s,h,b),f[a]=_,f._top=Zh(f,r,!0,i.type),f._bottom=Zh(f,r,!1,i.type);const M=f._visualValues||(f._visualValues={});M[a]=_}}function ja(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function ry(n,t){return $n(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function ay(n,t,e){return $n(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function as(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const o=s._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e],o[i]._visualValues!==void 0&&o[i]._visualValues[e]!==void 0&&delete o[i]._visualValues[e]}}}const Wa=n=>n==="reset"||n==="none",tu=(n,t)=>t?n:Object.assign({},n),ly=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:eg(e,!0),values:null};var xs;let Vn=(xs=class{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Jh(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&as(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(d,f,p,m)=>d==="x"?f:d==="r"?m:p,o=e.xAxisID=it(i.xAxisID,ja(t,"x")),r=e.yAxisID=it(i.yAxisID,ja(t,"y")),a=e.rAxisID=it(i.rAxisID,ja(t,"r")),l=e.indexAxis,c=e.iAxisID=s(l,o,r,a),h=e.vAxisID=s(l,r,o,a);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(r),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Rh(this._data,this),t._stacked&&as(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(lt(e))this._data=ny(e);else if(i!==e){if(i){Rh(i,this);const s=this._cachedMeta;as(s),s._parsed=[]}e&&Object.isExtensible(e)&&Xb(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const o=e._stacked;e._stacked=Jh(e.vScale,e),e.stack!==i.stack&&(s=!0,as(e),e.stack=i.stack),this._resyncElements(t),(s||o!==e._stacked)&&Qh(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:r}=i,a=o.axis;let l=t===0&&e===s.length?!0:i._sorted,c=t>0&&i._parsed[t-1],h,d,f;if(this._parsing===!1)i._parsed=s,i._sorted=!0,f=s;else{Tt(s[t])?f=this.parseArrayData(i,s,t,e):lt(s[t])?f=this.parseObjectData(i,s,t,e):f=this.parsePrimitiveData(i,s,t,e);const p=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<e;++h)i._parsed[h+t]=d=f[h],l&&(p()&&(l=!1),c=d);i._sorted=l}r&&Qh(this,f)}parsePrimitiveData(t,e,i,s){const{iScale:o,vScale:r}=t,a=o.axis,l=r.axis,c=o.getLabels(),h=o===r,d=new Array(s);let f,p,m;for(f=0,p=s;f<p;++f)m=f+i,d[f]={[a]:h||o.parse(c[m],m),[l]:r.parse(e[m],m)};return d}parseArrayData(t,e,i,s){const{xScale:o,yScale:r}=t,a=new Array(s);let l,c,h,d;for(l=0,c=s;l<c;++l)h=l+i,d=e[h],a[l]={x:o.parse(d[0],h),y:r.parse(d[1],h)};return a}parseObjectData(t,e,i,s){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,d,f,p;for(h=0,d=s;h<d;++h)f=h+i,p=e[f],c[h]={x:o.parse(Fn(p,a),f),y:r.parse(Fn(p,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,o=this._cachedMeta,r=e[t.axis],a={keys:eg(s,!0),values:e._stacks[t.axis]._visualValues};return Kh(a,r,o.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const o=i[e.axis];let r=o===null?NaN:o;const a=s&&i._stacks[e.axis];s&&a&&(s.values=a,r=Kh(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,o=i._sorted&&t===i.iScale,r=s.length,a=this._getOtherScale(t),l=ly(e,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=sy(a);let f,p;function m(){p=s[f];const b=p[a.axis];return!zt(p[t.axis])||h>b||d<b}for(f=0;f<r&&!(!m()&&(this.updateRangeFromParsed(c,t,p,l),o));++f);if(o){for(f=r-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,t,p,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,o,r;for(s=0,o=e.length;s<o;++s)r=e[s][t.axis],zt(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=ey(it(this.options.clip,ty(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],o=e.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,o,a,l),h=a;h<a+l;++h){const d=s[h];d.hidden||(d.active&&c?r.push(d):d.draw(t,o))}for(h=0;h<r.length;++h)r[h].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const r=this._cachedMeta.data[t];o=r.$context||(r.$context=ay(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=ry(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",o=this._cachedDataOpts,r=t+"-"+e,a=o[r],l=this.enableOptionSharing&&Zs(i);if(a)return tu(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),d=s?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),h),p=Object.keys($t.elements[t]),m=()=>this.getContext(i,s,e),b=c.resolveNamedOptions(f,p,m,d);return b.$shared&&(b.$shared=l,o[r]=Object.freeze(tu(b,l))),b}_resolveAnimations(t,e,i){const s=this.chart,o=this._cachedDataOpts,r=`animation-${e}`,a=o[r];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,e),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(t,i,e))}const c=new tg(s,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Wa(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,o=this.getSharedOptions(i),r=this.includeOptions(e,o)||o!==s;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:r}}updateElement(t,e,i,s){Wa(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!Wa(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const o=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,o=e.length,r=Math.min(o,s);r&&this.parse(0,r),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,e,i=!0){const s=this._cachedMeta,o=s.data,r=t+e;let a;const l=c=>{for(c.length+=e,a=c.length-1;a>=r;a--)c[a]=c[a-e]};for(l(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&as(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}},j(xs,"defaults",{}),j(xs,"datasetElementType",null),j(xs,"dataElementType",null),xs);function cy(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let s=0,o=e.length;s<o;s++)i=i.concat(e[s].controller.getAllParsedValues(n));n._cache.$bar=Rf(i.sort((s,o)=>s-o))}return n._cache.$bar}function hy(n){const t=n.iScale,e=cy(t,n.type);let i=t._length,s,o,r,a;const l=()=>{r===32767||r===-32768||(Zs(a)&&(i=Math.min(i,Math.abs(r-a)||i)),a=r)};for(s=0,o=e.length;s<o;++s)r=t.getPixelForValue(e[s]),l();for(a=void 0,s=0,o=t.ticks.length;s<o;++s)r=t.getPixelForTick(s),l();return i}function uy(n,t,e,i){const s=e.barThickness;let o,r;return ut(s)?(o=t.min*e.categoryPercentage,r=e.barPercentage):(o=s*i,r=1),{chunk:o/i,ratio:r,start:t.pixels[n]-o/2}}function dy(n,t,e,i){const s=t.pixels,o=s[n];let r=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null;const l=e.categoryPercentage;r===null&&(r=o-(a===null?t.end-t.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/i,ratio:e.barPercentage,start:c}}function fy(n,t,e,i){const s=e.parse(n[0],i),o=e.parse(n[1],i),r=Math.min(s,o),a=Math.max(s,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:o,min:r,max:a}}function ng(n,t,e,i){return Tt(n)?fy(n,t,e,i):t[e.axis]=e.parse(n,i),t}function eu(n,t,e,i){const s=n.iScale,o=n.vScale,r=s.getLabels(),a=s===o,l=[];let c,h,d,f;for(c=e,h=e+i;c<h;++c)f=t[c],d={},d[s.axis]=a||s.parse(r[c],c),l.push(ng(f,d,o,c));return l}function Ha(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function gy(n,t,e){return n!==0?Ge(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function py(n){let t,e,i,s,o;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(s="end",o="start"):(s="start",o="end"),{start:e,end:i,reverse:t,top:s,bottom:o}}function my(n,t,e,i){let s=t.borderSkipped;const o={};if(!s){n.borderSkipped=o;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:h}=py(n);s==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?s=c:(e._bottom||0)===i?s=h:(o[nu(h,r,a,l)]=!0,s=c)),o[nu(s,r,a,l)]=!0,n.borderSkipped=o}function nu(n,t,e,i){return i?(n=by(n,t,e),n=iu(n,e,t)):n=iu(n,t,e),n}function by(n,t,e){return n===t?e:n===e?t:n}function iu(n,t,e){return n==="start"?t:n==="end"?e:n}function _y(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}var vs;let yy=(vs=class extends Vn{parsePrimitiveData(t,e,i,s){return eu(t,e,i,s)}parseArrayData(t,e,i,s){return eu(t,e,i,s)}parseObjectData(t,e,i,s){const{iScale:o,vScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,h=r.axis==="x"?a:l,d=[];let f,p,m,b;for(f=i,p=i+s;f<p;++f)b=e[f],m={},m[o.axis]=o.parse(Fn(b,c),f),d.push(ng(Fn(b,h),m,r,f));return d}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:s}=e,o=this.getParsed(t),r=o._custom,a=Ha(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,s){const o=s==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(e,s);for(let p=e;p<e+i;p++){const m=this.getParsed(p),b=o||ut(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),_=this._calculateBarIndexPixels(p,h),x=(m._stacks||{})[a.axis],M={horizontal:c,base:b.base,enableBorderRadius:!x||Ha(m._custom)||r===x._top||r===x._bottom,x:c?b.head:_.center,y:c?_.center:b.head,height:c?_.size:Math.abs(b.size),width:c?Math.abs(b.size):_.size};f&&(M.options=d||this.resolveDataElementOptions(p,t[p].active?"active":s));const k=M.options||t[p].options;my(M,k,x,r),_y(M,k,h.ratio),this.updateElement(t[p],p,M,s)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),o=i.options.stacked,r=[],a=l=>{const c=l.controller.getParsed(e),h=c&&c[l.vScale.axis];if(ut(h)||isNaN(h))return!0};for(const l of s)if(!(e!==void 0&&a(l))&&((o===!1||r.indexOf(l.stack)===-1||o===void 0&&l.stack===void 0)&&r.push(l.stack),l.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const s=this._getStacks(t,i),o=e!==void 0?s.indexOf(e):-1;return o===-1?s.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,s=[];let o,r;for(o=0,r=e.data.length;o<r;++o)s.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const a=t.barThickness;return{min:a||hy(e),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:s},options:{base:o,minBarLength:r}}=this,a=o||0,l=this.getParsed(t),c=l._custom,h=Ha(c);let d=l[e.axis],f=0,p=i?this.applyStack(e,l,i):d,m,b;p!==d&&(f=p-d,p=d),h&&(d=c.barStart,p=c.barEnd-c.barStart,d!==0&&Ge(d)!==Ge(c.barEnd)&&(f=0),f+=d);const _=!ut(o)&&!h?o:f;let x=e.getPixelForValue(_);if(this.chart.getDataVisibility(t)?m=e.getPixelForValue(f+p):m=x,b=m-x,Math.abs(b)<r){b=gy(b,e,a)*r,d===a&&(x-=b/2);const M=e.getPixelForDecimal(0),k=e.getPixelForDecimal(1),v=Math.min(M,k),w=Math.max(M,k);x=Math.max(Math.min(x,w),v),m=x+b,i&&!h&&(l._stacks[e.axis]._visualValues[s]=e.getValueForPixel(m)-e.getValueForPixel(x))}if(x===e.getPixelForValue(a)){const M=Ge(b)*e.getLineWidthForValue(a)/2;x+=M,b-=M}return{size:b,base:x,head:m,center:m+b/2}}_calculateBarIndexPixels(t,e){const i=e.scale,s=this.options,o=s.skipNull,r=it(s.maxBarThickness,1/0);let a,l;if(e.grouped){const c=o?this._getStackCount(t):e.stackCount,h=s.barThickness==="flex"?dy(t,e,s,c):uy(t,e,s,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);a=h.start+h.chunk*d+h.chunk/2,l=Math.min(r,h.chunk*h.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(r,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length;let o=0;for(;o<s;++o)this.getParsed(o)[e.axis]!==null&&i[o].draw(this._ctx)}},j(vs,"id","bar"),j(vs,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),j(vs,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}}),vs);var ws;let xy=(ws=class extends Vn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,s){const o=super.parsePrimitiveData(t,e,i,s);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+i).radius;return o}parseArrayData(t,e,i,s){const o=super.parseArrayData(t,e,i,s);for(let r=0;r<o.length;r++){const a=e[i+r];o[r]._custom=it(a[2],this.resolveDataElementOptions(r+i).radius)}return o}parseObjectData(t,e,i,s){const o=super.parseObjectData(t,e,i,s);for(let r=0;r<o.length;r++){const a=e[i+r];o[r]._custom=it(a&&a.r&&+a.r,this.resolveDataElementOptions(r+i).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=e,r=this.getParsed(t),a=s.getLabelForValue(r.x),l=o.getLabelForValue(r.y),c=r._custom;return{label:i[t]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,s){const o=s==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(e,s),h=r.axis,d=a.axis;for(let f=e;f<e+i;f++){const p=t[f],m=!o&&this.getParsed(f),b={},_=b[h]=o?r.getPixelForDecimal(.5):r.getPixelForValue(m[h]),x=b[d]=o?a.getBasePixel():a.getPixelForValue(m[d]);b.skip=isNaN(_)||isNaN(x),c&&(b.options=l||this.resolveDataElementOptions(f,p.active?"active":s),o&&(b.options.radius=0)),this.updateElement(p,f,b,s)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,e);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return e!=="active"&&(s.radius=0),s.radius+=it(i&&i._custom,o),s}},j(ws,"id","bubble"),j(ws,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),j(ws,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}}),ws);function vy(n,t,e){let i=1,s=1,o=0,r=0;if(t<At){const a=n,l=a+t,c=Math.cos(a),h=Math.sin(a),d=Math.cos(l),f=Math.sin(l),p=(k,v,w)=>Qs(k,a,l,!0)?1:Math.max(v,v*e,w,w*e),m=(k,v,w)=>Qs(k,a,l,!0)?-1:Math.min(v,v*e,w,w*e),b=p(0,c,d),_=p(Wt,h,f),x=m(Dt,c,d),M=m(Dt+Wt,h,f);i=(b-x)/2,s=(_-M)/2,o=-(b+x)/2,r=-(_+M)/2}return{ratioX:i,ratioY:s,offsetX:o,offsetY:r}}var Ii;let sc=(Ii=class extends Vn{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let o=l=>+i[l];if(lt(i[t])){const{key:l="value"}=this._parsing;o=c=>+Fn(i[c],l)}let r,a;for(r=t,a=t+e;r<a;++r)s._parsed[r]=o(r)}}_getRotation(){return Fe(this.options.rotation-90)}_getCircumference(){return Fe(this.options.circumference)}_getRotationExtents(){let t=At,e=-At;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,o=s._getRotation(),r=s._getCircumference();t=Math.min(t,o),e=Math.max(e,o+r)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,o=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-r)/2,0),l=Math.min(Lb(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:b}=vy(d,h,l),_=(i.width-r)/f,x=(i.height-r)/p,M=Math.max(Math.min(_,x)/2,0),k=Tf(this.options.radius,M),v=Math.max(k*l,0),w=(k-v)/this._getVisibleDatasetWeightTotal();this.offsetX=m*k,this.offsetY=b*k,s.total=this.calculateTotal(),this.outerRadius=k-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,o=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/At)}updateElements(t,e,i,s){const o=s==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=o&&c.animateScale,p=f?0:this.innerRadius,m=f?0:this.outerRadius,{sharedOptions:b,includeOptions:_}=this._getSharedOptions(e,s);let x=this._getRotation(),M;for(M=0;M<e;++M)x+=this._circumference(M,o);for(M=e;M<e+i;++M){const k=this._circumference(M,o),v=t[M],w={x:h+this.offsetX,y:d+this.offsetY,startAngle:x,endAngle:x+k,circumference:k,outerRadius:m,innerRadius:p};_&&(w.options=b||this.resolveDataElementOptions(M,v.active?"active":s)),x+=k,this.updateElement(v,M,w,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,s;for(s=0;s<e.length;s++){const o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?At*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=lo(e._parsed[t],i.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,o,r,a,l;if(!t){for(s=0,o=i.data.datasets.length;s<o;++s)if(i.isDatasetVisible(s)){r=i.getDatasetMeta(s),t=r.data,a=r.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const o=this.resolveDataElementOptions(i);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(it(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}},j(Ii,"id","doughnut"),j(Ii,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),j(Ii,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),j(Ii,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}}),Ii);var Ms;let wy=(Ms=class extends Vn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=e,r=this.chart._animationsDisabled;let{start:a,count:l}=Bf(e,s,r);this._drawStart=a,this._drawCount=l,zf(e)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:c},t),this.updateElements(s,a,l,t)}updateElements(t,e,i,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(e,s),f=r.axis,p=a.axis,{spanGaps:m,segment:b}=this.options,_=ji(m)?m:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||o||s==="none",M=e+i,k=t.length;let v=e>0&&this.getParsed(e-1);for(let w=0;w<k;++w){const O=t[w],T=x?O:{};if(w<e||w>=M){T.skip=!0;continue}const D=this.getParsed(w),R=ut(D[p]),W=T[f]=r.getPixelForValue(D[f],w),B=T[p]=o||R?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,D,l):D[p],w);T.skip=isNaN(W)||isNaN(B)||R,T.stop=w>0&&Math.abs(D[f]-v[f])>_,b&&(T.parsed=D,T.raw=c.data[w]),d&&(T.options=h||this.resolveDataElementOptions(w,O.active?"active":s)),x||this.updateElement(O,w,T,s),v=D}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},j(Ms,"id","line"),j(Ms,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),j(Ms,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}}),Ms);var Ss;let ig=(Ss=class extends Vn{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=lo(e._parsed[t].r,i.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,e,i,s){return Xf.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<e.min&&(e.min=o),o>e.max&&(e.max=o))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,s=Math.min(e.right-e.left,e.bottom-e.top),o=Math.max(s/2,0),r=Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0),a=(o-r)/t.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,i,s){const o=s==="reset",r=this.chart,l=r.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,d=c.yCenter,f=c.getIndexAngle(0)-.5*Dt;let p=f,m;const b=360/this.countVisibleElements();for(m=0;m<e;++m)p+=this._computeAngle(m,s,b);for(m=e;m<e+i;m++){const _=t[m];let x=p,M=p+this._computeAngle(m,s,b),k=r.getDataVisibility(m)?c.getDistanceFromCenterForValue(this.getParsed(m).r):0;p=M,o&&(l.animateScale&&(k=0),l.animateRotate&&(x=M=f));const v={x:h,y:d,innerRadius:0,outerRadius:k,startAngle:x,endAngle:M,options:this.resolveDataElementOptions(m,_.active?"active":s)};this.updateElement(_,m,v,s)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?Fe(this.resolveDataElementOptions(t,e).angle||i):0}},j(Ss,"id","polarArea"),j(Ss,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),j(Ss,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map((o,r)=>{const l=t.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(r),index:r}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}}),Ss);var yr;let My=(yr=class extends sc{},j(yr,"id","pie"),j(yr,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"}),yr);var ks;let Sy=(ks=class extends Vn{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,s){return Xf.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta,i=e.dataset,s=e.data||[],o=e.iScale.getLabels();if(i.points=s,t!=="resize"){const r=this.resolveDatasetElementOptions(t);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:o.length===s.length,options:r};this.updateElement(i,void 0,a,t)}this.updateElements(s,0,s.length,t)}updateElements(t,e,i,s){const o=this._cachedMeta.rScale,r=s==="reset";for(let a=e;a<e+i;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":s),h=o.getPointPositionForValue(a,this.getParsed(a).r),d=r?o.xCenter:h.x,f=r?o.yCenter:h.y,p={x:d,y:f,angle:h.angle,skip:isNaN(d)||isNaN(f),options:c};this.updateElement(l,a,p,s)}}},j(ks,"id","radar"),j(ks,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),j(ks,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}}),ks);var Cs;let ky=(Cs=class extends Vn{getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=e,r=this.getParsed(t),a=s.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:i[t]||"",value:"("+a+", "+l+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,s=this.chart._animationsDisabled;let{start:o,count:r}=Bf(e,i,s);if(this._drawStart=o,this._drawCount=r,zf(e)&&(o=0,r=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,o,r,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(e,s),d=this.getSharedOptions(h),f=this.includeOptions(s,d),p=r.axis,m=a.axis,{spanGaps:b,segment:_}=this.options,x=ji(b)?b:Number.POSITIVE_INFINITY,M=this.chart._animationsDisabled||o||s==="none";let k=e>0&&this.getParsed(e-1);for(let v=e;v<e+i;++v){const w=t[v],O=this.getParsed(v),T=M?w:{},D=ut(O[m]),R=T[p]=r.getPixelForValue(O[p],v),W=T[m]=o||D?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[m],v);T.skip=isNaN(R)||isNaN(W)||D,T.stop=v>0&&Math.abs(O[p]-k[p])>x,_&&(T.parsed=O,T.raw=c.data[v]),f&&(T.options=d||this.resolveDataElementOptions(v,w.active?"active":s)),M||this.updateElement(w,v,T,s),k=O}this.updateSharedOptions(d,s,h)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let l=e.length-1;l>=0;--l)a=Math.max(a,e[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!e.length)return s;const o=e[0].size(this.resolveDataElementOptions(0)),r=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(s,o,r)/2}},j(Cs,"id","scatter"),j(Cs,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),j(Cs,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}}),Cs);var Cy=Object.freeze({__proto__:null,BarController:yy,BubbleController:xy,DoughnutController:sc,LineController:wy,PieController:My,PolarAreaController:ig,RadarController:Sy,ScatterController:ky});function ti(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class oc{constructor(t){j(this,"options");this.options=t||{}}static override(t){Object.assign(oc.prototype,t)}init(){}formats(){return ti()}parse(){return ti()}format(){return ti()}add(){return ti()}diff(){return ti()}startOf(){return ti()}endOf(){return ti()}}var Py={_date:oc};function Oy(n,t,e,i){const{controller:s,data:o,_sorted:r}=n,a=s._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&r&&o.length){const l=a._reversePixels?Ub:dn;if(i){if(s._sharedOptions){const c=o[0],h=typeof c.getRange=="function"&&c.getRange(t);if(h){const d=l(o,t,e-h),f=l(o,t,e+h);return{lo:d.lo,hi:f.hi}}}}else return l(o,t,e)}return{lo:0,hi:o.length-1}}function co(n,t,e,i,s){const o=n.getSortedVisibleDatasetMetas(),r=e[t];for(let a=0,l=o.length;a<l;++a){const{index:c,data:h}=o[a],{lo:d,hi:f}=Oy(o[a],t,r,s);for(let p=d;p<=f;++p){const m=h[p];m.skip||i(m,c,p)}}}function Ey(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const o=t?Math.abs(i.x-s.x):0,r=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function Ua(n,t,e,i,s){const o=[];return!s&&!n.isPointInArea(t)||co(n,e,t,function(a,l,c){!s&&!fn(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function Ty(n,t,e,i){let s=[];function o(r,a,l){const{startAngle:c,endAngle:h}=r.getProps(["startAngle","endAngle"],i),{angle:d}=Lf(r,{x:t.x,y:t.y});Qs(d,c,h)&&s.push({element:r,datasetIndex:a,index:l})}return co(n,e,t,o),s}function Ay(n,t,e,i,s,o){let r=[];const a=Ey(e);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const p=h.inRange(t.x,t.y,s);if(i&&!p)return;const m=h.getCenterPoint(s);if(!(!!o||n.isPointInArea(m))&&!p)return;const _=a(t,m);_<l?(r=[{element:h,datasetIndex:d,index:f}],l=_):_===l&&r.push({element:h,datasetIndex:d,index:f})}return co(n,e,t,c),r}function Ya(n,t,e,i,s,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?Ty(n,t,e,s):Ay(n,t,e,i,s,o)}function su(n,t,e,i,s){const o=[],r=e==="x"?"inXRange":"inYRange";let a=!1;return co(n,e,t,(l,c,h)=>{l[r](t[e],s)&&(o.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,s))}),i&&!a?[]:o}var Dy={evaluateInteractionItems:co,modes:{index(n,t,e,i){const s=si(t,n),o=e.axis||"x",r=e.includeInvisible||!1,a=e.intersect?Ua(n,s,o,i,r):Ya(n,s,o,!1,i,r),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(n,t,e,i){const s=si(t,n),o=e.axis||"xy",r=e.includeInvisible||!1;let a=e.intersect?Ua(n,s,o,i,r):Ya(n,s,o,!1,i,r);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(n,t,e,i){const s=si(t,n),o=e.axis||"xy",r=e.includeInvisible||!1;return Ua(n,s,o,i,r)},nearest(n,t,e,i){const s=si(t,n),o=e.axis||"xy",r=e.includeInvisible||!1;return Ya(n,s,o,e.intersect,i,r)},x(n,t,e,i){const s=si(t,n);return su(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=si(t,n);return su(n,s,"y",e.intersect,i)}}};const sg=["left","top","right","bottom"];function ls(n,t){return n.filter(e=>e.pos===t)}function ou(n,t){return n.filter(e=>sg.indexOf(e.pos)===-1&&e.box.axis===t)}function cs(n,t){return n.sort((e,i)=>{const s=t?i:e,o=t?e:i;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function Ly(n){const t=[];let e,i,s,o,r,a;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:o,options:{stack:r,stackWeight:a=1}}=s,t.push({index:e,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:a});return t}function Iy(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:o}=e;if(!i||!sg.includes(s))continue;const r=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function Ry(n,t){const e=Iy(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let o,r,a;for(o=0,r=n.length;o<r;++o){a=n[o];const{fullSize:l}=a.box,c=e[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&t.availableWidth,a.height=s):(a.width=i,a.height=h?h*s:l&&t.availableHeight)}return e}function Fy(n){const t=Ly(n),e=cs(t.filter(c=>c.box.fullSize),!0),i=cs(ls(t,"left"),!0),s=cs(ls(t,"right")),o=cs(ls(t,"top"),!0),r=cs(ls(t,"bottom")),a=ou(t,"x"),l=ou(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:s.concat(l).concat(r).concat(a),chartArea:ls(t,"chartArea"),vertical:i.concat(s).concat(l),horizontal:o.concat(r).concat(a)}}function ru(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function og(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function Ny(n,t,e,i){const{pos:s,box:o}=e,r=n.maxPadding;if(!lt(s)){e.size&&(n[s]-=e.size);const d=i[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?o.height:o.width),e.size=d.size/d.count,n[s]+=e.size}o.getPadding&&og(r,o.getPadding());const a=Math.max(0,t.outerWidth-ru(r,n,"left","right")),l=Math.max(0,t.outerHeight-ru(r,n,"top","bottom")),c=a!==n.w,h=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:h}:{same:h,other:c}}function By(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function zy(n,t){const e=t.maxPadding;function i(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(t[r],e[r])}),o}return i(n?["left","right"]:["top","bottom"])}function Rs(n,t,e,i){const s=[];let o,r,a,l,c,h;for(o=0,r=n.length,c=0;o<r;++o){a=n[o],l=a.box,l.update(a.width||t.w,a.height||t.h,zy(a.horizontal,t));const{same:d,other:f}=Ny(t,e,a,i);c|=d&&s.length,h=h||f,l.fullSize||s.push(a)}return c&&Rs(s,t,e,i)||h}function Jo(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function au(n,t,e,i){const s=e.padding;let{x:o,y:r}=t;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*h,f=c.size||l.height;Zs(c.start)&&(r=c.start),l.fullSize?Jo(l,s.left,r,e.outerWidth-s.right-s.left,f):Jo(l,t.left+c.placed,r,d,f),c.start=r,c.placed+=d,r=l.bottom}else{const d=t.h*h,f=c.size||l.width;Zs(c.start)&&(o=c.start),l.fullSize?Jo(l,o,s.top,f,e.outerHeight-s.bottom-s.top):Jo(l,o,t.top+c.placed,f,d),c.start=o,c.placed+=d,o=l.right}}t.x=o,t.y=r}var re={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=le(n.options.layout.padding),o=Math.max(t-s.width,0),r=Math.max(e-s.height,0),a=Fy(n.boxes),l=a.vertical,c=a.horizontal;mt(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const h=l.reduce((b,_)=>_.box.options&&_.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/h,hBoxMaxHeight:r/2}),f=Object.assign({},s);og(f,le(i));const p=Object.assign({maxPadding:f,w:o,h:r,x:s.left,y:s.top},s),m=Ry(l.concat(c),d);Rs(a.fullSize,p,d,m),Rs(l,p,d,m),Rs(c,p,d,m)&&Rs(l,p,d,m),By(p),au(a.leftAndTop,p,d,m),p.x+=p.w,p.y+=p.h,au(a.rightAndBottom,p,d,m),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},mt(a.chartArea,b=>{const _=b.box;Object.assign(_,n.chartArea),_.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};let rg=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}},$y=class extends rg{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}};const Or="$chartjs",Vy={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},lu=n=>n===null||n==="";function jy(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Or]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",lu(s)){const o=Hh(n,"width");o!==void 0&&(n.width=o)}if(lu(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=Hh(n,"height");o!==void 0&&(n.height=o)}return n}const ag=B_?{passive:!0}:!1;function Wy(n,t,e){n&&n.addEventListener(t,e,ag)}function Hy(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,ag)}function Uy(n,t){const e=Vy[n.type]||n.type,{x:i,y:s}=si(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function zr(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function Yy(n,t,e){const i=n.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||zr(a.addedNodes,i),r=r&&!zr(a.removedNodes,i);r&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function Xy(n,t,e){const i=n.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||zr(a.removedNodes,i),r=r&&!zr(a.addedNodes,i);r&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const eo=new Map;let cu=0;function lg(){const n=window.devicePixelRatio;n!==cu&&(cu=n,eo.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function Gy(n,t){eo.size||window.addEventListener("resize",lg),eo.set(n,t)}function qy(n){eo.delete(n),eo.size||window.removeEventListener("resize",lg)}function Ky(n,t,e){const i=n.canvas,s=i&&ic(i);if(!s)return;const o=Nf((a,l)=>{const c=s.clientWidth;e(a,l),c<s.clientWidth&&e()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||o(c,h)});return r.observe(s),Gy(n,o),r}function Xa(n,t,e){e&&e.disconnect(),t==="resize"&&qy(n)}function Jy(n,t,e){const i=n.canvas,s=Nf(o=>{n.ctx!==null&&e(Uy(o,n))},n);return Wy(i,t,s),s}let Zy=class extends rg{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(jy(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Or])return!1;const i=e[Or].initial;["height","width"].forEach(o=>{const r=i[o];ut(r)?e.removeAttribute(o):e.setAttribute(o,r)});const s=i.style||{};return Object.keys(s).forEach(o=>{e.style[o]=s[o]}),e.width=e.width,delete e[Or],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),r={attach:Yy,detach:Xy,resize:Ky}[e]||Jy;s[e]=r(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:Xa,detach:Xa,resize:Xa}[e]||Hy)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return N_(t,e,i,s)}isAttached(t){const e=ic(t);return!!(e&&e.isConnected)}};function Qy(n){return!nc()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?$y:Zy}var xr;let pn=(xr=class{constructor(){j(this,"x");j(this,"y");j(this,"active",!1);j(this,"options");j(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return ji(this.x)&&ji(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(o=>{s[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),s}},j(xr,"defaults",{}),j(xr,"defaultRoutes"),xr);function t0(n,t){const e=n.options.ticks,i=e0(n),s=Math.min(e.maxTicksLimit||i,i),o=e.major.enabled?i0(t):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>s)return s0(t,c,o,r/s),c;const h=n0(o,t,s);if(r>0){let d,f;const p=r>1?Math.round((l-a)/(r-1)):null;for(Zo(t,c,h,ut(p)?0:a-p,a),d=0,f=r-1;d<f;d++)Zo(t,c,h,o[d],o[d+1]);return Zo(t,c,h,l,ut(p)?t.length:l+p),c}return Zo(t,c,h),c}function e0(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function n0(n,t,e){const i=o0(n),s=t.length/e;if(!i)return Math.max(s,1);const o=Vb(i);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>s)return l}return Math.max(s,1)}function i0(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function s0(n,t,e,i){let s=0,o=e[0],r;for(i=Math.ceil(i),r=0;r<n.length;r++)r===o&&(t.push(n[r]),s++,o=e[s*i])}function Zo(n,t,e,i,s){const o=it(i,0),r=Math.min(it(s,n.length),n.length);let a=0,l,c,h;for(e=Math.ceil(e),s&&(l=s-i,e=l/Math.floor(l/e)),h=o;h<0;)a++,h=Math.round(o+a*e);for(c=Math.max(o,0);c<r;c++)c===h&&(t.push(n[c]),a++,h=Math.round(o+a*e))}function o0(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const r0=n=>n==="left"?"right":n==="right"?"left":n,hu=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,uu=(n,t)=>Math.min(t||n,n);function du(n,t){const e=[],i=n.length/t,s=n.length;let o=0;for(;o<s;o+=i)e.push(n[Math.floor(o)]);return e}function a0(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),o=n._startPixel,r=n._endPixel,a=1e-6;let l=n.getPixelForTick(s),c;if(!(e&&(i===1?c=Math.max(l-o,r-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<o-a||l>r+a)))return l}function l0(n,t){mt(n,e=>{const i=e.gc,s=i.length/2;let o;if(s>t){for(o=0;o<s;++o)delete e.data[i[o]];i.splice(0,s)}})}function hs(n){return n.drawTicks?n.tickLength:0}function fu(n,t){if(!n.display)return 0;const e=Qt(n.font,t),i=le(n.padding);return(Tt(n.text)?n.text.length:1)*e.lineHeight+i.height}function c0(n,t){return $n(n,{scale:t,type:"scale"})}function h0(n,t,e){return $n(n,{tick:e,index:t,type:"tick"})}function u0(n,t,e){let i=Kl(n);return(e&&t!=="right"||!e&&t==="right")&&(i=r0(i)),i}function d0(n,t,e,i){const{top:s,left:o,bottom:r,right:a,chart:l}=n,{chartArea:c,scales:h}=l;let d=0,f,p,m;const b=r-s,_=a-o;if(n.isHorizontal()){if(p=oe(i,o,a),lt(e)){const x=Object.keys(e)[0],M=e[x];m=h[x].getPixelForValue(M)+b-t}else e==="center"?m=(c.bottom+c.top)/2+b-t:m=hu(n,e,t);f=a-o}else{if(lt(e)){const x=Object.keys(e)[0],M=e[x];p=h[x].getPixelForValue(M)-_+t}else e==="center"?p=(c.left+c.right)/2-_+t:p=hu(n,e,t);m=oe(i,r,s),d=e==="left"?-Wt:Wt}return{titleX:p,titleY:m,maxWidth:f,rotation:d}}let ho=class cg extends pn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=ve(t,Number.POSITIVE_INFINITY),e=ve(e,Number.NEGATIVE_INFINITY),i=ve(i,Number.POSITIVE_INFINITY),s=ve(s,Number.NEGATIVE_INFINITY),{min:ve(t,i),max:ve(e,s),minDefined:zt(t),maxDefined:zt(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,t),s||(e=Math.min(e,r.min)),o||(i=Math.max(i,r.max));return e=o&&e>i?i:e,i=s&&e>i?e:i,{min:ve(e,ve(i,e)),max:ve(i,ve(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Mt(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=p_(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?du(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=t0(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Mt(this.options.afterUpdate,[this])}beforeSetDimensions(){Mt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Mt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Mt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Mt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,o;for(i=0,s=t.length;i<s;i++)o=t[i],o.label=Mt(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){Mt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Mt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=uu(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,o=e.maxRotation;let r=s,a,l,c;if(!this._isVisible()||!e.display||s>=o||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,p=ne(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/i:p/(i-1),d+6>a&&(a=p/(i-(t.offset?.5:1)),l=this.maxHeight-hs(t.grid)-e.padding-fu(t.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),r=Gl(Math.min(Math.asin(ne((h.highest.height+6)/a,-1,1)),Math.asin(ne(l/c,-1,1))-Math.asin(ne(f/c,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){Mt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Mt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=fu(s,e.options.font);if(a?(t.width=this.maxWidth,t.height=hs(o)+l):(t.height=this.maxHeight,t.width=hs(o)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),p=i.padding*2,m=Fe(this.labelRotation),b=Math.cos(m),_=Math.sin(m);if(a){const x=i.mirror?0:_*d.width+b*f.height;t.height=Math.min(this.maxHeight,t.height+x+p)}else{const x=i.mirror?0:b*d.width+_*f.height;t.width=Math.min(this.maxWidth,t.width+x+p)}this._calculatePadding(c,h,_,b)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=s*t.width,p=i*e.height):(f=i*t.height,p=s*e.width):o==="start"?p=e.width:o==="end"?f=t.width:o!=="inner"&&(f=t.width/2,p=e.width/2),this.paddingLeft=Math.max((f-h+r)*this.width/(this.width-h),0),this.paddingRight=Math.max((p-d+r)*this.width/(this.width-d),0)}else{let h=e.height/2,d=t.height/2;o==="start"?(h=0,d=t.height):o==="end"&&(h=e.height,d=0),this.paddingTop=h+r,this.paddingBottom=d+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Mt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)ut(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=du(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(e/uu(e,i));let c=0,h=0,d,f,p,m,b,_,x,M,k,v,w;for(d=0;d<e;d+=l){if(m=t[d].label,b=this._resolveTickFontOptions(d),s.font=_=b.string,x=o[_]=o[_]||{data:{},gc:[]},M=b.lineHeight,k=v=0,!ut(m)&&!Tt(m))k=Nr(s,x.data,x.gc,k,m),v=M;else if(Tt(m))for(f=0,p=m.length;f<p;++f)w=m[f],!ut(w)&&!Tt(w)&&(k=Nr(s,x.data,x.gc,k,w),v+=M);r.push(k),a.push(v),c=Math.max(k,c),h=Math.max(v,h)}l0(o,e);const O=r.indexOf(c),T=a.indexOf(h),D=R=>({width:r[R]||0,height:a[R]||0});return{first:D(0),last:D(e-1),widest:D(O),highest:D(T),widths:r,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Hb(this._alignToPixels?Qn(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=h0(this.getContext(),t,i))}return this.$context||(this.$context=c0(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Fe(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:o,position:r,border:a}=s,l=o.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=hs(o),p=[],m=a.setContext(this.getContext()),b=m.display?m.width:0,_=b/2,x=function(X){return Qn(i,X,b)};let M,k,v,w,O,T,D,R,W,B,Y,et;if(r==="top")M=x(this.bottom),T=this.bottom-f,R=M-_,B=x(t.top)+_,et=t.bottom;else if(r==="bottom")M=x(this.top),B=t.top,et=x(t.bottom)-_,T=M+_,R=this.top+f;else if(r==="left")M=x(this.right),O=this.right-f,D=M-_,W=x(t.left)+_,Y=t.right;else if(r==="right")M=x(this.left),W=t.left,Y=x(t.right)-_,O=M+_,D=this.left+f;else if(e==="x"){if(r==="center")M=x((t.top+t.bottom)/2+.5);else if(lt(r)){const X=Object.keys(r)[0],K=r[X];M=x(this.chart.scales[X].getPixelForValue(K))}B=t.top,et=t.bottom,T=M+_,R=T+f}else if(e==="y"){if(r==="center")M=x((t.left+t.right)/2);else if(lt(r)){const X=Object.keys(r)[0],K=r[X];M=x(this.chart.scales[X].getPixelForValue(K))}O=M-_,D=O-f,W=t.left,Y=t.right}const Q=it(s.ticks.maxTicksLimit,d),N=Math.max(1,Math.ceil(d/Q));for(k=0;k<d;k+=N){const X=this.getContext(k),K=o.setContext(X),St=a.setContext(X),yt=K.lineWidth,Xt=K.color,xe=St.dash||[],ie=St.dashOffset,xt=K.tickWidth,Gt=K.tickColor,qt=K.tickBorderDash||[],Lt=K.tickBorderDashOffset;v=a0(this,k,l),v!==void 0&&(w=Qn(i,v,yt),c?O=D=W=Y=w:T=R=B=et=w,p.push({tx1:O,ty1:T,tx2:D,ty2:R,x1:W,y1:B,x2:Y,y2:et,width:yt,color:Xt,borderDash:xe,borderDashOffset:ie,tickWidth:xt,tickColor:Gt,tickBorderDash:qt,tickBorderDashOffset:Lt}))}return this._ticksLength=d,this._borderValue=M,p}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:o}=i,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=o,f=hs(i.grid),p=f+h,m=d?-h:p,b=-Fe(this.labelRotation),_=[];let x,M,k,v,w,O,T,D,R,W,B,Y,et="middle";if(s==="top")O=this.bottom-m,T=this._getXAxisLabelAlignment();else if(s==="bottom")O=this.top+m,T=this._getXAxisLabelAlignment();else if(s==="left"){const N=this._getYAxisLabelAlignment(f);T=N.textAlign,w=N.x}else if(s==="right"){const N=this._getYAxisLabelAlignment(f);T=N.textAlign,w=N.x}else if(e==="x"){if(s==="center")O=(t.top+t.bottom)/2+p;else if(lt(s)){const N=Object.keys(s)[0],X=s[N];O=this.chart.scales[N].getPixelForValue(X)+p}T=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")w=(t.left+t.right)/2-p;else if(lt(s)){const N=Object.keys(s)[0],X=s[N];w=this.chart.scales[N].getPixelForValue(X)}T=this._getYAxisLabelAlignment(f).textAlign}e==="y"&&(l==="start"?et="top":l==="end"&&(et="bottom"));const Q=this._getLabelSizes();for(x=0,M=a.length;x<M;++x){k=a[x],v=k.label;const N=o.setContext(this.getContext(x));D=this.getPixelForTick(x)+o.labelOffset,R=this._resolveTickFontOptions(x),W=R.lineHeight,B=Tt(v)?v.length:1;const X=B/2,K=N.color,St=N.textStrokeColor,yt=N.textStrokeWidth;let Xt=T;r?(w=D,T==="inner"&&(x===M-1?Xt=this.options.reverse?"left":"right":x===0?Xt=this.options.reverse?"right":"left":Xt="center"),s==="top"?c==="near"||b!==0?Y=-B*W+W/2:c==="center"?Y=-Q.highest.height/2-X*W+W:Y=-Q.highest.height+W/2:c==="near"||b!==0?Y=W/2:c==="center"?Y=Q.highest.height/2-X*W:Y=Q.highest.height-B*W,d&&(Y*=-1),b!==0&&!N.showLabelBackdrop&&(w+=W/2*Math.sin(b))):(O=D,Y=(1-B)*W/2);let xe;if(N.showLabelBackdrop){const ie=le(N.backdropPadding),xt=Q.heights[x],Gt=Q.widths[x];let qt=Y-ie.top,Lt=0-ie.left;switch(et){case"middle":qt-=xt/2;break;case"bottom":qt-=xt;break}switch(T){case"center":Lt-=Gt/2;break;case"right":Lt-=Gt;break;case"inner":x===M-1?Lt-=Gt:x>0&&(Lt-=Gt/2);break}xe={left:Lt,top:qt,width:Gt+ie.width,height:xt+ie.height,color:N.backdropColor}}_.push({label:v,font:R,textOffset:Y,options:{rotation:b,color:K,strokeColor:St,strokeWidth:yt,textAlign:Xt,textBaseline:et,translation:[w,O],backdrop:xe}})}return _}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Fe(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),a=t+o,l=r.widest.width;let c,h;return e==="left"?s?(h=this.right+o,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):e==="right"?s?(h=this.left+o,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:o,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,o,r),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(o=>o.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(o=0,r=s.length;o<r;++o){const l=s[o];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,o=i.setContext(this.getContext()),r=i.display?o.width:0;if(!r)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=Qn(t,this.left,r)-r/2,h=Qn(t,this.right,a)+a/2,d=f=l):(d=Qn(t,this.top,r)-r/2,f=Qn(t,this.bottom,a)+a/2,c=h=l),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(c,d),e.lineTo(h,f),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&oa(i,s);const o=this.getLabelItems(t);for(const r of o){const a=r.options,l=r.font,c=r.label,h=r.textOffset;bi(i,c,0,h,l,a)}s&&ra(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const o=Qt(i.font),r=le(i.padding),a=i.align;let l=o.lineHeight/2;e==="bottom"||e==="center"||lt(e)?(l+=r.bottom,Tt(i.text)&&(l+=o.lineHeight*(i.text.length-1))):l+=r.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=d0(this,l,e,a);bi(t,i.text,0,0,o,{color:i.color,maxWidth:d,rotation:f,textAlign:u0(a,e,s),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=it(t.grid&&t.grid.z,-1),s=it(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==cg.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let o,r;for(o=0,r=e.length;o<r;++o){const a=e[o];a[i]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Qt(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},Qo=class{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;p0(e)&&(i=this.register(e));const s=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in s||(s[o]=t,f0(t,r,i),this.override&&$t.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in $t[s]&&(delete $t[s][i],this.override&&delete mi[i])}};function f0(n,t,e){const i=Js(Object.create(null),[e?$t.get(e):{},$t.get(t),n.defaults]);$t.set(t,i),n.defaultRoutes&&g0(t,n.defaultRoutes),n.descriptors&&$t.describe(t,n.descriptors)}function g0(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),o=[n].concat(i).join("."),r=t[e].split("."),a=r.pop(),l=r.join(".");$t.route(o,s,l,a)})}function p0(n){return"id"in n&&"defaults"in n}let m0=class{constructor(){this.controllers=new Qo(Vn,"datasets",!0),this.elements=new Qo(pn,"elements"),this.plugins=new Qo(Object,"plugins"),this.scales=new Qo(ho,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const o=i||this._getRegistryForType(s);i||o.isForType(s)||o===this.plugins&&s.id?this._exec(t,o,s):mt(s,r=>{const a=i||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,e,i){const s=Xl(t);Mt(i["before"+s],[],i),e[t](i),Mt(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}};var He=new m0;let b0=class{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=s?this._descriptors(t).filter(s):this._descriptors(t),r=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,e,i,s){s=s||{};for(const o of t){const r=o.plugin,a=r[i],l=[e,s,o.options];if(Mt(a,l,r)===!1&&s.cancelable)return!1}return!0}invalidate(){ut(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=it(i.options&&i.options.plugins,{}),o=_0(i);return s===!1&&!e?[]:x0(t,o,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}};function _0(n){const t={},e=[],i=Object.keys(He.plugins.items);for(let o=0;o<i.length;o++)e.push(He.getPlugin(i[o]));const s=n.plugins||[];for(let o=0;o<s.length;o++){const r=s[o];e.indexOf(r)===-1&&(e.push(r),t[r.id]=!0)}return{plugins:e,localIds:t}}function y0(n,t){return!t&&n===!1?null:n===!0?{}:n}function x0(n,{plugins:t,localIds:e},i,s){const o=[],r=n.getContext();for(const a of t){const l=a.id,c=y0(i[l],s);c!==null&&o.push({plugin:a,options:v0(n.config,{plugin:a,local:e[l]},c,r)})}return o}function v0(n,{plugin:t,local:e},i,s){const o=n.pluginScopeKeys(t),r=n.getOptionScopes(i,o);return e&&t.defaults&&r.push(t.defaults),n.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _l(n,t){const e=$t.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function w0(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function M0(n,t){return n===t?"_index_":"_value_"}function gu(n){if(n==="x"||n==="y"||n==="r")return n}function S0(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function yl(n,...t){if(gu(n))return n;for(const e of t){const i=e.axis||S0(e.position)||n.length>1&&gu(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function pu(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function k0(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return pu(n,"x",e[0])||pu(n,"y",e[0])}return{}}function C0(n,t){const e=mi[n.type]||{scales:{}},i=t.scales||{},s=_l(n.type,t),o=Object.create(null);return Object.keys(i).forEach(r=>{const a=i[r];if(!lt(a))return console.error(`Invalid scale configuration for scale: ${r}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=yl(r,a,k0(r,n),$t.scales[a.type]),c=M0(l,s),h=e.scales||{};o[r]=Ws(Object.create(null),[{axis:l},a,h[l],h[c]])}),n.data.datasets.forEach(r=>{const a=r.type||n.type,l=r.indexAxis||_l(a,t),h=(mi[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=w0(d,l),p=r[f+"AxisID"]||f;o[p]=o[p]||Object.create(null),Ws(o[p],[{axis:f},i[p],h[d]])})}),Object.keys(o).forEach(r=>{const a=o[r];Ws(a,[$t.scales[a.type],$t.scale])}),o}function hg(n){const t=n.options||(n.options={});t.plugins=it(t.plugins,{}),t.scales=C0(n,t)}function ug(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function P0(n){return n=n||{},n.data=ug(n.data),hg(n),n}const mu=new Map,dg=new Set;function tr(n,t){let e=mu.get(n);return e||(e=t(),mu.set(n,e),dg.add(e)),e}const us=(n,t,e)=>{const i=Fn(t,e);i!==void 0&&n.add(i)};let O0=class{constructor(t){this._config=P0(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ug(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),hg(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return tr(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return tr(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return tr(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return tr(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:o}=this,r=this._cachedScopes(t,i),a=r.get(e);if(a)return a;const l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(d=>us(l,t,d))),h.forEach(d=>us(l,s,d)),h.forEach(d=>us(l,mi[o]||{},d)),h.forEach(d=>us(l,$t,d)),h.forEach(d=>us(l,ml,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),dg.has(e)&&r.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,mi[e]||{},$t.datasets[e]||{},{type:e},$t,ml]}resolveNamedOptions(t,e,i,s=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=bu(this._resolverCache,t,s);let l=r;if(T0(r,e)){o.$shared=!1,i=Nn(i)?i():i;const c=this.createResolver(t,i,a);l=Wi(r,i,c)}for(const c of e)o[c]=l[c];return o}createResolver(t,e,i=[""],s){const{resolver:o}=bu(this._resolverCache,t,i);return lt(e)?Wi(o,e,void 0,s):o}};function bu(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let o=i.get(s);return o||(o={resolver:Ql(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,o)),o}const E0=n=>lt(n)&&Object.getOwnPropertyNames(n).some(t=>Nn(n[t]));function T0(n,t){const{isScriptable:e,isIndexable:i}=Wf(n);for(const s of t){const o=e(s),r=i(s),a=(r||o)&&n[s];if(o&&(Nn(a)||E0(a))||r&&Tt(a))return!0}return!1}var A0="4.4.2";const D0=["top","bottom","left","right","chartArea"];function _u(n,t){return n==="top"||n==="bottom"||D0.indexOf(n)===-1&&t==="x"}function yu(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function xu(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Mt(e&&e.onComplete,[n],t)}function L0(n){const t=n.chart,e=t.options.animation;Mt(e&&e.onProgress,[n],t)}function fg(n){return nc()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Er={},vu=n=>{const t=fg(n);return Object.values(Er).filter(e=>e.canvas===t).pop()};function I0(n,t,e){const i=Object.keys(n);for(const s of i){const o=+s;if(o>=t){const r=n[s];delete n[s],(e>0||o>t)&&(n[o+e]=r)}}}function R0(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}function er(n,t,e){return n.options.clip?n[e]:t[e]}function F0(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:er(e,t,"left"),right:er(e,t,"right"),top:er(i,t,"top"),bottom:er(i,t,"bottom")}:t}var kn;let Fs=(kn=class{static register(...t){He.add(...t),wu()}static unregister(...t){He.remove(...t),wu()}constructor(t,e){const i=this.config=new O0(e),s=fg(t),o=vu(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Qy(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=Db(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new b0,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Gb(d=>this.update(d),r.resizeDelay||0),this._dataChanges=[],Er[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}nn.listen(this,"complete",xu),nn.listen(this,"progress",L0),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:o}=this;return ut(t)?e&&o?o:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return He}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Wh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return $h(this.canvas,this.ctx),this}stop(){return nn.stop(this),this}resize(t,e){nn.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,t,e,o),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,Wh(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),Mt(i.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};mt(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((r,a)=>(r[a]=!1,r),{});let o=[];e&&(o=o.concat(Object.keys(e).map(r=>{const a=e[r],l=yl(r,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),mt(o,r=>{const a=r.options,l=a.id,c=yl(l,a),h=it(a.type,r.dtype);(a.position===void 0||_u(a.position,c)!==_u(r.dposition))&&(a.position=r.dposition),s[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=He.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,t)}),mt(s,(r,a)=>{r||delete i[a]}),mt(i,r=>{re.configure(this,r,r.options),re.addBox(this,r)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,o)=>s.index-o.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(yu("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const o=e[i];let r=this.getDatasetMeta(i);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(i),r=this.getDatasetMeta(i)),r.type=a,r.indexAxis=o.indexAxis||_l(a,this.options),r.order=o.order||0,r.index=i,r.label=""+o.label,r.visible=this.isDatasetVisible(i),r.controller)r.controller.updateIndex(i),r.controller.linkScales();else{const l=He.getController(a),{datasetElementType:c,dataElementType:h}=$t.datasets[a];Object.assign(l,{dataElementType:He.getElement(h),datasetElementType:c&&He.getElement(c)}),r.controller=new l(this,i),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){mt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!s&&o.indexOf(d)===-1;d.buildOrUpdateElements(f),r=Math.max(+d.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),s||mt(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(yu("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){mt(this.scales,t=>{re.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Ah(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:o}of e){const r=i==="_removeElements"?-o:o;I0(t,s,r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),s=i(0);for(let o=1;o<e;o++)if(!Ah(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;re.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],mt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Nn(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(nn.has(this)?this.attached&&!nn.running(this)&&nn.start(this):(this.draw(),xu({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,o;for(s=0,o=e.length;s<o;++s){const r=e[s];(!t||r.visible)&&i.push(r)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,s=!i.disabled,o=F0(t,this.chartArea),r={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&oa(e,{left:i.left===!1?0:o.left-i.left,right:i.right===!1?this.width:o.right+i.right,top:i.top===!1?0:o.top-i.top,bottom:i.bottom===!1?this.height:o.bottom+i.bottom}),t.controller.draw(),s&&ra(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return fn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const o=Dy.modes[e];return typeof o=="function"?o(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(o=>o&&o._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=$n(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,s);Zs(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),r.update(o,{visible:i}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),nn.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),$h(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Er[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,r)=>{e.addEventListener(this,o,r),t[o]=r},s=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};mt(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",o),i("detach",r)};r=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():r()}unbindEvents(){mt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},mt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let o,r,a,l;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){r=t[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!Ir(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,o=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),r=o(e,t),a=i?t:o(t,e);r.length&&this.updateHoverStyle(r,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:o}=this,r=e,a=this._getActiveElements(t,s,i,r),l=Bb(t),c=R0(t,this._lastEvent,i,l);i&&(this._lastEvent=null,Mt(o.onHover,[t,a,this],this),l&&Mt(o.onClick,[t,a,this],this));const h=!Ir(a,s);return(h||e)&&(this._active=a,this._updateHoverStyles(a,s,e)),this._lastEvent=c,h}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}},j(kn,"defaults",$t),j(kn,"instances",Er),j(kn,"overrides",mi),j(kn,"registry",He),j(kn,"version",A0),j(kn,"getChart",vu),kn);function wu(){return mt(Fs.instances,n=>n._plugins.invalidate())}function N0(n,t,e){const{startAngle:i,pixelMargin:s,x:o,y:r,outerRadius:a,innerRadius:l}=t;let c=s/a;n.beginPath(),n.arc(o,r,a,i-c,e+c),l>s?(c=s/l,n.arc(o,r,l,e+c,i-c,!0)):n.arc(o,r,s,e+Wt,i-Wt),n.closePath(),n.clip()}function B0(n){return Zl(n,["outerStart","outerEnd","innerStart","innerEnd"])}function z0(n,t,e,i){const s=B0(n.options.borderRadius),o=(e-t)/2,r=Math.min(o,i*t/2),a=l=>{const c=(e-Math.min(o,l))*i/2;return ne(l,0,Math.min(o,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:ne(s.innerStart,0,r),innerEnd:ne(s.innerEnd,0,r)}}function Ei(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function $r(n,t,e,i,s,o){const{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,d=Math.max(t.outerRadius+i+e-c,0),f=h>0?h+i+e+c:0;let p=0;const m=s-l;if(i){const N=h>0?h-i:0,X=d>0?d-i:0,K=(N+X)/2,St=K!==0?m*K/(K+i):m;p=(m-St)/2}const b=Math.max(.001,m*d-e/Dt)/d,_=(m-b)/2,x=l+_+p,M=s-_-p,{outerStart:k,outerEnd:v,innerStart:w,innerEnd:O}=z0(t,f,d,M-x),T=d-k,D=d-v,R=x+k/T,W=M-v/D,B=f+w,Y=f+O,et=x+w/B,Q=M-O/Y;if(n.beginPath(),o){const N=(R+W)/2;if(n.arc(r,a,d,R,N),n.arc(r,a,d,N,W),v>0){const yt=Ei(D,W,r,a);n.arc(yt.x,yt.y,v,W,M+Wt)}const X=Ei(Y,M,r,a);if(n.lineTo(X.x,X.y),O>0){const yt=Ei(Y,Q,r,a);n.arc(yt.x,yt.y,O,M+Wt,Q+Math.PI)}const K=(M-O/f+(x+w/f))/2;if(n.arc(r,a,f,M-O/f,K,!0),n.arc(r,a,f,K,x+w/f,!0),w>0){const yt=Ei(B,et,r,a);n.arc(yt.x,yt.y,w,et+Math.PI,x-Wt)}const St=Ei(T,x,r,a);if(n.lineTo(St.x,St.y),k>0){const yt=Ei(T,R,r,a);n.arc(yt.x,yt.y,k,x-Wt,R)}}else{n.moveTo(r,a);const N=Math.cos(R)*d+r,X=Math.sin(R)*d+a;n.lineTo(N,X);const K=Math.cos(W)*d+r,St=Math.sin(W)*d+a;n.lineTo(K,St)}n.closePath()}function $0(n,t,e,i,s){const{fullCircles:o,startAngle:r,circumference:a}=t;let l=t.endAngle;if(o){$r(n,t,e,i,l,s);for(let c=0;c<o;++c)n.fill();isNaN(a)||(l=r+(a%At||At))}return $r(n,t,e,i,l,s),n.fill(),l}function V0(n,t,e,i,s){const{fullCircles:o,startAngle:r,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:h,borderDash:d,borderDashOffset:f}=l,p=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=f,p?(n.lineWidth=c*2,n.lineJoin=h||"round"):(n.lineWidth=c,n.lineJoin=h||"bevel");let m=t.endAngle;if(o){$r(n,t,e,i,m,s);for(let b=0;b<o;++b)n.stroke();isNaN(a)||(m=r+(a%At||At))}p&&N0(n,t,m),o||($r(n,t,e,i,m,s),n.stroke())}var Ri;let j0=(Ri=class extends pn{constructor(e){super();j(this,"circumference");j(this,"endAngle");j(this,"fullCircles");j(this,"innerRadius");j(this,"outerRadius");j(this,"pixelMargin");j(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,i,s){const o=this.getProps(["x","y"],s),{angle:r,distance:a}=Lf(o,{x:e,y:i}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,b=it(f,c-l)>=At||Qs(r,l,c),_=un(a,h+p,d+p);return b&&_}getCenterPoint(e){const{x:i,y:s,startAngle:o,endAngle:r,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:h}=this.options,d=(o+r)/2,f=(a+l+h+c)/2;return{x:i+Math.cos(d)*f,y:s+Math.sin(d)*f}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:i,circumference:s}=this,o=(i.offset||0)/4,r=(i.spacing||0)/2,a=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=s>At?Math.floor(s/At):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*o,Math.sin(l)*o);const c=1-Math.sin(Math.min(Dt,s||0)),h=o*c;e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,$0(e,this,h,r,a),V0(e,this,h,r,a),e.restore()}},j(Ri,"id","arc"),j(Ri,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),j(Ri,"defaultRoutes",{backgroundColor:"backgroundColor"}),j(Ri,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"}),Ri);function gg(n,t,e=t){n.lineCap=it(e.borderCapStyle,t.borderCapStyle),n.setLineDash(it(e.borderDash,t.borderDash)),n.lineDashOffset=it(e.borderDashOffset,t.borderDashOffset),n.lineJoin=it(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=it(e.borderWidth,t.borderWidth),n.strokeStyle=it(e.borderColor,t.borderColor)}function W0(n,t,e){n.lineTo(e.x,e.y)}function H0(n){return n.stepped?r_:n.tension||n.cubicInterpolationMode==="monotone"?a_:W0}function pg(n,t,e={}){const i=n.length,{start:s=0,end:o=i-1}=e,{start:r,end:a}=t,l=Math.max(s,r),c=Math.min(o,a),h=s<r&&o<r||s>a&&o>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!h?i+c-l:c-l}}function U0(n,t,e,i){const{points:s,options:o}=t,{count:r,start:a,loop:l,ilen:c}=pg(s,e,i),h=H0(o);let{move:d=!0,reverse:f}=i||{},p,m,b;for(p=0;p<=c;++p)m=s[(a+(f?c-p:p))%r],!m.skip&&(d?(n.moveTo(m.x,m.y),d=!1):h(n,b,m,f,o.stepped),b=m);return l&&(m=s[(a+(f?c:0))%r],h(n,b,m,f,o.stepped)),!!l}function Y0(n,t,e,i){const s=t.points,{count:o,start:r,ilen:a}=pg(s,e,i),{move:l=!0,reverse:c}=i||{};let h=0,d=0,f,p,m,b,_,x;const M=v=>(r+(c?a-v:v))%o,k=()=>{b!==_&&(n.lineTo(h,_),n.lineTo(h,b),n.lineTo(h,x))};for(l&&(p=s[M(0)],n.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=s[M(f)],p.skip)continue;const v=p.x,w=p.y,O=v|0;O===m?(w<b?b=w:w>_&&(_=w),h=(d*h+v)/++d):(k(),n.lineTo(v,w),m=O,d=0,b=_=w),x=w}k()}function xl(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?Y0:U0}function X0(n){return n.stepped?z_:n.tension||n.cubicInterpolationMode==="monotone"?$_:oi}function G0(n,t,e,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,i)&&s.closePath()),gg(n,t.options),n.stroke(s)}function q0(n,t,e,i){const{segments:s,options:o}=t,r=xl(t);for(const a of s)gg(n,o,a.style),n.beginPath(),r(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const K0=typeof Path2D=="function";function J0(n,t,e,i){K0&&!t.options.segment?G0(n,t,e,i):q0(n,t,e,i)}var Fi;let la=(Fi=class extends pn{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;A_(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Y_(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],o=this.points,r=Qf(this,{property:e,start:s,end:s});if(!r.length)return;const a=[],l=X0(i);let c,h;for(c=0,h=r.length;c<h;++c){const{start:d,end:f}=r[c],p=o[d],m=o[f];if(p===m){a.push(p);continue}const b=Math.abs((s-p[e])/(m[e]-p[e])),_=l(p,m,b,i.stepped);_[e]=t[e],a.push(_)}return a.length===1?a[0]:a}pathSegment(t,e,i){return xl(this)(t,this,e,i)}path(t,e,i){const s=this.segments,o=xl(this);let r=this._loop;e=e||0,i=i||this.points.length-e;for(const a of s)r&=o(t,this,a,{start:e,end:e+i-1});return!!r}draw(t,e,i,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),J0(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}},j(Fi,"id","line"),j(Fi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),j(Fi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),j(Fi,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"}),Fi);function Mu(n,t,e,i){const s=n.options,{[e]:o}=n.getProps([e],i);return Math.abs(t-o)<s.radius+s.hitRadius}var Ps;let Z0=(Ps=class extends pn{constructor(e){super();j(this,"parsed");j(this,"skip");j(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,s){const o=this.options,{x:r,y:a}=this.getProps(["x","y"],s);return Math.pow(e-r,2)+Math.pow(i-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,i){return Mu(this,e,"x",i)}inYRange(e,i){return Mu(this,e,"y",i)}getCenterPoint(e){const{x:i,y:s}=this.getProps(["x","y"],e);return{x:i,y:s}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);const s=i&&e.borderWidth||0;return(i+s)*2}draw(e,i){const s=this.options;this.skip||s.radius<.1||!fn(this,i,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,bl(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}},j(Ps,"id","point"),j(Ps,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),j(Ps,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ps);function mg(n,t){const{x:e,y:i,base:s,width:o,height:r}=n.getProps(["x","y","base","width","height"],t);let a,l,c,h,d;return n.horizontal?(d=r/2,a=Math.min(e,s),l=Math.max(e,s),c=i-d,h=i+d):(d=o/2,a=e-d,l=e+d,c=Math.min(i,s),h=Math.max(i,s)),{left:a,top:c,right:l,bottom:h}}function Tn(n,t,e,i){return n?0:ne(t,e,i)}function Q0(n,t,e){const i=n.options.borderWidth,s=n.borderSkipped,o=jf(i);return{t:Tn(s.top,o.top,0,e),r:Tn(s.right,o.right,0,t),b:Tn(s.bottom,o.bottom,0,e),l:Tn(s.left,o.left,0,t)}}function tx(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,o=fi(s),r=Math.min(t,e),a=n.borderSkipped,l=i||lt(s);return{topLeft:Tn(!l||a.top||a.left,o.topLeft,0,r),topRight:Tn(!l||a.top||a.right,o.topRight,0,r),bottomLeft:Tn(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:Tn(!l||a.bottom||a.right,o.bottomRight,0,r)}}function ex(n){const t=mg(n),e=t.right-t.left,i=t.bottom-t.top,s=Q0(n,e/2,i/2),o=tx(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:o},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function Ga(n,t,e,i){const s=t===null,o=e===null,a=n&&!(s&&o)&&mg(n,i);return a&&(s||un(t,a.left,a.right))&&(o||un(e,a.top,a.bottom))}function nx(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function ix(n,t){n.rect(t.x,t.y,t.w,t.h)}function qa(n,t,e={}){const i=n.x!==e.x?-t:0,s=n.y!==e.y?-t:0,o=(n.x+n.w!==e.x+e.w?t:0)-i,r=(n.y+n.h!==e.y+e.h?t:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+o,h:n.h+r,radius:n.radius}}var Os;let sx=(Os=class extends pn{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:o,outer:r}=ex(this),a=nx(r.radius)?to:ix;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),a(t,qa(r,e,o)),t.clip(),a(t,qa(o,-e,r)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,qa(o,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return Ga(this,t,e,i)}inXRange(t,e){return Ga(this,t,null,e)}inYRange(t,e){return Ga(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+s)/2:e,y:o?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}},j(Os,"id","bar"),j(Os,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),j(Os,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Os);var ox=Object.freeze({__proto__:null,ArcElement:j0,BarElement:sx,LineElement:la,PointElement:Z0});const vl=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Su=vl.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function bg(n){return vl[n%vl.length]}function _g(n){return Su[n%Su.length]}function rx(n,t){return n.borderColor=bg(t),n.backgroundColor=_g(t),++t}function ax(n,t){return n.backgroundColor=n.data.map(()=>bg(t++)),t}function lx(n,t){return n.backgroundColor=n.data.map(()=>_g(t++)),t}function cx(n){let t=0;return(e,i)=>{const s=n.getDatasetMeta(i).controller;s instanceof sc?t=ax(e,t):s instanceof ig?t=lx(e,t):s&&(t=rx(e,t))}}function ku(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function hx(n){return n&&(n.borderColor||n.backgroundColor)}var ux={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;const{data:{datasets:i},options:s}=n.config,{elements:o}=s;if(!e.forceOverride&&(ku(i)||hx(s)||o&&ku(o)))return;const r=cx(n);i.forEach(r)}};function dx(n,t,e,i,s){const o=s.samples||i;if(o>=e)return n.slice(t,t+e);const r=[],a=(e-2)/(o-2);let l=0;const c=t+e-1;let h=t,d,f,p,m,b;for(r[l++]=n[h],d=0;d<o-2;d++){let _=0,x=0,M;const k=Math.floor((d+1)*a)+1+t,v=Math.min(Math.floor((d+2)*a)+1,e)+t,w=v-k;for(M=k;M<v;M++)_+=n[M].x,x+=n[M].y;_/=w,x/=w;const O=Math.floor(d*a)+1+t,T=Math.min(Math.floor((d+1)*a)+1,e)+t,{x:D,y:R}=n[h];for(p=m=-1,M=O;M<T;M++)m=.5*Math.abs((D-_)*(n[M].y-R)-(D-n[M].x)*(x-R)),m>p&&(p=m,f=n[M],b=M);r[l++]=f,h=b}return r[l++]=n[c],r}function fx(n,t,e,i){let s=0,o=0,r,a,l,c,h,d,f,p,m,b;const _=[],x=t+e-1,M=n[t].x,v=n[x].x-M;for(r=t;r<t+e;++r){a=n[r],l=(a.x-M)/v*i,c=a.y;const w=l|0;if(w===h)c<m?(m=c,d=r):c>b&&(b=c,f=r),s=(o*s+a.x)/++o;else{const O=r-1;if(!ut(d)&&!ut(f)){const T=Math.min(d,f),D=Math.max(d,f);T!==p&&T!==O&&_.push({...n[T],x:s}),D!==p&&D!==O&&_.push({...n[D],x:s})}r>0&&O!==p&&_.push(n[O]),_.push(a),h=w,o=0,m=b=c,d=f=p=r}}return _}function yg(n){if(n._decimated){const t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Cu(n){n.data.datasets.forEach(t=>{yg(t)})}function gx(n,t){const e=t.length;let i=0,s;const{iScale:o}=n,{min:r,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(i=ne(dn(t,o.axis,r).lo,0,e-1)),c?s=ne(dn(t,o.axis,a).hi+1,i,e)-i:s=e-i,{start:i,count:s}}var px={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){Cu(n);return}const i=n.width;n.data.datasets.forEach((s,o)=>{const{_data:r,indexAxis:a}=s,l=n.getDatasetMeta(o),c=r||s.data;if(Is([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=n.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||n.options.parsing)return;let{start:d,count:f}=gx(l,c);const p=e.threshold||4*i;if(f<=p){yg(s);return}ut(r)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let m;switch(e.algorithm){case"lttb":m=dx(c,d,f,i,e);break;case"min-max":m=fx(c,d,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}s._decimated=m})},destroy(n){Cu(n)}};function mx(n,t,e){const i=n.segments,s=n.points,o=t.points,r=[];for(const a of i){let{start:l,end:c}=a;c=rc(l,c,s);const h=wl(e,s[l],s[c],a.loop);if(!t.segments){r.push({source:a,target:h,start:s[l],end:s[c]});continue}const d=Qf(t,h);for(const f of d){const p=wl(e,o[f.start],o[f.end],f.loop),m=Zf(a,s,p);for(const b of m)r.push({source:b,target:f,start:{[e]:Pu(h,p,"start",Math.max)},end:{[e]:Pu(h,p,"end",Math.min)}})}}return r}function wl(n,t,e,i){if(i)return;let s=t[n],o=e[n];return n==="angle"&&(s=we(s),o=we(o)),{property:n,start:s,end:o}}function bx(n,t){const{x:e=null,y:i=null}=n||{},s=t.points,o=[];return t.segments.forEach(({start:r,end:a})=>{a=rc(r,a,s);const l=s[r],c=s[a];i!==null?(o.push({x:l.x,y:i}),o.push({x:c.x,y:i})):e!==null&&(o.push({x:e,y:l.y}),o.push({x:e,y:c.y}))}),o}function rc(n,t,e){for(;t>n;t--){const i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function Pu(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function xg(n,t){let e=[],i=!1;return Tt(n)?(i=!0,e=n):e=bx(n,t),e.length?new la({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function Ou(n){return n&&n.fill!==!1}function _x(n,t,e){let s=n[t].fill;const o=[t];let r;if(!e)return s;for(;s!==!1&&o.indexOf(s)===-1;){if(!zt(s))return s;if(r=n[s],!r)return!1;if(r.visible)return s;o.push(s),s=r.fill}return!1}function yx(n,t,e){const i=Mx(n);if(lt(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return zt(s)&&Math.floor(s)===s?xx(i[0],t,s,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function xx(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function vx(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:lt(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function wx(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:lt(n)?i=n.value:i=t.getBaseValue(),i}function Mx(n){const t=n.options,e=t.fill;let i=it(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function Sx(n){const{scale:t,index:e,line:i}=n,s=[],o=i.segments,r=i.points,a=kx(t,e);a.push(xg({x:null,y:t.bottom},i));for(let l=0;l<o.length;l++){const c=o[l];for(let h=c.start;h<=c.end;h++)Cx(s,r[h],a)}return new la({points:s,options:{}})}function kx(n,t){const e=[],i=n.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const o=i[s];if(o.index===t)break;o.hidden||e.unshift(o.dataset)}return e}function Cx(n,t,e){const i=[];for(let s=0;s<e.length;s++){const o=e[s],{first:r,last:a,point:l}=Px(o,t,"x");if(!(!l||r&&a)){if(r)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function Px(n,t,e){const i=n.interpolate(t,e);if(!i)return{};const s=i[e],o=n.segments,r=n.points;let a=!1,l=!1;for(let c=0;c<o.length;c++){const h=o[c],d=r[h.start][e],f=r[h.end][e];if(un(s,d,f)){a=s===d,l=s===f;break}}return{first:a,last:l,point:i}}class vg{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:s,y:o,radius:r}=this;return e=e||{start:0,end:At},t.arc(s,o,r,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:s}=this,o=t.angle;return{x:e+Math.cos(o)*s,y:i+Math.sin(o)*s,angle:o}}}function Ox(n){const{chart:t,fill:e,line:i}=n;if(zt(e))return Ex(t,e);if(e==="stack")return Sx(n);if(e==="shape")return!0;const s=Tx(n);return s instanceof vg?s:xg(s,i)}function Ex(n,t){const e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function Tx(n){return(n.scale||{}).getPointPositionForValue?Dx(n):Ax(n)}function Ax(n){const{scale:t={},fill:e}=n,i=vx(e,t);if(zt(i)){const s=t.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function Dx(n){const{scale:t,fill:e}=n,i=t.options,s=t.getLabels().length,o=i.reverse?t.max:t.min,r=wx(e,t,o),a=[];if(i.grid.circular){const l=t.getPointPositionForValue(0,o);return new vg({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(r)})}for(let l=0;l<s;++l)a.push(t.getPointPositionForValue(l,r));return a}function Ka(n,t,e){const i=Ox(t),{line:s,scale:o,axis:r}=t,a=s.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:d=c}=l||{};i&&s.points.length&&(oa(n,e),Lx(n,{line:s,target:i,above:h,below:d,area:e,scale:o,axis:r}),ra(n))}function Lx(n,t){const{line:e,target:i,above:s,below:o,area:r,scale:a}=t,l=e._loop?"angle":t.axis;n.save(),l==="x"&&o!==s&&(Eu(n,i,r.top),Tu(n,{line:e,target:i,color:s,scale:a,property:l}),n.restore(),n.save(),Eu(n,i,r.bottom)),Tu(n,{line:e,target:i,color:o,scale:a,property:l}),n.restore()}function Eu(n,t,e){const{segments:i,points:s}=t;let o=!0,r=!1;n.beginPath();for(const a of i){const{start:l,end:c}=a,h=s[l],d=s[rc(l,c,s)];o?(n.moveTo(h.x,h.y),o=!1):(n.lineTo(h.x,e),n.lineTo(h.x,h.y)),r=!!t.pathSegment(n,a,{move:r}),r?n.closePath():n.lineTo(d.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function Tu(n,t){const{line:e,target:i,property:s,color:o,scale:r}=t,a=mx(e,i,s);for(const{source:l,target:c,start:h,end:d}of a){const{style:{backgroundColor:f=o}={}}=l,p=i!==!0;n.save(),n.fillStyle=f,Ix(n,r,p&&wl(s,h,d)),n.beginPath();const m=!!e.pathSegment(n,l);let b;if(p){m?n.closePath():Au(n,i,d,s);const _=!!i.pathSegment(n,c,{move:m,reverse:!0});b=m&&_,b||Au(n,i,h,s)}n.closePath(),n.fill(b?"evenodd":"nonzero"),n.restore()}}function Ix(n,t,e){const{top:i,bottom:s}=t.chart.chartArea,{property:o,start:r,end:a}=e||{};o==="x"&&(n.beginPath(),n.rect(r,i,a-r,s-i),n.clip())}function Au(n,t,e,i){const s=t.interpolate(e,i);s&&n.lineTo(s.x,s.y)}var Rx={id:"filler",afterDatasetsUpdate(n,t,e){const i=(n.data.datasets||[]).length,s=[];let o,r,a,l;for(r=0;r<i;++r)o=n.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof la&&(l={visible:n.isDatasetVisible(r),index:r,fill:yx(a,r,i),chart:n,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,s.push(l);for(r=0;r<i;++r)l=s[r],!(!l||l.fill===!1)&&(l.fill=_x(s,r,e.propagate))},beforeDraw(n,t,e){const i=e.drawTime==="beforeDraw",s=n.getSortedVisibleDatasetMetas(),o=n.chartArea;for(let r=s.length-1;r>=0;--r){const a=s[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),i&&a.fill&&Ka(n.ctx,a,o))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const i=n.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const o=i[s].$filler;Ou(o)&&Ka(n.ctx,o,n.chartArea)}},beforeDatasetDraw(n,t,e){const i=t.meta.$filler;!Ou(i)||e.drawTime!=="beforeDatasetDraw"||Ka(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Du=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},Fx=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class Lu extends pn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Mt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=Qt(i.font),o=s.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Du(i,o);let c,h;e.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(r,o,a,l)+10):(h=this.maxHeight,c=this._fitCols(r,s,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+a;let d=t;o.textAlign="left",o.textBaseline="middle";let f=-1,p=-h;return this.legendItems.forEach((m,b)=>{const _=i+e/2+o.measureText(m.text).width;(b===0||c[c.length-1]+_+2*a>r)&&(d+=h,c[c.length-(b>0?0:1)]=0,p+=h,f++),l[b]={left:0,top:p,row:f,width:_,height:s},c[c.length-1]+=_+a}),d}_fitCols(t,e,i,s){const{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=r-t;let d=a,f=0,p=0,m=0,b=0;return this.legendItems.forEach((_,x)=>{const{itemWidth:M,itemHeight:k}=Nx(i,e,o,_,s);x>0&&p+k+2*a>h&&(d+=f+a,c.push({width:f,height:p}),m+=f+a,b++,f=p=0),l[x]={left:m,top:p,col:b,width:M,height:k},f=Math.max(f,M),p+=k+a}),d+=f,c.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:o}}=this,r=zi(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=oe(i,this.left+s,this.right-this.lineWidths[a]);for(const c of e)a!==c.row&&(a=c.row,l=oe(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+t+s,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+s}else{let a=0,l=oe(i,this.top+t+s,this.bottom-this.columnSizes[a].height);for(const c of e)c.col!==a&&(a=c.col,l=oe(i,this.top+t+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;oa(t,this),this._draw(),ra(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:o,labels:r}=t,a=$t.color,l=zi(t.rtl,this.left,this.width),c=Qt(r.font),{padding:h}=r,d=c.size,f=d/2;let p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:m,boxHeight:b,itemHeight:_}=Du(r,d),x=function(O,T,D){if(isNaN(m)||m<=0||isNaN(b)||b<0)return;s.save();const R=it(D.lineWidth,1);if(s.fillStyle=it(D.fillStyle,a),s.lineCap=it(D.lineCap,"butt"),s.lineDashOffset=it(D.lineDashOffset,0),s.lineJoin=it(D.lineJoin,"miter"),s.lineWidth=R,s.strokeStyle=it(D.strokeStyle,a),s.setLineDash(it(D.lineDash,[])),r.usePointStyle){const W={radius:b*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:R},B=l.xPlus(O,m/2),Y=T+f;Vf(s,W,B,Y,r.pointStyleWidth&&m)}else{const W=T+Math.max((d-b)/2,0),B=l.leftForLtr(O,m),Y=fi(D.borderRadius);s.beginPath(),Object.values(Y).some(et=>et!==0)?to(s,{x:B,y:W,w:m,h:b,radius:Y}):s.rect(B,W,m,b),s.fill(),R!==0&&s.stroke()}s.restore()},M=function(O,T,D){bi(s,D.text,O,T+_/2,c,{strikethrough:D.hidden,textAlign:l.textAlign(D.textAlign)})},k=this.isHorizontal(),v=this._computeTitleHeight();k?p={x:oe(o,this.left+h,this.right-i[0]),y:this.top+h+v,line:0}:p={x:this.left+h,y:oe(o,this.top+v+h,this.bottom-e[0].height),line:0},qf(this.ctx,t.textDirection);const w=_+h;this.legendItems.forEach((O,T)=>{s.strokeStyle=O.fontColor,s.fillStyle=O.fontColor;const D=s.measureText(O.text).width,R=l.textAlign(O.textAlign||(O.textAlign=r.textAlign)),W=m+f+D;let B=p.x,Y=p.y;l.setWidth(this.width),k?T>0&&B+W+h>this.right&&(Y=p.y+=w,p.line++,B=p.x=oe(o,this.left+h,this.right-i[p.line])):T>0&&Y+w>this.bottom&&(B=p.x=B+e[p.line].width+h,p.line++,Y=p.y=oe(o,this.top+v+h,this.bottom-e[p.line].height));const et=l.x(B);if(x(et,Y,O),B=qb(R,B+m+f,k?B+W:this.right,t.rtl),M(l.x(B),Y,O),k)p.x+=W+h;else if(typeof O.text!="string"){const Q=c.lineHeight;p.y+=wg(O,Q)+h}else p.y+=w}),Kf(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Qt(e.font),s=le(e.padding);if(!e.display)return;const o=zi(t.rtl,this.left,this.width),r=this.ctx,a=e.position,l=i.size/2,c=s.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=oe(t.align,d,this.right-f);else{const m=this.columnSizes.reduce((b,_)=>Math.max(b,_.height),0);h=c+oe(t.align,this.top,this.bottom-m-t.labels.padding-this._computeTitleHeight())}const p=oe(a,d,d+f);r.textAlign=o.textAlign(Kl(a)),r.textBaseline="middle",r.strokeStyle=e.color,r.fillStyle=e.color,r.font=i.string,bi(r,e.text,p,h,i)}_computeTitleHeight(){const t=this.options.title,e=Qt(t.font),i=le(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,o;if(un(t,this.left,this.right)&&un(e,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(s=o[i],un(t,s.left,s.left+s.width)&&un(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!$x(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,o=Fx(s,i);s&&!o&&Mt(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!o&&Mt(e.onHover,[t,i,this],this)}else i&&Mt(e.onClick,[t,i,this],this)}}function Nx(n,t,e,i,s){const o=Bx(i,n,t,e),r=zx(s,i,t.lineHeight);return{itemWidth:o,itemHeight:r}}function Bx(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((o,r)=>o.length>r.length?o:r)),t+e.size/2+i.measureText(s).width}function zx(n,t,e){let i=n;return typeof t.text!="string"&&(i=wg(t,e)),i}function wg(n,t){const e=n.text?n.text.length:0;return t*e}function $x(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var Vx={id:"legend",_element:Lu,start(n,t,e){const i=n.legend=new Lu({ctx:n.ctx,options:e,chart:n});re.configure(n,i,e),re.addBox(n,i)},stop(n){re.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;re.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:o,useBorderRadius:r,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),h=le(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class ac extends pn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=Tt(i.text)?i.text.length:1;this._padding=le(i.padding);const o=s*Qt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:s,right:o,options:r}=this,a=r.align;let l=0,c,h,d;return this.isHorizontal()?(h=oe(a,i,o),d=e+t,c=o-i):(r.position==="left"?(h=i+t,d=oe(a,s,e),l=Dt*-.5):(h=o-t,d=oe(a,e,s),l=Dt*.5),c=s-e),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Qt(e.font),o=i.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);bi(t,e.text,0,0,i,{color:e.color,maxWidth:l,rotation:c,textAlign:Kl(e.align),textBaseline:"middle",translation:[r,a]})}}function jx(n,t){const e=new ac({ctx:n.ctx,options:t,chart:n});re.configure(n,e,t),re.addBox(n,e),n.titleBlock=e}var Wx={id:"title",_element:ac,start(n,t,e){jx(n,e)},stop(n){const t=n.titleBlock;re.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;re.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const nr=new WeakMap;var Hx={id:"subtitle",start(n,t,e){const i=new ac({ctx:n.ctx,options:e,chart:n});re.configure(n,i,e),re.addBox(n,i),nr.set(n,i)},stop(n){re.removeBox(n,nr.get(n)),nr.delete(n)},beforeUpdate(n,t,e){const i=nr.get(n);re.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ns={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,o=0;for(t=0,e=n.length;t<e;++t){const a=n[t].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++o}}return{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=n.length;o<r;++o){const l=n[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=pl(t,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function je(n,t){return t&&(Tt(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function sn(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Ux(n,t){const{element:e,datasetIndex:i,index:s}=t,o=n.getDatasetMeta(i).controller,{label:r,value:a}=o.getLabelAndValue(s);return{chart:n,label:r,parsed:o.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:o.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function Iu(n,t){const e=n.chart.ctx,{body:i,footer:s,title:o}=n,{boxWidth:r,boxHeight:a}=t,l=Qt(t.bodyFont),c=Qt(t.titleFont),h=Qt(t.footerFont),d=o.length,f=s.length,p=i.length,m=le(t.padding);let b=m.height,_=0,x=i.reduce((v,w)=>v+w.before.length+w.lines.length+w.after.length,0);if(x+=n.beforeBody.length+n.afterBody.length,d&&(b+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),x){const v=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=p*v+(x-p)*l.lineHeight+(x-1)*t.bodySpacing}f&&(b+=t.footerMarginTop+f*h.lineHeight+(f-1)*t.footerSpacing);let M=0;const k=function(v){_=Math.max(_,e.measureText(v).width+M)};return e.save(),e.font=c.string,mt(n.title,k),e.font=l.string,mt(n.beforeBody.concat(n.afterBody),k),M=t.displayColors?r+2+t.boxPadding:0,mt(i,v=>{mt(v.before,k),mt(v.lines,k),mt(v.after,k)}),M=0,e.font=h.string,mt(n.footer,k),e.restore(),_+=m.width,{width:_,height:b}}function Yx(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function Xx(n,t,e,i){const{x:s,width:o}=i,r=e.caretSize+e.caretPadding;if(n==="left"&&s+o+r>t.width||n==="right"&&s-o-r<0)return!0}function Gx(n,t,e,i){const{x:s,width:o}=e,{width:r,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=o/2?c="left":s>=r-o/2&&(c="right"),Xx(c,n,t,e)&&(c="center"),c}function Ru(n,t,e){const i=e.yAlign||t.yAlign||Yx(n,e);return{xAlign:e.xAlign||t.xAlign||Gx(n,t,e,i),yAlign:i}}function qx(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function Kx(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function Fu(n,t,e,i){const{caretSize:s,caretPadding:o,cornerRadius:r}=n,{xAlign:a,yAlign:l}=e,c=s+o,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=fi(r);let m=qx(t,a);const b=Kx(t,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(h,f)+s:a==="right"&&(m+=Math.max(d,p)+s),{x:ne(m,0,i.width-t.width),y:ne(b,0,i.height-t.height)}}function ir(n,t,e){const i=le(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function Nu(n){return je([],sn(n))}function Jx(n,t,e){return $n(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Bu(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const Mg={beforeTitle:en,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:en,beforeBody:en,beforeLabel:en,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return ut(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:en,afterBody:en,beforeFooter:en,footer:en,afterFooter:en};function fe(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?Mg[t].call(e,i):s}var ul;let zu=(ul=class extends pn{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,o=new tg(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=Jx(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=fe(i,"beforeTitle",this,t),o=fe(i,"title",this,t),r=fe(i,"afterTitle",this,t);let a=[];return a=je(a,sn(s)),a=je(a,sn(o)),a=je(a,sn(r)),a}getBeforeBody(t,e){return Nu(fe(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return mt(t,o=>{const r={before:[],lines:[],after:[]},a=Bu(i,o);je(r.before,sn(fe(a,"beforeLabel",this,o))),je(r.lines,fe(a,"label",this,o)),je(r.after,sn(fe(a,"afterLabel",this,o))),s.push(r)}),s}getAfterBody(t,e){return Nu(fe(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=fe(i,"beforeFooter",this,t),o=fe(i,"footer",this,t),r=fe(i,"afterFooter",this,t);let a=[];return a=je(a,sn(s)),a=je(a,sn(o)),a=je(a,sn(r)),a}_createItems(t){const e=this._active,i=this.chart.data,s=[],o=[],r=[];let a=[],l,c;for(l=0,c=e.length;l<c;++l)a.push(Ux(this.chart,e[l]));return t.filter&&(a=a.filter((h,d,f)=>t.filter(h,d,f,i))),t.itemSort&&(a=a.sort((h,d)=>t.itemSort(h,d,i))),mt(a,h=>{const d=Bu(t.callbacks,h);s.push(fe(d,"labelColor",this,h)),o.push(fe(d,"labelPointStyle",this,h)),r.push(fe(d,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let o,r=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const a=Ns[i.position].call(this,s,this._eventPosition);r=this._createItems(i),this.title=this.getTitle(r,i),this.beforeBody=this.getBeforeBody(r,i),this.body=this.getBody(r,i),this.afterBody=this.getAfterBody(r,i),this.footer=this.getFooter(r,i);const l=this._size=Iu(this,i),c=Object.assign({},a,l),h=Ru(this.chart,i,c),d=Fu(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const o=this.getCaretPosition(t,i,s);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:o}=this,{caretSize:r,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=fi(a),{x:f,y:p}=t,{width:m,height:b}=e;let _,x,M,k,v,w;return o==="center"?(v=p+b/2,s==="left"?(_=f,x=_-r,k=v+r,w=v-r):(_=f+m,x=_+r,k=v-r,w=v+r),M=_):(s==="left"?x=f+Math.max(l,h)+r:s==="right"?x=f+m-Math.max(c,d)-r:x=this.caretX,o==="top"?(k=p,v=k-r,_=x-r,M=x+r):(k=p+b,v=k+r,_=x+r,M=x-r),w=k),{x1:_,x2:x,x3:M,y1:k,y2:v,y3:w}}drawTitle(t,e,i){const s=this.title,o=s.length;let r,a,l;if(o){const c=zi(i.rtl,this.x,this.width);for(t.x=ir(this,i.titleAlign,i),e.textAlign=c.textAlign(i.titleAlign),e.textBaseline="middle",r=Qt(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=r.string,l=0;l<o;++l)e.fillText(s[l],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,l+1===o&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,s,o){const r=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=o,h=Qt(o.bodyFont),d=ir(this,"left",o),f=s.x(d),p=l<h.lineHeight?(h.lineHeight-l)/2:0,m=e.y+p;if(o.usePointStyle){const b={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=s.leftForLtr(f,c)+c/2,x=m+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,bl(t,b,_,x),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,bl(t,b,_,x)}else{t.lineWidth=lt(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const b=s.leftForLtr(f,c),_=s.leftForLtr(s.xPlus(f,1),c-2),x=fi(r.borderRadius);Object.values(x).some(M=>M!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,to(t,{x:b,y:m,w:c,h:l,radius:x}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),to(t,{x:_,y:m+1,w:c-2,h:l-2,radius:x}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(b,m,c,l),t.strokeRect(b,m,c,l),t.fillStyle=r.backgroundColor,t.fillRect(_,m+1,c-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,d=Qt(i.bodyFont);let f=d.lineHeight,p=0;const m=zi(i.rtl,this.x,this.width),b=function(D){e.fillText(D,m.x(t.x+p),t.y+f/2),t.y+=f+o},_=m.textAlign(r);let x,M,k,v,w,O,T;for(e.textAlign=r,e.textBaseline="middle",e.font=d.string,t.x=ir(this,_,i),e.fillStyle=i.bodyColor,mt(this.beforeBody,b),p=a&&_!=="right"?r==="center"?c/2+h:c+2+h:0,v=0,O=s.length;v<O;++v){for(x=s[v],M=this.labelTextColors[v],e.fillStyle=M,mt(x.before,b),k=x.lines,a&&k.length&&(this._drawColorBox(e,t,v,m,i),f=Math.max(d.lineHeight,l)),w=0,T=k.length;w<T;++w)b(k[w]),f=d.lineHeight;mt(x.after,b)}p=0,f=d.lineHeight,mt(this.afterBody,b),t.y-=o}drawFooter(t,e,i){const s=this.footer,o=s.length;let r,a;if(o){const l=zi(i.rtl,this.x,this.width);for(t.x=ir(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",r=Qt(i.footerFont),e.fillStyle=i.footerColor,e.font=r.string,a=0;a<o;++a)e.fillText(s[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=t,{width:c,height:h}=i,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:m}=fi(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(a+d,l),r==="top"&&this.drawCaret(t,e,i,s),e.lineTo(a+c-f,l),e.quadraticCurveTo(a+c,l,a+c,l+f),r==="center"&&o==="right"&&this.drawCaret(t,e,i,s),e.lineTo(a+c,l+h-m),e.quadraticCurveTo(a+c,l+h,a+c-m,l+h),r==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(a+p,l+h),e.quadraticCurveTo(a,l+h,a,l+h-p),r==="center"&&o==="left"&&this.drawCaret(t,e,i,s),e.lineTo(a,l+d),e.quadraticCurveTo(a,l,a+d,l),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){const r=Ns[t.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=Iu(this,t),l=Object.assign({},r,this._size),c=Ru(e,t,l),h=Fu(t,l,c,e);(s._to!==h.x||o._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const r=le(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,s,e),qf(t,e.textDirection),o.y+=r.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),Kf(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!Ir(i,s),r=this._positionChanged(s,e);(o||r)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],r=this._getActiveElements(t,o,e,i),a=this._positionChanged(r,t),l=e||!Ir(r,o)||a;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,i,s){const o=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const r=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&r.reverse(),r}_positionChanged(t,e){const{caretX:i,caretY:s,options:o}=this,r=Ns[o.position].call(this,t,e);return r!==!1&&(i!==r.x||s!==r.y)}},j(ul,"positioners",Ns),ul);var Zx={id:"tooltip",_element:zu,positioners:Ns,afterInit(n,t,e){e&&(n.tooltip=new zu({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Mg},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Qx=Object.freeze({__proto__:null,Colors:ux,Decimation:px,Filler:Rx,Legend:Vx,SubTitle:Hx,Title:Wx,Tooltip:Zx});const tv=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function ev(n,t,e,i){const s=n.indexOf(t);if(s===-1)return tv(n,t,e,i);const o=n.lastIndexOf(t);return s!==o?e:s}const nv=(n,t)=>n===null?null:ne(Math.round(n),0,t);function $u(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}var vr;let iv=(vr=class extends ho{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:o}of e)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ut(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:ev(i,t,it(e,t),this._addedLabels),nv(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let r=t;r<=e;r++)s.push({value:r});return s}getLabelForValue(t){return $u.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},j(vr,"id","category"),j(vr,"defaults",{ticks:{callback:$u}}),vr);function sv(n,t){const e=[],{bounds:s,step:o,min:r,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=n,p=o||1,m=h-1,{min:b,max:_}=t,x=!ut(r),M=!ut(a),k=!ut(c),v=(_-b)/(d+1);let w=Lh((_-b)/m/p)*p,O,T,D,R;if(w<1e-14&&!x&&!M)return[{value:b},{value:_}];R=Math.ceil(_/w)-Math.floor(b/w),R>m&&(w=Lh(R*w/m/p)*p),ut(l)||(O=Math.pow(10,l),w=Math.ceil(w*O)/O),s==="ticks"?(T=Math.floor(b/w)*w,D=Math.ceil(_/w)*w):(T=b,D=_),x&&M&&o&&jb((a-r)/o,w/1e3)?(R=Math.round(Math.min((a-r)/w,h)),w=(a-r)/R,T=r,D=a):k?(T=x?r:T,D=M?a:D,R=c-1,w=(D-T)/R):(R=(D-T)/w,Hs(R,Math.round(R),w/1e3)?R=Math.round(R):R=Math.ceil(R));const W=Math.max(Ih(w),Ih(T));O=Math.pow(10,ut(l)?W:l),T=Math.round(T*O)/O,D=Math.round(D*O)/O;let B=0;for(x&&(f&&T!==r?(e.push({value:r}),T<r&&B++,Hs(Math.round((T+B*w)*O)/O,r,Vu(r,v,n))&&B++):T<r&&B++);B<R;++B){const Y=Math.round((T+B*w)*O)/O;if(M&&Y>a)break;e.push({value:Y})}return M&&f&&D!==a?e.length&&Hs(e[e.length-1].value,a,Vu(a,v,n))?e[e.length-1].value=a:e.push({value:a}):(!M||D===a)&&e.push({value:D}),e}function Vu(n,t,{horizontal:e,minRotation:i}){const s=Fe(i),o=(e?Math.sin(s):Math.cos(s))||.001,r=.75*t*(""+n).length;return Math.min(t/o,r)}let Vr=class extends ho{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ut(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:o}=this;const r=l=>s=e?s:l,a=l=>o=i?o:l;if(t){const l=Ge(s),c=Ge(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(s===o){let l=o===0?1:Math.abs(o*.05);a(o+l),t||r(s-l)}this.min=s,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,r=sv(s,o);return t.bounds==="ticks"&&Df(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return lo(t,this.chart.options.locale,this.options.ticks.format)}};var wr;let ov=(wr=class extends Vr{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=zt(t)?t:0,this.max=zt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Fe(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},j(wr,"id","linear"),j(wr,"defaults",{ticks:{callback:sa.formatters.numeric}}),wr);const no=n=>Math.floor(En(n)),ei=(n,t)=>Math.pow(10,no(n)+t);function ju(n){return n/Math.pow(10,no(n))===1}function Wu(n,t,e){const i=Math.pow(10,e),s=Math.floor(n/i);return Math.ceil(t/i)-s}function rv(n,t){const e=t-n;let i=no(e);for(;Wu(n,t,i)>10;)i++;for(;Wu(n,t,i)<10;)i--;return Math.min(i,no(n))}function av(n,{min:t,max:e}){t=ve(n.min,t);const i=[],s=no(t);let o=rv(t,e),r=o<0?Math.pow(10,Math.abs(o)):1;const a=Math.pow(10,o),l=s>o?Math.pow(10,s):0,c=Math.round((t-l)*r)/r,h=Math.floor((t-l)/a/10)*a*10;let d=Math.floor((c-h)/Math.pow(10,o)),f=ve(n.min,Math.round((l+h+d*Math.pow(10,o))*r)/r);for(;f<e;)i.push({value:f,major:ju(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,r=o>=0?1:r),f=Math.round((l+h+d*Math.pow(10,o))*r)/r;const p=ve(n.max,f);return i.push({value:p,major:ju(p),significand:d}),i}var Mr;let lv=(Mr=class extends ho{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Vr.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return zt(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=zt(t)?Math.max(0,t):null,this.max=zt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!zt(this._userMin)&&(this.min=t===ei(this.min,0)?ei(this.min,-1):ei(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,s=this.max;const o=a=>i=t?i:a,r=a=>s=e?s:a;i===s&&(i<=0?(o(1),r(10)):(o(ei(i,-1)),r(ei(s,1)))),i<=0&&o(ei(s,-1)),s<=0&&r(ei(i,1)),this.min=i,this.max=s}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=av(e,this);return t.bounds==="ticks"&&Df(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":lo(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=En(t),this._valueRange=En(this.max)-En(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(En(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}},j(Mr,"id","logarithmic"),j(Mr,"defaults",{ticks:{callback:sa.formatters.logarithmic,major:{enabled:!0}}}),Mr);function Ml(n){const t=n.ticks;if(t.display&&n.display){const e=le(t.backdropPadding);return it(t.font&&t.font.size,$t.font.size)+e.height}return 0}function cv(n,t,e){return e=Tt(e)?e:[e],{w:o_(n,t.string,e),h:e.length*t.lineHeight}}function Hu(n,t,e,i,s){return n===i||n===s?{start:t-e/2,end:t+e/2}:n<i||n>s?{start:t-e,end:t}:{start:t,end:t+e}}function hv(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],s=[],o=n._pointLabels.length,r=n.options.pointLabels,a=r.centerPointLabels?Dt/o:0;for(let l=0;l<o;l++){const c=r.setContext(n.getPointLabelContext(l));s[l]=c.padding;const h=n.getPointPosition(l,n.drawingArea+s[l],a),d=Qt(c.font),f=cv(n.ctx,d,n._pointLabels[l]);i[l]=f;const p=we(n.getIndexAngle(l)+a),m=Math.round(Gl(p)),b=Hu(m,h.x,f.w,0,180),_=Hu(m,h.y,f.h,90,270);uv(e,t,p,b,_)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=gv(n,i,s)}function uv(n,t,e,i,s){const o=Math.abs(Math.sin(e)),r=Math.abs(Math.cos(e));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/o,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/o,n.r=Math.max(n.r,t.r+a)),s.start<t.t?(l=(t.t-s.start)/r,n.t=Math.min(n.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/r,n.b=Math.max(n.b,t.b+l))}function dv(n,t,e){const i=n.drawingArea,{extra:s,additionalAngle:o,padding:r,size:a}=e,l=n.getPointPosition(t,i+s+r,o),c=Math.round(Gl(we(l.angle+Wt))),h=bv(l.y,a.h,c),d=pv(c),f=mv(l.x,a.w,d);return{visible:!0,x:l.x,y:h,textAlign:d,left:f,top:h,right:f+a.w,bottom:h+a.h}}function fv(n,t){if(!t)return!0;const{left:e,top:i,right:s,bottom:o}=n;return!(fn({x:e,y:i},t)||fn({x:e,y:o},t)||fn({x:s,y:i},t)||fn({x:s,y:o},t))}function gv(n,t,e){const i=[],s=n._pointLabels.length,o=n.options,{centerPointLabels:r,display:a}=o.pointLabels,l={extra:Ml(o)/2,additionalAngle:r?Dt/s:0};let c;for(let h=0;h<s;h++){l.padding=e[h],l.size=t[h];const d=dv(n,h,l);i.push(d),a==="auto"&&(d.visible=fv(d,c),d.visible&&(c=d))}return i}function pv(n){return n===0||n===180?"center":n<180?"left":"right"}function mv(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function bv(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function _v(n,t,e){const{left:i,top:s,right:o,bottom:r}=e,{backdropColor:a}=t;if(!ut(a)){const l=fi(t.borderRadius),c=le(t.backdropPadding);n.fillStyle=a;const h=i-c.left,d=s-c.top,f=o-i+c.width,p=r-s+c.height;Object.values(l).some(m=>m!==0)?(n.beginPath(),to(n,{x:h,y:d,w:f,h:p,radius:l}),n.fill()):n.fillRect(h,d,f,p)}}function yv(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let s=t-1;s>=0;s--){const o=n._pointLabelItems[s];if(!o.visible)continue;const r=i.setContext(n.getPointLabelContext(s));_v(e,r,o);const a=Qt(r.font),{x:l,y:c,textAlign:h}=o;bi(e,n._pointLabels[s],l,c+a.lineHeight/2,a,{color:r.color,textAlign:h,textBaseline:"middle"})}}function Sg(n,t,e,i){const{ctx:s}=n;if(e)s.arc(n.xCenter,n.yCenter,t,0,At);else{let o=n.getPointPosition(0,t);s.moveTo(o.x,o.y);for(let r=1;r<i;r++)o=n.getPointPosition(r,t),s.lineTo(o.x,o.y)}}function xv(n,t,e,i,s){const o=n.ctx,r=t.circular,{color:a,lineWidth:l}=t;!r&&!i||!a||!l||e<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(s.dash),o.lineDashOffset=s.dashOffset,o.beginPath(),Sg(n,e,r,i),o.closePath(),o.stroke(),o.restore())}function vv(n,t,e){return $n(n,{label:e,index:t,type:"pointLabel"})}var Ni;let wv=(Ni=class extends Vr{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=le(Ml(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=zt(t)&&!isNaN(t)?t:0,this.max=zt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ml(this.options))}generateTickLabels(t){Vr.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const s=Mt(this.options.pointLabels.callback,[e,i],this);return s||s===0?s:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?hv(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,s){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,s))}getIndexAngle(t){const e=At/(this._pointLabels.length||1),i=this.options.startAngle||0;return we(t*e+Fe(i))}getDistanceFromCenterForValue(t){if(ut(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(ut(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return vv(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const s=this.getIndexAngle(t)-Wt+i;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:s,bottom:o}=this._pointLabelItems[t];return{left:e,top:i,right:s,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),Sg(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:s,border:o}=e,r=this._pointLabels.length;let a,l,c;if(e.pointLabels.display&&yv(this,r),s.display&&this.ticks.forEach((h,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const f=this.getContext(d),p=s.setContext(f),m=o.setContext(f);xv(this,p,l,r,m)}}),i.display){for(t.save(),a=r-1;a>=0;a--){const h=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=h;!f||!d||(t.lineWidth=f,t.strokeStyle=d,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let o,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const c=i.setContext(this.getContext(l)),h=Qt(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=h.string,r=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const d=le(c.backdropPadding);t.fillRect(-r/2-d.left,-o-h.size/2-d.top,r+d.width,h.size+d.height)}bi(t,a.label,0,-o,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}},j(Ni,"id","radialLinear"),j(Ni,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:sa.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),j(Ni,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),j(Ni,"descriptors",{angleLines:{_fallback:"grid"}}),Ni);const ca={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},me=Object.keys(ca);function Uu(n,t){return n-t}function Yu(n,t){if(ut(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:o}=n._parseOpts;let r=t;return typeof i=="function"&&(r=i(r)),zt(r)||(r=typeof i=="string"?e.parse(r,i):e.parse(r)),r===null?null:(s&&(r=s==="week"&&(ji(o)||o===!0)?e.startOf(r,"isoWeek",o):e.startOf(r,s)),+r)}function Xu(n,t,e,i){const s=me.length;for(let o=me.indexOf(n);o<s-1;++o){const r=ca[me[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((e-t)/(a*r.size))<=i)return me[o]}return me[s-1]}function Mv(n,t,e,i,s){for(let o=me.length-1;o>=me.indexOf(e);o--){const r=me[o];if(ca[r].common&&n._adapter.diff(s,i,r)>=t-1)return r}return me[e?me.indexOf(e):0]}function Sv(n){for(let t=me.indexOf(n)+1,e=me.length;t<e;++t)if(ca[me[t]].common)return me[t]}function Gu(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=ql(e,t),o=e[i]>=t?e[i]:e[s];n[o]=!0}}function kv(n,t,e,i){const s=n._adapter,o=+s.startOf(t[0].value,i),r=t[t.length-1].value;let a,l;for(a=o;a<=r;a=+s.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}function qu(n,t,e){const i=[],s={},o=t.length;let r,a;for(r=0;r<o;++r)a=t[r],s[a]=r,i.push({value:a,major:!1});return o===0||!e?i:kv(n,i,s,e)}var Sr;let Sl=(Sr=class extends ho{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new Py._date(t.adapters.date);s.init(e),Ws(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Yu(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=zt(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),o=zt(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,r=this.max,a=Yb(s,o,r);return this._unit=e.unit||(i.autoSkip?Xu(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):Mv(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Sv(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),qu(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;e=ne(e,0,r),i=ne(i,0,r),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,o=s.time,r=o.unit||Xu(o.minUnit,e,i,this._getLabelCapacity(e)),a=it(s.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=ji(l)||l===!0,h={};let d=e,f,p;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":r),t.diff(i,e,r)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+r);const m=s.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<i;f=+t.add(f,a,r),p++)Gu(h,f,m);return(f===i||s.bounds==="ticks"||p===1)&&Gu(h,f,m),Object.keys(h).sort(Uu).map(b=>+b)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,o=this._unit,r=e||s[o];return this._adapter.format(t,r)}_tickFormatFunction(t,e,i,s){const o=this.options,r=o.ticks.callback;if(r)return Mt(r,[t,e,i],this);const a=o.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],f=i[e],p=c&&d&&f&&f.major;return this._adapter.format(t,s||(p?d:h))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=Fe(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(s),r=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*o+a*r,h:i*r+a*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,qu(this,[t],this._majorUnit),s),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(Yu(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Rf(t.sort(Uu))}},j(Sr,"id","time"),j(Sr,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}}),Sr);function sr(n,t,e){let i=0,s=n.length-1,o,r,a,l;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=dn(n,"pos",t)),{pos:o,time:a}=n[i],{pos:r,time:l}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=dn(n,"time",t)),{time:o,pos:a}=n[i],{time:r,pos:l}=n[s]);const c=r-o;return c?a+(l-a)*(t-o)/c:a}var kr;let Cv=(kr=class extends Sl{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=sr(e,this.min),this._tableRange=sr(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],o=[];let r,a,l,c,h;for(r=0,a=t.length;r<a;++r)c=t[r],c>=e&&c<=i&&s.push(c);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(r=0,a=s.length;r<a;++r)h=s[r+1],l=s[r-1],c=s[r],Math.round((h+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,o)=>s-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(sr(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return sr(this._table,i*this._tableRange+this._minPos,!0)}},j(kr,"id","timeseries"),j(kr,"defaults",Sl.defaults),kr);var Pv=Object.freeze({__proto__:null,CategoryScale:iv,LinearScale:ov,LogarithmicScale:lv,RadialLinearScale:wv,TimeScale:Sl,TimeSeriesScale:Cv});const Ov=[Cy,ox,Qx,Pv];/*!
 * Chart.js v3.9.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */const Ev=function(){let n=0;return function(){return n++}}();function _t(n){return n===null||typeof n>"u"}function It(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function dt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}const se=n=>(typeof n=="number"||n instanceof Number)&&isFinite(+n);function Oe(n,t){return se(n)?n:t}function ht(n,t){return typeof n>"u"?t:n}const Tv=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:n/t,kg=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Bt(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function bt(n,t,e,i){let s,o,r;if(It(n))if(o=n.length,i)for(s=o-1;s>=0;s--)t.call(e,n[s],s);else for(s=0;s<o;s++)t.call(e,n[s],s);else if(dt(n))for(r=Object.keys(n),o=r.length,s=0;s<o;s++)t.call(e,n[r[s]],r[s])}function jr(n,t){let e,i,s,o;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],o=t[e],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Wr(n){if(It(n))return n.map(Wr);if(dt(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=Wr(n[e[s]]);return t}return n}function Cg(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Av(n,t,e,i){if(!Cg(n))return;const s=t[n],o=e[n];dt(s)&&dt(o)?io(s,o,i):t[n]=Wr(o)}function io(n,t,e){const i=It(t)?t:[t],s=i.length;if(!dt(n))return n;e=e||{};const o=e.merger||Av;for(let r=0;r<s;++r){if(t=i[r],!dt(t))continue;const a=Object.keys(t);for(let l=0,c=a.length;l<c;++l)o(a[l],n,t,e)}return n}function Xs(n,t){return io(n,t,{merger:Dv})}function Dv(n,t,e){if(!Cg(n))return;const i=t[n],s=e[n];dt(i)&&dt(s)?Xs(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Wr(s))}const Ku={"":n=>n,x:n=>n.x,y:n=>n.y};function Bn(n,t){return(Ku[t]||(Ku[t]=Lv(t)))(n)}function Lv(n){const t=Iv(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Iv(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function lc(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Ae=n=>typeof n<"u",zn=n=>typeof n=="function",Ju=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function Rv(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const jt=Math.PI,wt=2*jt,Fv=wt+jt,Hr=Number.POSITIVE_INFINITY,Nv=jt/180,Vt=jt/2,ds=jt/4,Zu=jt*2/3,Te=Math.log10,qe=Math.sign;function Qu(n){const t=Math.round(n);n=Gs(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Te(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function Bv(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,o)=>s-o).pop(),t}function Ui(n){return!isNaN(parseFloat(n))&&isFinite(n)}function Gs(n,t,e){return Math.abs(n-t)<e}function zv(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function Pg(n,t,e){let i,s,o;for(i=0,s=n.length;i<s;i++)o=n[i][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function Ne(n){return n*(jt/180)}function cc(n){return n*(180/jt)}function td(n){if(!se(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function Og(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let o=Math.atan2(i,e);return o<-.5*jt&&(o+=wt),{angle:o,distance:s}}function kl(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function $v(n,t){return(n-t+Fv)%wt-jt}function Re(n){return(n%wt+wt)%wt}function so(n,t,e,i){const s=Re(n),o=Re(t),r=Re(e),a=Re(o-s),l=Re(r-s),c=Re(s-o),h=Re(s-r);return s===o||s===r||i&&o===r||a>l&&c<h}function ae(n,t,e){return Math.max(t,Math.min(e,n))}function Vv(n){return ae(n,-32768,32767)}function Ur(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function hc(n,t,e){e=e||(r=>n[r]<t);let i=n.length-1,s=0,o;for(;i-s>1;)o=s+i>>1,e(o)?s=o:i=o;return{lo:s,hi:i}}const ui=(n,t,e,i)=>hc(n,e,i?s=>n[s][t]<=e:s=>n[s][t]<e),jv=(n,t,e)=>hc(n,e,i=>n[i][t]>=e);function Wv(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const Eg=["push","pop","shift","splice","unshift"];function Hv(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Eg.forEach(e=>{const i="_onData"+lc(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...o){const r=s.apply(this,o);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...o)}),r}})})}function ed(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(Eg.forEach(o=>{delete n[o]}),delete n._chartjs)}function Tg(n){const t=new Set;let e,i;for(e=0,i=n.length;e<i;++e)t.add(n[e]);return t.size===i?n:Array.from(t)}const Ag=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Dg(n,t,e){const i=e||(r=>Array.prototype.slice.call(r));let s=!1,o=[];return function(...r){o=i(r),s||(s=!0,Ag.call(window,()=>{s=!1,n.apply(t,o)}))}}function Uv(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const Yv=n=>n==="start"?"left":n==="end"?"right":"center",nd=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2;function Lg(n,t,e){const i=t.length;let s=0,o=i;if(n._sorted){const{iScale:r,_parsed:a}=n,l=r.axis,{min:c,max:h,minDefined:d,maxDefined:f}=r.getUserBounds();d&&(s=ae(Math.min(ui(a,r.axis,c).lo,e?i:ui(t,l,r.getPixelForValue(c)).lo),0,i-1)),f?o=ae(Math.max(ui(a,r.axis,h,!0).hi+1,e?0:ui(t,l,r.getPixelForValue(h),!0).hi+1),s,i)-s:o=i-s}return{start:s,count:o}}function Ig(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=s,!0;const o=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,s),o}const or=n=>n===0||n===1,id=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*wt/e)),sd=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*wt/e)+1,qs={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Vt)+1,easeOutSine:n=>Math.sin(n*Vt),easeInOutSine:n=>-.5*(Math.cos(jt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>or(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>or(n)?n:id(n,.075,.3),easeOutElastic:n=>or(n)?n:sd(n,.075,.3),easeInOutElastic(n){return or(n)?n:n<.5?.5*id(n*2,.1125,.45):.5+.5*sd(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-qs.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?qs.easeInBounce(n*2)*.5:qs.easeOutBounce(n*2-1)*.5+.5};/*!
 * @kurkle/color v0.2.1
 * https://github.com/kurkle/color#readme
 * (c) 2022 Jukka Kurkela
 * Released under the MIT License
 */function uo(n){return n+.5|0}const An=(n,t,e)=>Math.max(Math.min(n,e),t);function Bs(n){return An(uo(n*2.55),0,255)}function In(n){return An(uo(n*255),0,255)}function ln(n){return An(uo(n/2.55)/100,0,1)}function od(n){return An(uo(n*100),0,100)}const Pe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Cl=[..."0123456789ABCDEF"],Xv=n=>Cl[n&15],Gv=n=>Cl[(n&240)>>4]+Cl[n&15],rr=n=>(n&240)>>4===(n&15),qv=n=>rr(n.r)&&rr(n.g)&&rr(n.b)&&rr(n.a);function Kv(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Pe[n[1]]*17,g:255&Pe[n[2]]*17,b:255&Pe[n[3]]*17,a:t===5?Pe[n[4]]*17:255}:(t===7||t===9)&&(e={r:Pe[n[1]]<<4|Pe[n[2]],g:Pe[n[3]]<<4|Pe[n[4]],b:Pe[n[5]]<<4|Pe[n[6]],a:t===9?Pe[n[7]]<<4|Pe[n[8]]:255})),e}const Jv=(n,t)=>n<255?t(n):"";function Zv(n){var t=qv(n)?Xv:Gv;return n?"#"+t(n.r)+t(n.g)+t(n.b)+Jv(n.a,t):void 0}const Qv=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Rg(n,t,e){const i=t*Math.min(e,1-e),s=(o,r=(o+n/30)%12)=>e-i*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function t1(n,t,e){const i=(s,o=(s+n/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function e1(n,t,e){const i=Rg(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function n1(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function uc(n){const e=n.r/255,i=n.g/255,s=n.b/255,o=Math.max(e,i,s),r=Math.min(e,i,s),a=(o+r)/2;let l,c,h;return o!==r&&(h=o-r,c=a>.5?h/(2-o-r):h/(o+r),l=n1(e,i,s,h,o),l=l*60+.5),[l|0,c||0,a]}function dc(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(In)}function fc(n,t,e){return dc(Rg,n,t,e)}function i1(n,t,e){return dc(e1,n,t,e)}function s1(n,t,e){return dc(t1,n,t,e)}function Fg(n){return(n%360+360)%360}function o1(n){const t=Qv.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Bs(+t[5]):In(+t[5]));const s=Fg(+t[2]),o=+t[3]/100,r=+t[4]/100;return t[1]==="hwb"?i=i1(s,o,r):t[1]==="hsv"?i=s1(s,o,r):i=fc(s,o,r),{r:i[0],g:i[1],b:i[2],a:e}}function r1(n,t){var e=uc(n);e[0]=Fg(e[0]+t),e=fc(e),n.r=e[0],n.g=e[1],n.b=e[2]}function a1(n){if(!n)return;const t=uc(n),e=t[0],i=od(t[1]),s=od(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${ln(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const rd={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ad={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function l1(){const n={},t=Object.keys(ad),e=Object.keys(rd);let i,s,o,r,a;for(i=0;i<t.length;i++){for(r=a=t[i],s=0;s<e.length;s++)o=e[s],a=a.replace(o,rd[o]);o=parseInt(ad[r],16),n[a]=[o>>16&255,o>>8&255,o&255]}return n}let ar;function c1(n){ar||(ar=l1(),ar.transparent=[0,0,0,0]);const t=ar[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const h1=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function u1(n){const t=h1.exec(n);let e=255,i,s,o;if(t){if(t[7]!==i){const r=+t[7];e=t[8]?Bs(r):An(r*255,0,255)}return i=+t[1],s=+t[3],o=+t[5],i=255&(t[2]?Bs(i):An(i,0,255)),s=255&(t[4]?Bs(s):An(s,0,255)),o=255&(t[6]?Bs(o):An(o,0,255)),{r:i,g:s,b:o,a:e}}}function d1(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ln(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Ja=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Ti=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function f1(n,t,e){const i=Ti(ln(n.r)),s=Ti(ln(n.g)),o=Ti(ln(n.b));return{r:In(Ja(i+e*(Ti(ln(t.r))-i))),g:In(Ja(s+e*(Ti(ln(t.g))-s))),b:In(Ja(o+e*(Ti(ln(t.b))-o))),a:n.a+e*(t.a-n.a)}}function lr(n,t,e){if(n){let i=uc(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=fc(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Ng(n,t){return n&&Object.assign(t||{},n)}function ld(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=In(n[3]))):(t=Ng(n,{r:0,g:0,b:0,a:1}),t.a=In(t.a)),t}function g1(n){return n.charAt(0)==="r"?u1(n):o1(n)}class Yr{constructor(t){if(t instanceof Yr)return t;const e=typeof t;let i;e==="object"?i=ld(t):e==="string"&&(i=Kv(t)||c1(t)||g1(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Ng(this._rgb);return t&&(t.a=ln(t.a)),t}set rgb(t){this._rgb=ld(t)}rgbString(){return this._valid?d1(this._rgb):void 0}hexString(){return this._valid?Zv(this._rgb):void 0}hslString(){return this._valid?a1(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let o;const r=e===o?.5:e,a=2*r-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,i.r=255&c*i.r+o*s.r+.5,i.g=255&c*i.g+o*s.g+.5,i.b=255&c*i.b+o*s.b+.5,i.a=r*i.a+(1-r)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=f1(this._rgb,t._rgb,e)),this}clone(){return new Yr(this.rgb)}alpha(t){return this._rgb.a=In(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=uo(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return lr(this._rgb,2,t),this}darken(t){return lr(this._rgb,2,-t),this}saturate(t){return lr(this._rgb,1,t),this}desaturate(t){return lr(this._rgb,1,-t),this}rotate(t){return r1(this._rgb,t),this}}function Bg(n){return new Yr(n)}function zg(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function cd(n){return zg(n)?n:Bg(n)}function Za(n){return zg(n)?n:Bg(n).saturate(.5).darken(.1).hexString()}const _i=Object.create(null),Pl=Object.create(null);function Ks(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const o=e[i];n=n[o]||(n[o]=Object.create(null))}return n}function Qa(n,t,e){return typeof t=="string"?io(Ks(n,t),e):io(Ks(n,""),t)}class p1{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,i)=>Za(i.backgroundColor),this.hoverBorderColor=(e,i)=>Za(i.borderColor),this.hoverColor=(e,i)=>Za(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return Qa(this,t,e)}get(t){return Ks(this,t)}describe(t,e){return Qa(Pl,t,e)}override(t,e){return Qa(_i,t,e)}route(t,e,i,s){const o=Ks(this,t),r=Ks(this,i),a="_"+e;Object.defineProperties(o,{[a]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[a],c=r[s];return dt(l)?Object.assign({},c,l):ht(l,c)},set(l){this[a]=l}}})}}var ct=new p1({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function m1(n){return!n||_t(n.size)||_t(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Xr(n,t,e,i,s){let o=t[s];return o||(o=t[s]=n.measureText(s).width,e.push(s)),o>i&&(i=o),i}function b1(n,t,e,i){i=i||{};let s=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(s=i.data={},o=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let r=0;const a=e.length;let l,c,h,d,f;for(l=0;l<a;l++)if(d=e[l],d!=null&&It(d)!==!0)r=Xr(n,s,o,r,d);else if(It(d))for(c=0,h=d.length;c<h;c++)f=d[c],f!=null&&!It(f)&&(r=Xr(n,s,o,r,f));n.restore();const p=o.length/2;if(p>e.length){for(l=0;l<p;l++)delete s[o[l]];o.splice(0,p)}return r}function ni(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function hd(n,t){t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore()}function Ol(n,t,e,i){_1(n,t,e,i,null)}function _1(n,t,e,i,s){let o,r,a,l,c,h;const d=t.pointStyle,f=t.rotation,p=t.radius;let m=(f||0)*Nv;if(d&&typeof d=="object"&&(o=d.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(m),n.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),n.restore();return}if(!(isNaN(p)||p<=0)){switch(n.beginPath(),d){default:s?n.ellipse(e,i,s/2,p,0,0,wt):n.arc(e,i,p,0,wt),n.closePath();break;case"triangle":n.moveTo(e+Math.sin(m)*p,i-Math.cos(m)*p),m+=Zu,n.lineTo(e+Math.sin(m)*p,i-Math.cos(m)*p),m+=Zu,n.lineTo(e+Math.sin(m)*p,i-Math.cos(m)*p),n.closePath();break;case"rectRounded":c=p*.516,l=p-c,r=Math.cos(m+ds)*l,a=Math.sin(m+ds)*l,n.arc(e-r,i-a,c,m-jt,m-Vt),n.arc(e+a,i-r,c,m-Vt,m),n.arc(e+r,i+a,c,m,m+Vt),n.arc(e-a,i+r,c,m+Vt,m+jt),n.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*p,h=s?s/2:l,n.rect(e-h,i-l,2*h,2*l);break}m+=ds;case"rectRot":r=Math.cos(m)*p,a=Math.sin(m)*p,n.moveTo(e-r,i-a),n.lineTo(e+a,i-r),n.lineTo(e+r,i+a),n.lineTo(e-a,i+r),n.closePath();break;case"crossRot":m+=ds;case"cross":r=Math.cos(m)*p,a=Math.sin(m)*p,n.moveTo(e-r,i-a),n.lineTo(e+r,i+a),n.moveTo(e+a,i-r),n.lineTo(e-a,i+r);break;case"star":r=Math.cos(m)*p,a=Math.sin(m)*p,n.moveTo(e-r,i-a),n.lineTo(e+r,i+a),n.moveTo(e+a,i-r),n.lineTo(e-a,i+r),m+=ds,r=Math.cos(m)*p,a=Math.sin(m)*p,n.moveTo(e-r,i-a),n.lineTo(e+r,i+a),n.moveTo(e+a,i-r),n.lineTo(e-a,i+r);break;case"line":r=s?s/2:Math.cos(m)*p,a=Math.sin(m)*p,n.moveTo(e-r,i-a),n.lineTo(e+r,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(m)*p,i+Math.sin(m)*p);break}n.fill(),t.borderWidth>0&&n.stroke()}}function oo(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function $g(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Vg(n){n.restore()}function y1(n,t,e,i,s){if(!t)return n.lineTo(e.x,e.y);if(s==="middle"){const o=(t.x+e.x)/2;n.lineTo(o,t.y),n.lineTo(o,e.y)}else s==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function x1(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function Gr(n,t,e,i,s,o={}){const r=It(t)?t:[t],a=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(n.save(),n.font=s.string,v1(n,o),l=0;l<r.length;++l)c=r[l],a&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),_t(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(c,e,i,o.maxWidth)),n.fillText(c,e,i,o.maxWidth),w1(n,e,i,c,o),i+=s.lineHeight;n.restore()}function v1(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),_t(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function w1(n,t,e,i,s){if(s.strikethrough||s.underline){const o=n.measureText(i),r=t-o.actualBoundingBoxLeft,a=t+o.actualBoundingBoxRight,l=e-o.actualBoundingBoxAscent,c=e+o.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(r,h),n.lineTo(a,h),n.stroke()}}function qr(n,t){const{x:e,y:i,w:s,h:o,radius:r}=t;n.arc(e+r.topLeft,i+r.topLeft,r.topLeft,-Vt,jt,!0),n.lineTo(e,i+o-r.bottomLeft),n.arc(e+r.bottomLeft,i+o-r.bottomLeft,r.bottomLeft,jt,Vt,!0),n.lineTo(e+s-r.bottomRight,i+o),n.arc(e+s-r.bottomRight,i+o-r.bottomRight,r.bottomRight,Vt,0,!0),n.lineTo(e+s,i+r.topRight),n.arc(e+s-r.topRight,i+r.topRight,r.topRight,0,-Vt,!0),n.lineTo(e+r.topLeft,i)}const M1=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),S1=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function k1(n,t){const e=(""+n).match(M1);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const C1=n=>+n||0;function gc(n,t){const e={},i=dt(t),s=i?Object.keys(t):t,o=dt(n)?i?r=>ht(n[r],n[t[r]]):r=>n[r]:()=>n;for(const r of s)e[r]=C1(o(r));return e}function jg(n){return gc(n,{top:"y",right:"x",bottom:"y",left:"x"})}function $i(n){return gc(n,["topLeft","topRight","bottomLeft","bottomRight"])}function De(n){const t=jg(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Me(n,t){n=n||{},t=t||ct.font;let e=ht(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=ht(n.style,t.style);i&&!(""+i).match(S1)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");const s={family:ht(n.family,t.family),lineHeight:k1(ht(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:ht(n.weight,t.weight),string:""};return s.string=m1(s),s}function cr(n,t,e,i){let s=!0,o,r,a;for(o=0,r=n.length;o<r;++o)if(a=n[o],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),s=!1),e!==void 0&&It(a)&&(a=a[e%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function P1(n,t,e){const{min:i,max:s}=n,o=kg(t,(s-i)/2),r=(a,l)=>e&&a===0?0:a+l;return{min:r(i,-Math.abs(o)),max:r(s,o)}}function jn(n,t){return Object.assign(Object.create(n),t)}function pc(n,t=[""],e=n,i,s=()=>n[0]){Ae(i)||(i=Yg("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:e,_fallback:i,_getTarget:s,override:r=>pc([r,...n],t,e,i)};return new Proxy(o,{deleteProperty(r,a){return delete r[a],delete r._keys,delete n[0][a],!0},get(r,a){return Hg(r,a,()=>R1(a,t,n,r))},getOwnPropertyDescriptor(r,a){return Reflect.getOwnPropertyDescriptor(r._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(r,a){return dd(r).includes(a)},ownKeys(r){return dd(r)},set(r,a,l){const c=r._storage||(r._storage=s());return r[a]=c[a]=l,delete r._keys,!0}})}function Yi(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Wg(n,i),setContext:o=>Yi(n,o,e,i),override:o=>Yi(n.override(o),t,e,i)};return new Proxy(s,{deleteProperty(o,r){return delete o[r],delete n[r],!0},get(o,r,a){return Hg(o,r,()=>E1(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(n,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,r)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,r){return Reflect.has(n,r)},ownKeys(){return Reflect.ownKeys(n)},set(o,r,a){return n[r]=a,delete o[r],!0}})}function Wg(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:zn(e)?e:()=>e,isIndexable:zn(i)?i:()=>i}}const O1=(n,t)=>n?n+lc(t):t,mc=(n,t)=>dt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Hg(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t))return n[t];const i=e();return n[t]=i,i}function E1(n,t,e){const{_proxy:i,_context:s,_subProxy:o,_descriptors:r}=n;let a=i[t];return zn(a)&&r.isScriptable(t)&&(a=T1(t,a,n,e)),It(a)&&a.length&&(a=A1(t,a,n,r.isIndexable)),mc(t,a)&&(a=Yi(a,s,o&&o[t],r)),a}function T1(n,t,e,i){const{_proxy:s,_context:o,_subProxy:r,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);return a.add(n),t=t(o,r||i),a.delete(n),mc(n,t)&&(t=bc(s._scopes,s,n,t)),t}function A1(n,t,e,i){const{_proxy:s,_context:o,_subProxy:r,_descriptors:a}=e;if(Ae(o.index)&&i(n))t=t[o.index%t.length];else if(dt(t[0])){const l=t,c=s._scopes.filter(h=>h!==l);t=[];for(const h of l){const d=bc(c,s,n,h);t.push(Yi(d,o,r&&r[n],a))}}return t}function Ug(n,t,e){return zn(n)?n(t,e):n}const D1=(n,t)=>n===!0?t:typeof n=="string"?Bn(t,n):void 0;function L1(n,t,e,i,s){for(const o of t){const r=D1(e,o);if(r){n.add(r);const a=Ug(r._fallback,e,s);if(Ae(a)&&a!==e&&a!==i)return a}else if(r===!1&&Ae(i)&&e!==i)return null}return!1}function bc(n,t,e,i){const s=t._rootScopes,o=Ug(t._fallback,e,i),r=[...n,...s],a=new Set;a.add(i);let l=ud(a,r,e,o||e,i);return l===null||Ae(o)&&o!==e&&(l=ud(a,r,o,l,i),l===null)?!1:pc(Array.from(a),[""],s,o,()=>I1(t,e,i))}function ud(n,t,e,i,s){for(;e;)e=L1(n,t,e,i,s);return e}function I1(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return It(s)&&dt(e)?e:s}function R1(n,t,e,i){let s;for(const o of t)if(s=Yg(O1(o,n),e),Ae(s))return mc(n,s)?bc(e,i,n,s):s}function Yg(n,t){for(const e of t){if(!e)continue;const i=e[n];if(Ae(i))return i}}function dd(n){let t=n._keys;return t||(t=n._keys=F1(n._scopes)),t}function F1(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}function Xg(n,t,e,i){const{iScale:s}=n,{key:o="r"}=this._parsing,r=new Array(i);let a,l,c,h;for(a=0,l=i;a<l;++a)c=a+e,h=t[c],r[a]={r:s.parse(Bn(h,o),c)};return r}const N1=Number.EPSILON||1e-14,Xi=(n,t)=>t<n.length&&!n[t].skip&&n[t],Gg=n=>n==="x"?"y":"x";function B1(n,t,e,i){const s=n.skip?t:n,o=t,r=e.skip?t:e,a=kl(o,s),l=kl(r,o);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=i*c,f=i*h;return{previous:{x:o.x-d*(r.x-s.x),y:o.y-d*(r.y-s.y)},next:{x:o.x+f*(r.x-s.x),y:o.y+f*(r.y-s.y)}}}function z1(n,t,e){const i=n.length;let s,o,r,a,l,c=Xi(n,0);for(let h=0;h<i-1;++h)if(l=c,c=Xi(n,h+1),!(!l||!c)){if(Gs(t[h],0,N1)){e[h]=e[h+1]=0;continue}s=e[h]/t[h],o=e[h+1]/t[h],a=Math.pow(s,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),e[h]=s*r*t[h],e[h+1]=o*r*t[h])}}function $1(n,t,e="x"){const i=Gg(e),s=n.length;let o,r,a,l=Xi(n,0);for(let c=0;c<s;++c){if(r=a,a=l,l=Xi(n,c+1),!a)continue;const h=a[e],d=a[i];r&&(o=(h-r[e])/3,a[`cp1${e}`]=h-o,a[`cp1${i}`]=d-o*t[c]),l&&(o=(l[e]-h)/3,a[`cp2${e}`]=h+o,a[`cp2${i}`]=d+o*t[c])}}function V1(n,t="x"){const e=Gg(t),i=n.length,s=Array(i).fill(0),o=Array(i);let r,a,l,c=Xi(n,0);for(r=0;r<i;++r)if(a=l,l=c,c=Xi(n,r+1),!!l){if(c){const h=c[t]-l[t];s[r]=h!==0?(c[e]-l[e])/h:0}o[r]=a?c?qe(s[r-1])!==qe(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}z1(n,s,o),$1(n,o,t)}function hr(n,t,e){return Math.max(Math.min(n,e),t)}function j1(n,t){let e,i,s,o,r,a=oo(n[0],t);for(e=0,i=n.length;e<i;++e)r=o,o=a,a=e<i-1&&oo(n[e+1],t),o&&(s=n[e],r&&(s.cp1x=hr(s.cp1x,t.left,t.right),s.cp1y=hr(s.cp1y,t.top,t.bottom)),a&&(s.cp2x=hr(s.cp2x,t.left,t.right),s.cp2y=hr(s.cp2y,t.top,t.bottom)))}function W1(n,t,e,i,s){let o,r,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")V1(n,s);else{let c=i?n[n.length-1]:n[0];for(o=0,r=n.length;o<r;++o)a=n[o],l=B1(c,a,n[Math.min(o+1,r-(i?0:1))%r],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&j1(n,e)}function qg(){return typeof window<"u"&&typeof document<"u"}function _c(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Kr(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const ha=n=>window.getComputedStyle(n,null);function H1(n,t){return ha(n).getPropertyValue(t)}const U1=["top","right","bottom","left"];function pi(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const o=U1[s];i[o]=parseFloat(n[t+"-"+o+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Y1=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function X1(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:o}=i;let r=!1,a,l;if(Y1(s,o,n.target))a=s,l=o;else{const c=t.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,r=!0}return{x:a,y:l,box:r}}function ri(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=ha(e),o=s.boxSizing==="border-box",r=pi(s,"padding"),a=pi(s,"border","width"),{x:l,y:c,box:h}=X1(n,e),d=r.left+(h&&a.left),f=r.top+(h&&a.top);let{width:p,height:m}=t;return o&&(p-=r.width+a.width,m-=r.height+a.height),{x:Math.round((l-d)/p*e.width/i),y:Math.round((c-f)/m*e.height/i)}}function G1(n,t,e){let i,s;if(t===void 0||e===void 0){const o=_c(n);if(!o)t=n.clientWidth,e=n.clientHeight;else{const r=o.getBoundingClientRect(),a=ha(o),l=pi(a,"border","width"),c=pi(a,"padding");t=r.width-c.width-l.width,e=r.height-c.height-l.height,i=Kr(a.maxWidth,o,"clientWidth"),s=Kr(a.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:i||Hr,maxHeight:s||Hr}}const tl=n=>Math.round(n*10)/10;function q1(n,t,e,i){const s=ha(n),o=pi(s,"margin"),r=Kr(s.maxWidth,n,"clientWidth")||Hr,a=Kr(s.maxHeight,n,"clientHeight")||Hr,l=G1(n,t,e);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const d=pi(s,"border","width"),f=pi(s,"padding");c-=f.width+d.width,h-=f.height+d.height}return c=Math.max(0,c-o.width),h=Math.max(0,i?Math.floor(c/i):h-o.height),c=tl(Math.min(c,r,l.maxWidth)),h=tl(Math.min(h,a,l.maxHeight)),c&&!h&&(h=tl(c/2)),{width:c,height:h}}function fd(n,t,e){const i=t||1,s=Math.floor(n.height*i),o=Math.floor(n.width*i);n.height=s/i,n.width=o/i;const r=n.canvas;return r.style&&(e||!r.style.height&&!r.style.width)&&(r.style.height=`${n.height}px`,r.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||r.height!==s||r.width!==o?(n.currentDevicePixelRatio=i,r.height=s,r.width=o,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const K1=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return n}();function gd(n,t){const e=H1(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function ai(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function J1(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function Z1(n,t,e,i){const s={x:n.cp2x,y:n.cp2y},o={x:t.cp1x,y:t.cp1y},r=ai(n,s,e),a=ai(s,o,e),l=ai(o,t,e),c=ai(r,a,e),h=ai(a,l,e);return ai(c,h,e)}const pd=new Map;function Q1(n,t){t=t||{};const e=n+JSON.stringify(t);let i=pd.get(e);return i||(i=new Intl.NumberFormat(n,t),pd.set(e,i)),i}function fo(n,t,e){return Q1(t,e).format(n)}const tw=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},ew=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function el(n,t,e){return n?tw(t,e):ew()}function nw(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function iw(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Kg(n){return n==="angle"?{between:so,compare:$v,normalize:Re}:{between:Ur,compare:(t,e)=>t-e,normalize:t=>t}}function md({start:n,end:t,count:e,loop:i,style:s}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:s}}function sw(n,t,e){const{property:i,start:s,end:o}=e,{between:r,normalize:a}=Kg(i),l=t.length;let{start:c,end:h,loop:d}=n,f,p;if(d){for(c+=l,h+=l,f=0,p=l;f<p&&r(a(t[c%l][i]),s,o);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:n.style}}function ow(n,t,e){if(!e)return[n];const{property:i,start:s,end:o}=e,r=t.length,{compare:a,between:l,normalize:c}=Kg(i),{start:h,end:d,loop:f,style:p}=sw(n,t,e),m=[];let b=!1,_=null,x,M,k;const v=()=>l(s,k,x)&&a(s,k)!==0,w=()=>a(o,x)===0||l(o,k,x),O=()=>b||v(),T=()=>!b||w();for(let D=h,R=h;D<=d;++D)M=t[D%r],!M.skip&&(x=c(M[i]),x!==k&&(b=l(x,s,o),_===null&&O()&&(_=a(x,s)===0?D:R),_!==null&&T()&&(m.push(md({start:_,end:D,loop:f,count:r,style:p})),_=null),R=D,k=x));return _!==null&&m.push(md({start:_,end:d,loop:f,count:r,style:p})),m}function rw(n,t){const e=[],i=n.segments;for(let s=0;s<i.length;s++){const o=ow(i[s],n.points,t);o.length&&e.push(...o)}return e}function aw(n,t,e,i){let s=0,o=t-1;if(e&&!i)for(;s<t&&!n[s].skip;)s++;for(;s<t&&n[s].skip;)s++;for(s%=t,e&&(o+=s);o>s&&n[o%t].skip;)o--;return o%=t,{start:s,end:o}}function lw(n,t,e,i){const s=n.length,o=[];let r=t,a=n[t],l;for(l=t+1;l<=e;++l){const c=n[l%s];c.skip||c.stop?a.skip||(i=!1,o.push({start:t%s,end:(l-1)%s,loop:i}),t=r=c.stop?l:null):(r=l,a.skip&&(t=l)),a=c}return r!==null&&o.push({start:t%s,end:r%s,loop:i}),o}function cw(n,t){const e=n.points,i=n.options.spanGaps,s=e.length;if(!s)return[];const o=!!n._loop,{start:r,end:a}=aw(e,s,o,i);if(i===!0)return bd(n,[{start:r,end:a,loop:o}],e,t);const l=a<r?a+s:a,c=!!n._fullLoop&&r===0&&a===s-1;return bd(n,lw(e,r,l,c),e,t)}function bd(n,t,e,i){return!i||!i.setContext||!e?t:hw(n,t,e,i)}function hw(n,t,e,i){const s=n._chart.getContext(),o=_d(n.options),{_datasetIndex:r,options:{spanGaps:a}}=n,l=e.length,c=[];let h=o,d=t[0].start,f=d;function p(m,b,_,x){const M=a?-1:1;if(m!==b){for(m+=l;e[m%l].skip;)m-=M;for(;e[b%l].skip;)b+=M;m%l!==b%l&&(c.push({start:m%l,end:b%l,loop:_,style:x}),h=x,d=b%l)}}for(const m of t){d=a?d:m.start;let b=e[d%l],_;for(f=d+1;f<=m.end;f++){const x=e[f%l];_=_d(i.setContext(jn(s,{type:"segment",p0:b,p1:x,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:r}))),uw(_,h)&&p(d,f-1,m.loop,h),b=x,h=_}d<f-1&&p(d,f-1,m.loop,h)}return c}function _d(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function uw(n,t){return t&&JSON.stringify(n)!==JSON.stringify(t)}/*!
 * Chart.js v3.9.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */class dw{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const o=e.listeners[s],r=e.duration;o.forEach(a=>a({chart:t,initial:e.initial,numSteps:r,currentStep:Math.min(i-e.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Ag.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const o=i.items;let r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(t),a=!0):(o[r]=o[o.length-1],o.pop());a&&(s.draw(),this._notify(s,i,t,"progress")),o.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var on=new dw;const yd="transparent",fw={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=cd(n||yd),s=i.valid&&cd(t||yd);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class gw{constructor(t,e,i,s){const o=e[i];s=cr([t.to,s,o,t.from]);const r=cr([t.from,o,s]);this._active=!0,this._fn=t.fn||fw[t.type||typeof r],this._easing=qs[t.easing]||qs.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],o=i-this._start,r=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(r,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=cr([t.to,e,s,t.from]),this._from=cr([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,o=this._from,r=this._loop,a=this._to;let l;if(this._active=o!==a&&(r||e<i),!this._active){this._target[s]=a,this._notify(!0);return}if(e<0){this._target[s]=o;return}l=e/i%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(o,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}const pw=["x","y","borderWidth","radius","tension"],mw=["color","borderColor","backgroundColor"];ct.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const bw=Object.keys(ct.animation);ct.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:n=>n!=="onProgress"&&n!=="onComplete"&&n!=="fn"});ct.set("animations",{colors:{type:"color",properties:mw},numbers:{type:"number",properties:pw}});ct.describe("animations",{_fallback:"animation"});ct.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:n=>n|0}}}});class Jg{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!dt(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const s=t[i];if(!dt(s))return;const o={};for(const r of bw)o[r]=s[r];(It(s.properties)&&s.properties||[i]).forEach(r=>{(r===i||!e.has(r))&&e.set(r,o)})})}_animateOptions(t,e){const i=e.options,s=yw(t,i);if(!s)return[];const o=this._createAnimations(s,i);return i.$shared&&_w(t.options.$animations,i).then(()=>{t.options=i},()=>{}),o}_createAnimations(t,e){const i=this._properties,s=[],o=t.$animations||(t.$animations={}),r=Object.keys(e),a=Date.now();let l;for(l=r.length-1;l>=0;--l){const c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(t,e));continue}const h=e[c];let d=o[c];const f=i.get(c);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){t[c]=h;continue}o[c]=d=new gw(f,t,c,h),s.push(d)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return on.add(this._chart,i),!0}}function _w(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const o=n[i[s]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function yw(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function xd(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:i?o:s,end:i?s:o}}function xw(n,t,e){if(e===!1)return!1;const i=xd(n,e),s=xd(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function vw(n){let t,e,i,s;return dt(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function Zg(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,o;for(s=0,o=i.length;s<o;++s)e.push(i[s].index);return e}function vd(n,t,e,i={}){const s=n.keys,o=i.mode==="single";let r,a,l,c;if(t!==null){for(r=0,a=s.length;r<a;++r){if(l=+s[r],l===e){if(i.all)continue;break}c=n.values[l],se(c)&&(o||t===0||qe(t)===qe(c))&&(t+=c)}return t}}function ww(n){const t=Object.keys(n),e=new Array(t.length);let i,s,o;for(i=0,s=t.length;i<s;++i)o=t[i],e[i]={x:o,y:n[o]};return e}function wd(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Mw(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function Sw(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function kw(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Md(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const o=n[s.index];if(e&&o>0||!e&&o<0)return s.index}return null}function Sd(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:o,vScale:r,index:a}=i,l=o.axis,c=r.axis,h=Mw(o,r,i),d=t.length;let f;for(let p=0;p<d;++p){const m=t[p],{[l]:b,[c]:_}=m,x=m._stacks||(m._stacks={});f=x[c]=kw(s,h,b),f[a]=_,f._top=Md(f,r,!0,i.type),f._bottom=Md(f,r,!1,i.type)}}function nl(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function Cw(n,t){return jn(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Pw(n,t,e){return jn(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function fs(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const o=s._stacks;if(!o||o[i]===void 0||o[i][e]===void 0)return;delete o[i][e]}}}const il=n=>n==="reset"||n==="none",kd=(n,t)=>t?n:Object.assign({},n),Ow=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:Zg(e,!0),values:null};class Be{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=wd(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&fs(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(d,f,p,m)=>d==="x"?f:d==="r"?m:p,o=e.xAxisID=ht(i.xAxisID,nl(t,"x")),r=e.yAxisID=ht(i.yAxisID,nl(t,"y")),a=e.rAxisID=ht(i.rAxisID,nl(t,"r")),l=e.indexAxis,c=e.iAxisID=s(l,o,r,a),h=e.vAxisID=s(l,r,o,a);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(r),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ed(this._data,this),t._stacked&&fs(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(dt(e))this._data=ww(e);else if(i!==e){if(i){ed(i,this);const s=this._cachedMeta;fs(s),s._parsed=[]}e&&Object.isExtensible(e)&&Hv(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const o=e._stacked;e._stacked=wd(e.vScale,e),e.stack!==i.stack&&(s=!0,fs(e),e.stack=i.stack),this._resyncElements(t),(s||o!==e._stacked)&&Sd(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:r}=i,a=o.axis;let l=t===0&&e===s.length?!0:i._sorted,c=t>0&&i._parsed[t-1],h,d,f;if(this._parsing===!1)i._parsed=s,i._sorted=!0,f=s;else{It(s[t])?f=this.parseArrayData(i,s,t,e):dt(s[t])?f=this.parseObjectData(i,s,t,e):f=this.parsePrimitiveData(i,s,t,e);const p=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<e;++h)i._parsed[h+t]=d=f[h],l&&(p()&&(l=!1),c=d);i._sorted=l}r&&Sd(this,f)}parsePrimitiveData(t,e,i,s){const{iScale:o,vScale:r}=t,a=o.axis,l=r.axis,c=o.getLabels(),h=o===r,d=new Array(s);let f,p,m;for(f=0,p=s;f<p;++f)m=f+i,d[f]={[a]:h||o.parse(c[m],m),[l]:r.parse(e[m],m)};return d}parseArrayData(t,e,i,s){const{xScale:o,yScale:r}=t,a=new Array(s);let l,c,h,d;for(l=0,c=s;l<c;++l)h=l+i,d=e[h],a[l]={x:o.parse(d[0],h),y:r.parse(d[1],h)};return a}parseObjectData(t,e,i,s){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,d,f,p;for(h=0,d=s;h<d;++h)f=h+i,p=e[f],c[h]={x:o.parse(Bn(p,a),f),y:r.parse(Bn(p,l),f)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,o=this._cachedMeta,r=e[t.axis],a={keys:Zg(s,!0),values:e._stacks[t.axis]};return vd(a,r,o.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const o=i[e.axis];let r=o===null?NaN:o;const a=s&&i._stacks[e.axis];s&&a&&(s.values=a,r=vd(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,o=i._sorted&&t===i.iScale,r=s.length,a=this._getOtherScale(t),l=Ow(e,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=Sw(a);let f,p;function m(){p=s[f];const b=p[a.axis];return!se(p[t.axis])||h>b||d<b}for(f=0;f<r&&!(!m()&&(this.updateRangeFromParsed(c,t,p,l),o));++f);if(o){for(f=r-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,t,p,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,o,r;for(s=0,o=e.length;s<o;++s)r=e[s][t.axis],se(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=vw(ht(this.options.clip,xw(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],o=e.chartArea,r=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,o,a,l),h=a;h<a+l;++h){const d=s[h];d.hidden||(d.active&&c?r.push(d):d.draw(t,o))}for(h=0;h<r.length;++h)r[h].draw(t,o)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const r=this._cachedMeta.data[t];o=r.$context||(r.$context=Pw(this.getContext(),t,r)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=Cw(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",o=this._cachedDataOpts,r=t+"-"+e,a=o[r],l=this.enableOptionSharing&&Ae(i);if(a)return kd(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,t),d=s?[`${t}Hover`,"hover",t,""]:[t,""],f=c.getOptionScopes(this.getDataset(),h),p=Object.keys(ct.elements[t]),m=()=>this.getContext(i,s),b=c.resolveNamedOptions(f,p,m,d);return b.$shared&&(b.$shared=l,o[r]=Object.freeze(kd(b,l))),b}_resolveAnimations(t,e,i){const s=this.chart,o=this._cachedDataOpts,r=`animation-${e}`,a=o[r];if(a)return a;let l;if(s.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,e),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(t,i,e))}const c=new Jg(s,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||il(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,o=this.getSharedOptions(i),r=this.includeOptions(e,o)||o!==s;return this.updateSharedOptions(o,e,i),{sharedOptions:o,includeOptions:r}}updateElement(t,e,i,s){il(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!il(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const o=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,o=e.length,r=Math.min(o,s);r&&this.parse(0,r),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,e,i=!0){const s=this._cachedMeta,o=s.data,r=t+e;let a;const l=c=>{for(c.length+=e,a=c.length-1;a>=r;a--)c[a]=c[a-e]};for(l(o),a=t;a<r;++a)o[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,e),i&&this.updateElements(o,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&fs(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Be.defaults={};Be.prototype.datasetElementType=null;Be.prototype.dataElementType=null;function Ew(n,t){if(!n._cache.$bar){const e=n.getMatchingVisibleMetas(t);let i=[];for(let s=0,o=e.length;s<o;s++)i=i.concat(e[s].controller.getAllParsedValues(n));n._cache.$bar=Tg(i.sort((s,o)=>s-o))}return n._cache.$bar}function Tw(n){const t=n.iScale,e=Ew(t,n.type);let i=t._length,s,o,r,a;const l=()=>{r===32767||r===-32768||(Ae(a)&&(i=Math.min(i,Math.abs(r-a)||i)),a=r)};for(s=0,o=e.length;s<o;++s)r=t.getPixelForValue(e[s]),l();for(a=void 0,s=0,o=t.ticks.length;s<o;++s)r=t.getPixelForTick(s),l();return i}function Aw(n,t,e,i){const s=e.barThickness;let o,r;return _t(s)?(o=t.min*e.categoryPercentage,r=e.barPercentage):(o=s*i,r=1),{chunk:o/i,ratio:r,start:t.pixels[n]-o/2}}function Dw(n,t,e,i){const s=t.pixels,o=s[n];let r=n>0?s[n-1]:null,a=n<s.length-1?s[n+1]:null;const l=e.categoryPercentage;r===null&&(r=o-(a===null?t.end-t.start:a-o)),a===null&&(a=o+o-r);const c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/i,ratio:e.barPercentage,start:c}}function Lw(n,t,e,i){const s=e.parse(n[0],i),o=e.parse(n[1],i),r=Math.min(s,o),a=Math.max(s,o);let l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:s,end:o,min:r,max:a}}function Qg(n,t,e,i){return It(n)?Lw(n,t,e,i):t[e.axis]=e.parse(n,i),t}function Cd(n,t,e,i){const s=n.iScale,o=n.vScale,r=s.getLabels(),a=s===o,l=[];let c,h,d,f;for(c=e,h=e+i;c<h;++c)f=t[c],d={},d[s.axis]=a||s.parse(r[c],c),l.push(Qg(f,d,o,c));return l}function sl(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function Iw(n,t,e){return n!==0?qe(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function Rw(n){let t,e,i,s,o;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(s="end",o="start"):(s="start",o="end"),{start:e,end:i,reverse:t,top:s,bottom:o}}function Fw(n,t,e,i){let s=t.borderSkipped;const o={};if(!s){n.borderSkipped=o;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:a,reverse:l,top:c,bottom:h}=Rw(n);s==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?s=c:(e._bottom||0)===i?s=h:(o[Pd(h,r,a,l)]=!0,s=c)),o[Pd(s,r,a,l)]=!0,n.borderSkipped=o}function Pd(n,t,e,i){return i?(n=Nw(n,t,e),n=Od(n,e,t)):n=Od(n,t,e),n}function Nw(n,t,e){return n===t?e:n===e?t:n}function Od(n,t,e){return n==="start"?t:n==="end"?e:n}function Bw(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}class yc extends Be{parsePrimitiveData(t,e,i,s){return Cd(t,e,i,s)}parseArrayData(t,e,i,s){return Cd(t,e,i,s)}parseObjectData(t,e,i,s){const{iScale:o,vScale:r}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?a:l,h=r.axis==="x"?a:l,d=[];let f,p,m,b;for(f=i,p=i+s;f<p;++f)b=e[f],m={},m[o.axis]=o.parse(Bn(b,c),f),d.push(Qg(Bn(b,h),m,r,f));return d}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:s}=e,o=this.getParsed(t),r=o._custom,a=sl(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,s){const o=s==="reset",{index:r,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(e,s);for(let p=e;p<e+i;p++){const m=this.getParsed(p),b=o||_t(m[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),_=this._calculateBarIndexPixels(p,h),x=(m._stacks||{})[a.axis],M={horizontal:c,base:b.base,enableBorderRadius:!x||sl(m._custom)||r===x._top||r===x._bottom,x:c?b.head:_.center,y:c?_.center:b.head,height:c?_.size:Math.abs(b.size),width:c?Math.abs(b.size):_.size};f&&(M.options=d||this.resolveDataElementOptions(p,t[p].active?"active":s));const k=M.options||t[p].options;Fw(M,k,x,r),Bw(M,k,h.ratio),this.updateElement(t[p],p,M,s)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),o=i.options.stacked,r=[],a=l=>{const c=l.controller.getParsed(e),h=c&&c[l.vScale.axis];if(_t(h)||isNaN(h))return!0};for(const l of s)if(!(e!==void 0&&a(l))&&((o===!1||r.indexOf(l.stack)===-1||o===void 0&&l.stack===void 0)&&r.push(l.stack),l.index===t))break;return r.length||r.push(void 0),r}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const s=this._getStacks(t,i),o=e!==void 0?s.indexOf(e):-1;return o===-1?s.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,s=[];let o,r;for(o=0,r=e.data.length;o<r;++o)s.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));const a=t.barThickness;return{min:a||Tw(e),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i},options:{base:s,minBarLength:o}}=this,r=s||0,a=this.getParsed(t),l=a._custom,c=sl(l);let h=a[e.axis],d=0,f=i?this.applyStack(e,a,i):h,p,m;f!==h&&(d=f-h,f=h),c&&(h=l.barStart,f=l.barEnd-l.barStart,h!==0&&qe(h)!==qe(l.barEnd)&&(d=0),d+=h);const b=!_t(s)&&!c?s:d;let _=e.getPixelForValue(b);if(this.chart.getDataVisibility(t)?p=e.getPixelForValue(d+f):p=_,m=p-_,Math.abs(m)<o){m=Iw(m,e,r)*o,h===r&&(_-=m/2);const x=e.getPixelForDecimal(0),M=e.getPixelForDecimal(1),k=Math.min(x,M),v=Math.max(x,M);_=Math.max(Math.min(_,v),k),p=_+m}if(_===e.getPixelForValue(r)){const x=qe(m)*e.getLineWidthForValue(r)/2;_+=x,m-=x}return{size:m,base:_,head:p,center:p+m/2}}_calculateBarIndexPixels(t,e){const i=e.scale,s=this.options,o=s.skipNull,r=ht(s.maxBarThickness,1/0);let a,l;if(e.grouped){const c=o?this._getStackCount(t):e.stackCount,h=s.barThickness==="flex"?Dw(t,e,s,c):Aw(t,e,s,c),d=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);a=h.start+h.chunk*d+h.chunk/2,l=Math.min(r,h.chunk*h.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(r,e.min*e.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length;let o=0;for(;o<s;++o)this.getParsed(o)[e.axis]!==null&&i[o].draw(this._ctx)}}yc.id="bar";yc.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};yc.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class xc extends Be{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,s){const o=super.parsePrimitiveData(t,e,i,s);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+i).radius;return o}parseArrayData(t,e,i,s){const o=super.parseArrayData(t,e,i,s);for(let r=0;r<o.length;r++){const a=e[i+r];o[r]._custom=ht(a[2],this.resolveDataElementOptions(r+i).radius)}return o}parseObjectData(t,e,i,s){const o=super.parseObjectData(t,e,i,s);for(let r=0;r<o.length;r++){const a=e[i+r];o[r]._custom=ht(a&&a.r&&+a.r,this.resolveDataElementOptions(r+i).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,{xScale:i,yScale:s}=e,o=this.getParsed(t),r=i.getLabelForValue(o.x),a=s.getLabelForValue(o.y),l=o._custom;return{label:e.label,value:"("+r+", "+a+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,s){const o=s==="reset",{iScale:r,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(e,s),h=r.axis,d=a.axis;for(let f=e;f<e+i;f++){const p=t[f],m=!o&&this.getParsed(f),b={},_=b[h]=o?r.getPixelForDecimal(.5):r.getPixelForValue(m[h]),x=b[d]=o?a.getBasePixel():a.getPixelForValue(m[d]);b.skip=isNaN(_)||isNaN(x),c&&(b.options=l||this.resolveDataElementOptions(f,p.active?"active":s),o&&(b.options.radius=0)),this.updateElement(p,f,b,s)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,e);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return e!=="active"&&(s.radius=0),s.radius+=ht(i&&i._custom,o),s}}xc.id="bubble";xc.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};xc.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};function zw(n,t,e){let i=1,s=1,o=0,r=0;if(t<wt){const a=n,l=a+t,c=Math.cos(a),h=Math.sin(a),d=Math.cos(l),f=Math.sin(l),p=(k,v,w)=>so(k,a,l,!0)?1:Math.max(v,v*e,w,w*e),m=(k,v,w)=>so(k,a,l,!0)?-1:Math.min(v,v*e,w,w*e),b=p(0,c,d),_=p(Vt,h,f),x=m(jt,c,d),M=m(jt+Vt,h,f);i=(b-x)/2,s=(_-M)/2,o=-(b+x)/2,r=-(_+M)/2}return{ratioX:i,ratioY:s,offsetX:o,offsetY:r}}class go extends Be{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let o=l=>+i[l];if(dt(i[t])){const{key:l="value"}=this._parsing;o=c=>+Bn(i[c],l)}let r,a;for(r=t,a=t+e;r<a;++r)s._parsed[r]=o(r)}}_getRotation(){return Ne(this.options.rotation-90)}_getCircumference(){return Ne(this.options.circumference)}_getRotationExtents(){let t=wt,e=-wt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)){const s=this.chart.getDatasetMeta(i).controller,o=s._getRotation(),r=s._getCircumference();t=Math.min(t,o),e=Math.max(e,o+r)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,o=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-r)/2,0),l=Math.min(Tv(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:b}=zw(d,h,l),_=(i.width-r)/f,x=(i.height-r)/p,M=Math.max(Math.min(_,x)/2,0),k=kg(this.options.radius,M),v=Math.max(k*l,0),w=(k-v)/this._getVisibleDatasetWeightTotal();this.offsetX=m*k,this.offsetY=b*k,s.total=this.calculateTotal(),this.outerRadius=k-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,o=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/wt)}updateElements(t,e,i,s){const o=s==="reset",r=this.chart,a=r.chartArea,c=r.options.animation,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=o&&c.animateScale,p=f?0:this.innerRadius,m=f?0:this.outerRadius,{sharedOptions:b,includeOptions:_}=this._getSharedOptions(e,s);let x=this._getRotation(),M;for(M=0;M<e;++M)x+=this._circumference(M,o);for(M=e;M<e+i;++M){const k=this._circumference(M,o),v=t[M],w={x:h+this.offsetX,y:d+this.offsetY,startAngle:x,endAngle:x+k,circumference:k,outerRadius:m,innerRadius:p};_&&(w.options=b||this.resolveDataElementOptions(M,v.active?"active":s)),x+=k,this.updateElement(v,M,w,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i=0,s;for(s=0;s<e.length;s++){const o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!e[s].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?wt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=fo(e._parsed[t],i.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,o,r,a,l;if(!t){for(s=0,o=i.data.datasets.length;s<o;++s)if(i.isDatasetVisible(s)){r=i.getDatasetMeta(s),t=r.data,a=r.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const o=this.resolveDataElementOptions(i);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(ht(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}go.id="doughnut";go.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};go.descriptors={_scriptable:n=>n!=="spacing",_indexable:n=>n!=="spacing"};go.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const t=n.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:e}}=n.legend.options;return t.labels.map((i,s)=>{const r=n.getDatasetMeta(0).controller.getStyle(s);return{text:i,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:e,hidden:!n.getDataVisibility(s),index:s}})}return[]}},onClick(n,t,e){e.chart.toggleDataVisibility(t.index),e.chart.update()}},tooltip:{callbacks:{title(){return""},label(n){let t=n.label;const e=": "+n.formattedValue;return It(t)?(t=t.slice(),t[0]+=e):t+=e,t}}}}};class vc extends Be{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=e,r=this.chart._animationsDisabled;let{start:a,count:l}=Lg(e,s,r);this._drawStart=a,this._drawCount=l,Ig(e)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:c},t),this.updateElements(s,a,l,t)}updateElements(t,e,i,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(e,s),f=r.axis,p=a.axis,{spanGaps:m,segment:b}=this.options,_=Ui(m)?m:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||o||s==="none";let M=e>0&&this.getParsed(e-1);for(let k=e;k<e+i;++k){const v=t[k],w=this.getParsed(k),O=x?v:{},T=_t(w[p]),D=O[f]=r.getPixelForValue(w[f],k),R=O[p]=o||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,w,l):w[p],k);O.skip=isNaN(D)||isNaN(R)||T,O.stop=k>0&&Math.abs(w[f]-M[f])>_,b&&(O.parsed=w,O.raw=c.data[k]),d&&(O.options=h||this.resolveDataElementOptions(k,v.active?"active":s)),x||this.updateElement(v,k,O,s),M=w}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const o=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,r)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}vc.id="line";vc.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};vc.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class wc extends Be{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=fo(e._parsed[t].r,i.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,e,i,s){return Xg.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<e.min&&(e.min=o),o>e.max&&(e.max=o))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,s=Math.min(e.right-e.left,e.bottom-e.top),o=Math.max(s/2,0),r=Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0),a=(o-r)/t.getVisibleDatasetCount();this.outerRadius=o-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,e,i,s){const o=s==="reset",r=this.chart,l=r.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,d=c.yCenter,f=c.getIndexAngle(0)-.5*jt;let p=f,m;const b=360/this.countVisibleElements();for(m=0;m<e;++m)p+=this._computeAngle(m,s,b);for(m=e;m<e+i;m++){const _=t[m];let x=p,M=p+this._computeAngle(m,s,b),k=r.getDataVisibility(m)?c.getDistanceFromCenterForValue(this.getParsed(m).r):0;p=M,o&&(l.animateScale&&(k=0),l.animateRotate&&(x=M=f));const v={x:h,y:d,innerRadius:0,outerRadius:k,startAngle:x,endAngle:M,options:this.resolveDataElementOptions(m,_.active?"active":s)};this.updateElement(_,m,v,s)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?Ne(this.resolveDataElementOptions(t,e).angle||i):0}}wc.id="polarArea";wc.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};wc.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){const t=n.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:e}}=n.legend.options;return t.labels.map((i,s)=>{const r=n.getDatasetMeta(0).controller.getStyle(s);return{text:i,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,pointStyle:e,hidden:!n.getDataVisibility(s),index:s}})}return[]}},onClick(n,t,e){e.chart.toggleDataVisibility(t.index),e.chart.update()}},tooltip:{callbacks:{title(){return""},label(n){return n.chart.data.labels[n.dataIndex]+": "+n.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class tp extends go{}tp.id="pie";tp.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class Mc extends Be{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,s){return Xg.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta,i=e.dataset,s=e.data||[],o=e.iScale.getLabels();if(i.points=s,t!=="resize"){const r=this.resolveDatasetElementOptions(t);this.options.showLine||(r.borderWidth=0);const a={_loop:!0,_fullLoop:o.length===s.length,options:r};this.updateElement(i,void 0,a,t)}this.updateElements(s,0,s.length,t)}updateElements(t,e,i,s){const o=this._cachedMeta.rScale,r=s==="reset";for(let a=e;a<e+i;a++){const l=t[a],c=this.resolveDataElementOptions(a,l.active?"active":s),h=o.getPointPositionForValue(a,this.getParsed(a).r),d=r?o.xCenter:h.x,f=r?o.yCenter:h.y,p={x:d,y:f,angle:h.angle,skip:isNaN(d)||isNaN(f),options:c};this.updateElement(l,a,p,s)}}}Mc.id="radar";Mc.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};Mc.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class mn{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Ui(this.x)&&Ui(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(o=>{s[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),s}}mn.defaults={};mn.defaultRoutes=void 0;const ep={values(n){return It(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,o=n;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),o=$w(n,e)}const r=Te(Math.abs(o)),a=Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),fo(n,i,l)},logarithmic(n,t,e){if(n===0)return"0";const i=n/Math.pow(10,Math.floor(Te(n)));return i===1||i===2||i===5?ep.numeric.call(this,n,t,e):""}};function $w(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var ua={formatters:ep};ct.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(n,t)=>t.lineWidth,tickColor:(n,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ua.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});ct.route("scale.ticks","color","","color");ct.route("scale.grid","color","","borderColor");ct.route("scale.grid","borderColor","","borderColor");ct.route("scale.title","color","","color");ct.describe("scale",{_fallback:!1,_scriptable:n=>!n.startsWith("before")&&!n.startsWith("after")&&n!=="callback"&&n!=="parser",_indexable:n=>n!=="borderDash"&&n!=="tickBorderDash"});ct.describe("scales",{_fallback:"scale"});ct.describe("scale.ticks",{_scriptable:n=>n!=="backdropPadding"&&n!=="callback",_indexable:n=>n!=="backdropPadding"});function Vw(n,t){const e=n.options.ticks,i=e.maxTicksLimit||jw(n),s=e.major.enabled?Hw(t):[],o=s.length,r=s[0],a=s[o-1],l=[];if(o>i)return Uw(t,l,s,o/i),l;const c=Ww(s,t,i);if(o>0){let h,d;const f=o>1?Math.round((a-r)/(o-1)):null;for(ur(t,l,c,_t(f)?0:r-f,r),h=0,d=o-1;h<d;h++)ur(t,l,c,s[h],s[h+1]);return ur(t,l,c,a,_t(f)?t.length:a+f),l}return ur(t,l,c),l}function jw(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function Ww(n,t,e){const i=Yw(n),s=t.length/e;if(!i)return Math.max(s,1);const o=Bv(i);for(let r=0,a=o.length-1;r<a;r++){const l=o[r];if(l>s)return l}return Math.max(s,1)}function Hw(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function Uw(n,t,e,i){let s=0,o=e[0],r;for(i=Math.ceil(i),r=0;r<n.length;r++)r===o&&(t.push(n[r]),s++,o=e[s*i])}function ur(n,t,e,i,s){const o=ht(i,0),r=Math.min(ht(s,n.length),n.length);let a=0,l,c,h;for(e=Math.ceil(e),s&&(l=s-i,e=l/Math.floor(l/e)),h=o;h<0;)a++,h=Math.round(o+a*e);for(c=Math.max(o,0);c<r;c++)c===h&&(t.push(n[c]),a++,h=Math.round(o+a*e))}function Yw(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const Xw=n=>n==="left"?"right":n==="right"?"left":n,Ed=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e;function Td(n,t){const e=[],i=n.length/t,s=n.length;let o=0;for(;o<s;o+=i)e.push(n[Math.floor(o)]);return e}function Gw(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),o=n._startPixel,r=n._endPixel,a=1e-6;let l=n.getPixelForTick(s),c;if(!(e&&(i===1?c=Math.max(l-o,r-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(s-1))/2,l+=s<t?c:-c,l<o-a||l>r+a)))return l}function qw(n,t){bt(n,e=>{const i=e.gc,s=i.length/2;let o;if(s>t){for(o=0;o<s;++o)delete e.data[i[o]];i.splice(0,s)}})}function gs(n){return n.drawTicks?n.tickLength:0}function Ad(n,t){if(!n.display)return 0;const e=Me(n.font,t),i=De(n.padding);return(It(n.text)?n.text.length:1)*e.lineHeight+i.height}function Kw(n,t){return jn(n,{scale:t,type:"scale"})}function Jw(n,t,e){return jn(n,{tick:e,index:t,type:"tick"})}function Zw(n,t,e){let i=Yv(n);return(e&&t!=="right"||!e&&t==="right")&&(i=Xw(i)),i}function Qw(n,t,e,i){const{top:s,left:o,bottom:r,right:a,chart:l}=n,{chartArea:c,scales:h}=l;let d=0,f,p,m;const b=r-s,_=a-o;if(n.isHorizontal()){if(p=nd(i,o,a),dt(e)){const x=Object.keys(e)[0],M=e[x];m=h[x].getPixelForValue(M)+b-t}else e==="center"?m=(c.bottom+c.top)/2+b-t:m=Ed(n,e,t);f=a-o}else{if(dt(e)){const x=Object.keys(e)[0],M=e[x];p=h[x].getPixelForValue(M)-_+t}else e==="center"?p=(c.left+c.right)/2-_+t:p=Ed(n,e,t);m=nd(i,r,s),d=e==="left"?-Vt:Vt}return{titleX:p,titleY:m,maxWidth:f,rotation:d}}class xi extends mn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=Oe(t,Number.POSITIVE_INFINITY),e=Oe(e,Number.NEGATIVE_INFINITY),i=Oe(i,Number.POSITIVE_INFINITY),s=Oe(s,Number.NEGATIVE_INFINITY),{min:Oe(t,i),max:Oe(e,s),minDefined:se(t),maxDefined:se(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:e,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,t),s||(e=Math.min(e,r.min)),o||(i=Math.max(i,r.max));return e=o&&e>i?i:e,i=s&&e>i?e:i,{min:Oe(e,Oe(i,e)),max:Oe(i,Oe(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Bt(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=P1(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Td(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=Vw(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Bt(this.options.afterUpdate,[this])}beforeSetDimensions(){Bt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Bt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Bt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Bt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,o;for(i=0,s=t.length;i<s;i++)o=t[i],o.label=Bt(e.callback,[o.value,i,t],this)}afterTickToLabelConversion(){Bt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Bt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=this.ticks.length,s=e.minRotation||0,o=e.maxRotation;let r=s,a,l,c;if(!this._isVisible()||!e.display||s>=o||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,p=ae(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/i:p/(i-1),d+6>a&&(a=p/(i-(t.offset?.5:1)),l=this.maxHeight-gs(t.grid)-e.padding-Ad(t.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),r=cc(Math.min(Math.asin(ae((h.highest.height+6)/a,-1,1)),Math.asin(ae(l/c,-1,1))-Math.asin(ae(f/c,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){Bt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Bt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){const l=Ad(s,e.options.font);if(a?(t.width=this.maxWidth,t.height=gs(o)+l):(t.height=this.maxHeight,t.width=gs(o)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),p=i.padding*2,m=Ne(this.labelRotation),b=Math.cos(m),_=Math.sin(m);if(a){const x=i.mirror?0:_*d.width+b*f.height;t.height=Math.min(this.maxHeight,t.height+x+p)}else{const x=i.mirror?0:b*d.width+_*f.height;t.width=Math.min(this.maxWidth,t.width+x+p)}this._calculatePadding(c,h,_,b)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=s*t.width,p=i*e.height):(f=i*t.height,p=s*e.width):o==="start"?p=e.width:o==="end"?f=t.width:o!=="inner"&&(f=t.width/2,p=e.width/2),this.paddingLeft=Math.max((f-h+r)*this.width/(this.width-h),0),this.paddingRight=Math.max((p-d+r)*this.width/(this.width-d),0)}else{let h=e.height/2,d=t.height/2;o==="start"?(h=0,d=t.height):o==="end"&&(h=e.height,d=0),this.paddingTop=h+r,this.paddingBottom=d+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Bt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)_t(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=Td(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length)}return t}_computeLabelSizes(t,e){const{ctx:i,_longestTextCache:s}=this,o=[],r=[];let a=0,l=0,c,h,d,f,p,m,b,_,x,M,k;for(c=0;c<e;++c){if(f=t[c].label,p=this._resolveTickFontOptions(c),i.font=m=p.string,b=s[m]=s[m]||{data:{},gc:[]},_=p.lineHeight,x=M=0,!_t(f)&&!It(f))x=Xr(i,b.data,b.gc,x,f),M=_;else if(It(f))for(h=0,d=f.length;h<d;++h)k=f[h],!_t(k)&&!It(k)&&(x=Xr(i,b.data,b.gc,x,k),M+=_);o.push(x),r.push(M),a=Math.max(x,a),l=Math.max(M,l)}qw(s,e);const v=o.indexOf(a),w=r.indexOf(l),O=T=>({width:o[T]||0,height:r[T]||0});return{first:O(0),last:O(e-1),widest:O(v),highest:O(w),widths:o,heights:r}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Vv(this._alignToPixels?ni(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=Jw(this.getContext(),t,i))}return this.$context||(this.$context=Kw(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Ne(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),o=this._getLabelSizes(),r=t.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:o,position:r}=s,a=o.offset,l=this.isHorizontal(),h=this.ticks.length+(a?1:0),d=gs(o),f=[],p=o.setContext(this.getContext()),m=p.drawBorder?p.borderWidth:0,b=m/2,_=function(N){return ni(i,N,m)};let x,M,k,v,w,O,T,D,R,W,B,Y;if(r==="top")x=_(this.bottom),O=this.bottom-d,D=x-b,W=_(t.top)+b,Y=t.bottom;else if(r==="bottom")x=_(this.top),W=t.top,Y=_(t.bottom)-b,O=x+b,D=this.top+d;else if(r==="left")x=_(this.right),w=this.right-d,T=x-b,R=_(t.left)+b,B=t.right;else if(r==="right")x=_(this.left),R=t.left,B=_(t.right)-b,w=x+b,T=this.left+d;else if(e==="x"){if(r==="center")x=_((t.top+t.bottom)/2+.5);else if(dt(r)){const N=Object.keys(r)[0],X=r[N];x=_(this.chart.scales[N].getPixelForValue(X))}W=t.top,Y=t.bottom,O=x+b,D=O+d}else if(e==="y"){if(r==="center")x=_((t.left+t.right)/2);else if(dt(r)){const N=Object.keys(r)[0],X=r[N];x=_(this.chart.scales[N].getPixelForValue(X))}w=x-b,T=w-d,R=t.left,B=t.right}const et=ht(s.ticks.maxTicksLimit,h),Q=Math.max(1,Math.ceil(h/et));for(M=0;M<h;M+=Q){const N=o.setContext(this.getContext(M)),X=N.lineWidth,K=N.color,St=N.borderDash||[],yt=N.borderDashOffset,Xt=N.tickWidth,xe=N.tickColor,ie=N.tickBorderDash||[],xt=N.tickBorderDashOffset;k=Gw(this,M,a),k!==void 0&&(v=ni(i,k,X),l?w=T=R=B=v:O=D=W=Y=v,f.push({tx1:w,ty1:O,tx2:T,ty2:D,x1:R,y1:W,x2:B,y2:Y,width:X,color:K,borderDash:St,borderDashOffset:yt,tickWidth:Xt,tickColor:xe,tickBorderDash:ie,tickBorderDashOffset:xt}))}return this._ticksLength=h,this._borderValue=x,f}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:o}=i,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=o,f=gs(i.grid),p=f+h,m=d?-h:p,b=-Ne(this.labelRotation),_=[];let x,M,k,v,w,O,T,D,R,W,B,Y,et="middle";if(s==="top")O=this.bottom-m,T=this._getXAxisLabelAlignment();else if(s==="bottom")O=this.top+m,T=this._getXAxisLabelAlignment();else if(s==="left"){const N=this._getYAxisLabelAlignment(f);T=N.textAlign,w=N.x}else if(s==="right"){const N=this._getYAxisLabelAlignment(f);T=N.textAlign,w=N.x}else if(e==="x"){if(s==="center")O=(t.top+t.bottom)/2+p;else if(dt(s)){const N=Object.keys(s)[0],X=s[N];O=this.chart.scales[N].getPixelForValue(X)+p}T=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")w=(t.left+t.right)/2-p;else if(dt(s)){const N=Object.keys(s)[0],X=s[N];w=this.chart.scales[N].getPixelForValue(X)}T=this._getYAxisLabelAlignment(f).textAlign}e==="y"&&(l==="start"?et="top":l==="end"&&(et="bottom"));const Q=this._getLabelSizes();for(x=0,M=a.length;x<M;++x){k=a[x],v=k.label;const N=o.setContext(this.getContext(x));D=this.getPixelForTick(x)+o.labelOffset,R=this._resolveTickFontOptions(x),W=R.lineHeight,B=It(v)?v.length:1;const X=B/2,K=N.color,St=N.textStrokeColor,yt=N.textStrokeWidth;let Xt=T;r?(w=D,T==="inner"&&(x===M-1?Xt=this.options.reverse?"left":"right":x===0?Xt=this.options.reverse?"right":"left":Xt="center"),s==="top"?c==="near"||b!==0?Y=-B*W+W/2:c==="center"?Y=-Q.highest.height/2-X*W+W:Y=-Q.highest.height+W/2:c==="near"||b!==0?Y=W/2:c==="center"?Y=Q.highest.height/2-X*W:Y=Q.highest.height-B*W,d&&(Y*=-1)):(O=D,Y=(1-B)*W/2);let xe;if(N.showLabelBackdrop){const ie=De(N.backdropPadding),xt=Q.heights[x],Gt=Q.widths[x];let qt=O+Y-ie.top,Lt=w-ie.left;switch(et){case"middle":qt-=xt/2;break;case"bottom":qt-=xt;break}switch(T){case"center":Lt-=Gt/2;break;case"right":Lt-=Gt;break}xe={left:Lt,top:qt,width:Gt+ie.width,height:xt+ie.height,color:N.backdropColor}}_.push({rotation:b,label:v,font:R,color:K,strokeColor:St,strokeWidth:yt,textOffset:Y,textAlign:Xt,textBaseline:et,translation:[w,O],backdrop:xe})}return _}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Ne(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),a=t+o,l=r.widest.width;let c,h;return e==="left"?s?(h=this.right+o,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):e==="right"?s?(h=this.left+o,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:o,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,o,r),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(o=>o.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,r;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(e.display)for(o=0,r=s.length;o<r;++o){const l=s[o];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:i}}=this,s=i.setContext(this.getContext()),o=i.drawBorder?s.borderWidth:0;if(!o)return;const r=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,h,d;this.isHorizontal()?(l=ni(t,this.left,o)-o/2,c=ni(t,this.right,r)+r/2,h=d=a):(h=ni(t,this.top,o)-o/2,d=ni(t,this.bottom,r)+r/2,l=c=a),e.save(),e.lineWidth=s.borderWidth,e.strokeStyle=s.borderColor,e.beginPath(),e.moveTo(l,h),e.lineTo(c,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&$g(i,s);const o=this._labelItems||(this._labelItems=this._computeLabelItems(t));let r,a;for(r=0,a=o.length;r<a;++r){const l=o[r],c=l.font,h=l.label;l.backdrop&&(i.fillStyle=l.backdrop.color,i.fillRect(l.backdrop.left,l.backdrop.top,l.backdrop.width,l.backdrop.height));let d=l.textOffset;Gr(i,h,0,d,c,l)}s&&Vg(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const o=Me(i.font),r=De(i.padding),a=i.align;let l=o.lineHeight/2;e==="bottom"||e==="center"||dt(e)?(l+=r.bottom,It(i.text)&&(l+=o.lineHeight*(i.text.length-1))):l+=r.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=Qw(this,l,e,a);Gr(t,i.text,0,0,o,{color:i.color,maxWidth:d,rotation:f,textAlign:Zw(a,e,s),textBaseline:"middle",translation:[c,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=ht(t.grid&&t.grid.z,-1);return!this._isVisible()||this.draw!==xi.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i+1,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let o,r;for(o=0,r=e.length;o<r;++o){const a=e[o];a[i]===this.id&&(!t||a.type===t)&&s.push(a)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return Me(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class dr{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;nM(e)&&(i=this.register(e));const s=this.items,o=t.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in s||(s[o]=t,tM(t,r,i),this.override&&ct.override(t.id,t.overrides)),r}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in ct[s]&&(delete ct[s][i],this.override&&delete _i[i])}}function tM(n,t,e){const i=io(Object.create(null),[e?ct.get(e):{},ct.get(t),n.defaults]);ct.set(t,i),n.defaultRoutes&&eM(t,n.defaultRoutes),n.descriptors&&ct.describe(t,n.descriptors)}function eM(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),o=[n].concat(i).join("."),r=t[e].split("."),a=r.pop(),l=r.join(".");ct.route(o,s,l,a)})}function nM(n){return"id"in n&&"defaults"in n}class iM{constructor(){this.controllers=new dr(Be,"datasets",!0),this.elements=new dr(mn,"elements"),this.plugins=new dr(Object,"plugins"),this.scales=new dr(xi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const o=i||this._getRegistryForType(s);i||o.isForType(s)||o===this.plugins&&s.id?this._exec(t,o,s):bt(s,r=>{const a=i||this._getRegistryForType(r);this._exec(t,a,r)})})}_exec(t,e,i){const s=lc(t);Bt(i["before"+s],[],i),e[t](i),Bt(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var Ye=new iM;class Sc extends Be{update(t){const e=this._cachedMeta,{data:i=[]}=e,s=this.chart._animationsDisabled;let{start:o,count:r}=Lg(e,i,s);if(this._drawStart=o,this._drawCount=r,Ig(e)&&(o=0,r=i.length),this.options.showLine){const{dataset:a,_dataset:l}=e;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},t)}this.updateElements(i,o,r,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=Ye.getElement("line")),super.addElements()}updateElements(t,e,i,s){const o=s==="reset",{iScale:r,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(e,s),d=this.getSharedOptions(h),f=this.includeOptions(s,d),p=r.axis,m=a.axis,{spanGaps:b,segment:_}=this.options,x=Ui(b)?b:Number.POSITIVE_INFINITY,M=this.chart._animationsDisabled||o||s==="none";let k=e>0&&this.getParsed(e-1);for(let v=e;v<e+i;++v){const w=t[v],O=this.getParsed(v),T=M?w:{},D=_t(O[m]),R=T[p]=r.getPixelForValue(O[p],v),W=T[m]=o||D?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[m],v);T.skip=isNaN(R)||isNaN(W)||D,T.stop=v>0&&Math.abs(O[p]-k[p])>x,_&&(T.parsed=O,T.raw=c.data[v]),f&&(T.options=d||this.resolveDataElementOptions(v,w.active?"active":s)),M||this.updateElement(w,v,T,s),k=O}this.updateSharedOptions(d,s,h)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let a=0;for(let l=e.length-1;l>=0;--l)a=Math.max(a,e[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!e.length)return s;const o=e[0].size(this.resolveDataElementOptions(0)),r=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(s,o,r)/2}}Sc.id="scatter";Sc.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};Sc.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(n){return"("+n.label+", "+n.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};function ii(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class El{constructor(t){this.options=t||{}}init(t){}formats(){return ii()}parse(t,e){return ii()}format(t,e){return ii()}add(t,e,i){return ii()}diff(t,e,i){return ii()}startOf(t,e,i){return ii()}endOf(t,e){return ii()}}El.override=function(n){Object.assign(El.prototype,n)};var sM={_date:El};function oM(n,t,e,i){const{controller:s,data:o,_sorted:r}=n,a=s._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&r&&o.length){const l=a._reversePixels?jv:ui;if(i){if(s._sharedOptions){const c=o[0],h=typeof c.getRange=="function"&&c.getRange(t);if(h){const d=l(o,t,e-h),f=l(o,t,e+h);return{lo:d.lo,hi:f.hi}}}}else return l(o,t,e)}return{lo:0,hi:o.length-1}}function po(n,t,e,i,s){const o=n.getSortedVisibleDatasetMetas(),r=e[t];for(let a=0,l=o.length;a<l;++a){const{index:c,data:h}=o[a],{lo:d,hi:f}=oM(o[a],t,r,s);for(let p=d;p<=f;++p){const m=h[p];m.skip||i(m,c,p)}}}function rM(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const o=t?Math.abs(i.x-s.x):0,r=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function ol(n,t,e,i,s){const o=[];return!s&&!n.isPointInArea(t)||po(n,e,t,function(a,l,c){!s&&!oo(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function aM(n,t,e,i){let s=[];function o(r,a,l){const{startAngle:c,endAngle:h}=r.getProps(["startAngle","endAngle"],i),{angle:d}=Og(r,{x:t.x,y:t.y});so(d,c,h)&&s.push({element:r,datasetIndex:a,index:l})}return po(n,e,t,o),s}function lM(n,t,e,i,s,o){let r=[];const a=rM(e);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const p=h.inRange(t.x,t.y,s);if(i&&!p)return;const m=h.getCenterPoint(s);if(!(!!o||n.isPointInArea(m))&&!p)return;const _=a(t,m);_<l?(r=[{element:h,datasetIndex:d,index:f}],l=_):_===l&&r.push({element:h,datasetIndex:d,index:f})}return po(n,e,t,c),r}function rl(n,t,e,i,s,o){return!o&&!n.isPointInArea(t)?[]:e==="r"&&!i?aM(n,t,e,s):lM(n,t,e,i,s,o)}function Dd(n,t,e,i,s){const o=[],r=e==="x"?"inXRange":"inYRange";let a=!1;return po(n,e,t,(l,c,h)=>{l[r](t[e],s)&&(o.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(t.x,t.y,s))}),i&&!a?[]:o}var cM={evaluateInteractionItems:po,modes:{index(n,t,e,i){const s=ri(t,n),o=e.axis||"x",r=e.includeInvisible||!1,a=e.intersect?ol(n,s,o,i,r):rl(n,s,o,!1,i,r),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(n,t,e,i){const s=ri(t,n),o=e.axis||"xy",r=e.includeInvisible||!1;let a=e.intersect?ol(n,s,o,i,r):rl(n,s,o,!1,i,r);if(a.length>0){const l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(n,t,e,i){const s=ri(t,n),o=e.axis||"xy",r=e.includeInvisible||!1;return ol(n,s,o,i,r)},nearest(n,t,e,i){const s=ri(t,n),o=e.axis||"xy",r=e.includeInvisible||!1;return rl(n,s,o,e.intersect,i,r)},x(n,t,e,i){const s=ri(t,n);return Dd(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=ri(t,n);return Dd(n,s,"y",e.intersect,i)}}};const np=["left","top","right","bottom"];function ps(n,t){return n.filter(e=>e.pos===t)}function Ld(n,t){return n.filter(e=>np.indexOf(e.pos)===-1&&e.box.axis===t)}function ms(n,t){return n.sort((e,i)=>{const s=t?i:e,o=t?e:i;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function hM(n){const t=[];let e,i,s,o,r,a;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:o,options:{stack:r,stackWeight:a=1}}=s,t.push({index:e,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:a});return t}function uM(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:o}=e;if(!i||!np.includes(s))continue;const r=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function dM(n,t){const e=uM(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let o,r,a;for(o=0,r=n.length;o<r;++o){a=n[o];const{fullSize:l}=a.box,c=e[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&t.availableWidth,a.height=s):(a.width=i,a.height=h?h*s:l&&t.availableHeight)}return e}function fM(n){const t=hM(n),e=ms(t.filter(c=>c.box.fullSize),!0),i=ms(ps(t,"left"),!0),s=ms(ps(t,"right")),o=ms(ps(t,"top"),!0),r=ms(ps(t,"bottom")),a=Ld(t,"x"),l=Ld(t,"y");return{fullSize:e,leftAndTop:i.concat(o),rightAndBottom:s.concat(l).concat(r).concat(a),chartArea:ps(t,"chartArea"),vertical:i.concat(s).concat(l),horizontal:o.concat(r).concat(a)}}function Id(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function ip(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function gM(n,t,e,i){const{pos:s,box:o}=e,r=n.maxPadding;if(!dt(s)){e.size&&(n[s]-=e.size);const d=i[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?o.height:o.width),e.size=d.size/d.count,n[s]+=e.size}o.getPadding&&ip(r,o.getPadding());const a=Math.max(0,t.outerWidth-Id(r,n,"left","right")),l=Math.max(0,t.outerHeight-Id(r,n,"top","bottom")),c=a!==n.w,h=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:h}:{same:h,other:c}}function pM(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function mM(n,t){const e=t.maxPadding;function i(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(t[r],e[r])}),o}return i(n?["left","right"]:["top","bottom"])}function zs(n,t,e,i){const s=[];let o,r,a,l,c,h;for(o=0,r=n.length,c=0;o<r;++o){a=n[o],l=a.box,l.update(a.width||t.w,a.height||t.h,mM(a.horizontal,t));const{same:d,other:f}=gM(t,e,a,i);c|=d&&s.length,h=h||f,l.fullSize||s.push(a)}return c&&zs(s,t,e,i)||h}function fr(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function Rd(n,t,e,i){const s=e.padding;let{x:o,y:r}=t;for(const a of n){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=t.w*h,f=c.size||l.height;Ae(c.start)&&(r=c.start),l.fullSize?fr(l,s.left,r,e.outerWidth-s.right-s.left,f):fr(l,t.left+c.placed,r,d,f),c.start=r,c.placed+=d,r=l.bottom}else{const d=t.h*h,f=c.size||l.width;Ae(c.start)&&(o=c.start),l.fullSize?fr(l,o,s.top,f,e.outerHeight-s.bottom-s.top):fr(l,o,t.top+c.placed,f,d),c.start=o,c.placed+=d,o=l.right}}t.x=o,t.y=r}ct.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var gr={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=De(n.options.layout.padding),o=Math.max(t-s.width,0),r=Math.max(e-s.height,0),a=fM(n.boxes),l=a.vertical,c=a.horizontal;bt(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const h=l.reduce((b,_)=>_.box.options&&_.box.options.display===!1?b:b+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/h,hBoxMaxHeight:r/2}),f=Object.assign({},s);ip(f,De(i));const p=Object.assign({maxPadding:f,w:o,h:r,x:s.left,y:s.top},s),m=dM(l.concat(c),d);zs(a.fullSize,p,d,m),zs(l,p,d,m),zs(c,p,d,m)&&zs(l,p,d,m),pM(p),Rd(a.leftAndTop,p,d,m),p.x+=p.w,p.y+=p.h,Rd(a.rightAndBottom,p,d,m),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},bt(a.chartArea,b=>{const _=b.box;Object.assign(_,n.chartArea),_.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class sp{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class bM extends sp{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Tr="$chartjs",_M={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Fd=n=>n===null||n==="";function yM(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Tr]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Fd(s)){const o=gd(n,"width");o!==void 0&&(n.width=o)}if(Fd(i))if(n.style.height==="")n.height=n.width/(t||2);else{const o=gd(n,"height");o!==void 0&&(n.height=o)}return n}const op=K1?{passive:!0}:!1;function xM(n,t,e){n.addEventListener(t,e,op)}function vM(n,t,e){n.canvas.removeEventListener(t,e,op)}function wM(n,t){const e=_M[n.type]||n.type,{x:i,y:s}=ri(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Jr(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function MM(n,t,e){const i=n.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||Jr(a.addedNodes,i),r=r&&!Jr(a.removedNodes,i);r&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function SM(n,t,e){const i=n.canvas,s=new MutationObserver(o=>{let r=!1;for(const a of o)r=r||Jr(a.removedNodes,i),r=r&&!Jr(a.addedNodes,i);r&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const ro=new Map;let Nd=0;function rp(){const n=window.devicePixelRatio;n!==Nd&&(Nd=n,ro.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function kM(n,t){ro.size||window.addEventListener("resize",rp),ro.set(n,t)}function CM(n){ro.delete(n),ro.size||window.removeEventListener("resize",rp)}function PM(n,t,e){const i=n.canvas,s=i&&_c(i);if(!s)return;const o=Dg((a,l)=>{const c=s.clientWidth;e(a,l),c<s.clientWidth&&e()},window),r=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||o(c,h)});return r.observe(s),kM(n,o),r}function al(n,t,e){e&&e.disconnect(),t==="resize"&&CM(n)}function OM(n,t,e){const i=n.canvas,s=Dg(o=>{n.ctx!==null&&e(wM(o,n))},n,o=>{const r=o[0];return[r,r.offsetX,r.offsetY]});return xM(i,t,s),s}class EM extends sp{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(yM(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Tr])return!1;const i=e[Tr].initial;["height","width"].forEach(o=>{const r=i[o];_t(r)?e.removeAttribute(o):e.setAttribute(o,r)});const s=i.style||{};return Object.keys(s).forEach(o=>{e.style[o]=s[o]}),e.width=e.width,delete e[Tr],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),r={attach:MM,detach:SM,resize:PM}[e]||OM;s[e]=r(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:al,detach:al,resize:al}[e]||vM)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return q1(t,e,i,s)}isAttached(t){const e=_c(t);return!!(e&&e.isConnected)}}function TM(n){return!qg()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?bM:EM}class AM{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const o=s?this._descriptors(t).filter(s):this._descriptors(t),r=this._notify(o,t,e,i);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall")),r}_notify(t,e,i,s){s=s||{};for(const o of t){const r=o.plugin,a=r[i],l=[e,s,o.options];if(Bt(a,l,r)===!1&&s.cancelable)return!1}return!0}invalidate(){_t(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=ht(i.options&&i.options.plugins,{}),o=DM(i);return s===!1&&!e?[]:IM(t,o,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(o,r)=>o.filter(a=>!r.some(l=>a.plugin.id===l.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function DM(n){const t={},e=[],i=Object.keys(Ye.plugins.items);for(let o=0;o<i.length;o++)e.push(Ye.getPlugin(i[o]));const s=n.plugins||[];for(let o=0;o<s.length;o++){const r=s[o];e.indexOf(r)===-1&&(e.push(r),t[r.id]=!0)}return{plugins:e,localIds:t}}function LM(n,t){return!t&&n===!1?null:n===!0?{}:n}function IM(n,{plugins:t,localIds:e},i,s){const o=[],r=n.getContext();for(const a of t){const l=a.id,c=LM(i[l],s);c!==null&&o.push({plugin:a,options:RM(n.config,{plugin:a,local:e[l]},c,r)})}return o}function RM(n,{plugin:t,local:e},i,s){const o=n.pluginScopeKeys(t),r=n.getOptionScopes(i,o);return e&&t.defaults&&r.push(t.defaults),n.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Tl(n,t){const e=ct.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function FM(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function NM(n,t){return n===t?"_index_":"_value_"}function BM(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Al(n,t){return n==="x"||n==="y"?n:t.axis||BM(t.position)||n.charAt(0).toLowerCase()}function zM(n,t){const e=_i[n.type]||{scales:{}},i=t.scales||{},s=Tl(n.type,t),o=Object.create(null),r=Object.create(null);return Object.keys(i).forEach(a=>{const l=i[a];if(!dt(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=Al(a,l),h=NM(c,s),d=e.scales||{};o[c]=o[c]||a,r[a]=Xs(Object.create(null),[{axis:c},l,d[c],d[h]])}),n.data.datasets.forEach(a=>{const l=a.type||n.type,c=a.indexAxis||Tl(l,t),d=(_i[l]||{}).scales||{};Object.keys(d).forEach(f=>{const p=FM(f,c),m=a[p+"AxisID"]||o[p]||p;r[m]=r[m]||Object.create(null),Xs(r[m],[{axis:p},i[m],d[f]])})}),Object.keys(r).forEach(a=>{const l=r[a];Xs(l,[ct.scales[l.type],ct.scale])}),r}function ap(n){const t=n.options||(n.options={});t.plugins=ht(t.plugins,{}),t.scales=zM(n,t)}function lp(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function $M(n){return n=n||{},n.data=lp(n.data),ap(n),n}const Bd=new Map,cp=new Set;function pr(n,t){let e=Bd.get(n);return e||(e=t(),Bd.set(n,e),cp.add(e)),e}const bs=(n,t,e)=>{const i=Bn(t,e);i!==void 0&&n.add(i)};class VM{constructor(t){this._config=$M(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=lp(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),ap(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return pr(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return pr(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return pr(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return pr(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:o}=this,r=this._cachedScopes(t,i),a=r.get(e);if(a)return a;const l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(d=>bs(l,t,d))),h.forEach(d=>bs(l,s,d)),h.forEach(d=>bs(l,_i[o]||{},d)),h.forEach(d=>bs(l,ct,d)),h.forEach(d=>bs(l,Pl,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),cp.has(e)&&r.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,_i[e]||{},ct.datasets[e]||{},{type:e},ct,Pl]}resolveNamedOptions(t,e,i,s=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=zd(this._resolverCache,t,s);let l=r;if(WM(r,e)){o.$shared=!1,i=zn(i)?i():i;const c=this.createResolver(t,i,a);l=Yi(r,i,c)}for(const c of e)o[c]=l[c];return o}createResolver(t,e,i=[""],s){const{resolver:o}=zd(this._resolverCache,t,i);return dt(e)?Yi(o,e,void 0,s):o}}function zd(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let o=i.get(s);return o||(o={resolver:pc(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,o)),o}const jM=n=>dt(n)&&Object.getOwnPropertyNames(n).reduce((t,e)=>t||zn(n[e]),!1);function WM(n,t){const{isScriptable:e,isIndexable:i}=Wg(n);for(const s of t){const o=e(s),r=i(s),a=(r||o)&&n[s];if(o&&(zn(a)||jM(a))||r&&It(a))return!0}return!1}var HM="3.9.1";const UM=["top","bottom","left","right","chartArea"];function $d(n,t){return n==="top"||n==="bottom"||UM.indexOf(n)===-1&&t==="x"}function Vd(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function jd(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Bt(e&&e.onComplete,[n],t)}function YM(n){const t=n.chart,e=t.options.animation;Bt(e&&e.onProgress,[n],t)}function hp(n){return qg()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Zr={},up=n=>{const t=hp(n);return Object.values(Zr).filter(e=>e.canvas===t).pop()};function XM(n,t,e){const i=Object.keys(n);for(const s of i){const o=+s;if(o>=t){const r=n[s];delete n[s],(e>0||o>t)&&(n[o+e]=r)}}}function GM(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}class kc{constructor(t,e){const i=this.config=new VM(e),s=hp(t),o=up(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||TM(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,r.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=Ev(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new AM,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Uv(d=>this.update(d),r.resizeDelay||0),this._dataChanges=[],Zr[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}on.listen(this,"complete",jd),on.listen(this,"progress",YM),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:o}=this;return _t(t)?e&&o?o:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():fd(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return hd(this.canvas,this.ctx),this}stop(){return on.stop(this),this}resize(t,e){on.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,t,e,o),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,fd(this,a,!0)&&(this.notifyPlugins("resize",{size:r}),Bt(i.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};bt(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((r,a)=>(r[a]=!1,r),{});let o=[];e&&(o=o.concat(Object.keys(e).map(r=>{const a=e[r],l=Al(r,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),bt(o,r=>{const a=r.options,l=a.id,c=Al(l,a),h=ht(a.type,r.dtype);(a.position===void 0||$d(a.position,c)!==$d(r.dposition))&&(a.position=r.dposition),s[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=Ye.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,t)}),bt(s,(r,a)=>{r||delete i[a]}),bt(i,r=>{gr.configure(this,r,r.options),gr.addBox(this,r)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,o)=>s.index-o.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(Vd("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const o=e[i];let r=this.getDatasetMeta(i);const a=o.type||this.config.type;if(r.type&&r.type!==a&&(this._destroyDatasetMeta(i),r=this.getDatasetMeta(i)),r.type=a,r.indexAxis=o.indexAxis||Tl(a,this.options),r.order=o.order||0,r.index=i,r.label=""+o.label,r.visible=this.isDatasetVisible(i),r.controller)r.controller.updateIndex(i),r.controller.linkScales();else{const l=Ye.getController(a),{datasetElementType:c,dataElementType:h}=ct.datasets[a];Object.assign(l.prototype,{dataElementType:Ye.getElement(h),datasetElementType:c&&Ye.getElement(c)}),r.controller=new l(this,i),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){bt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!s&&o.indexOf(d)===-1;d.buildOrUpdateElements(f),r=Math.max(+d.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),s||bt(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Vd("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){bt(this.scales,t=>{gr.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Ju(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:o}of e){const r=i==="_removeElements"?-o:o;XM(t,s,r)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=o=>new Set(t.filter(r=>r[0]===o).map((r,a)=>a+","+r.splice(1).join(","))),s=i(0);for(let o=1;o<e;o++)if(!Ju(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;gr.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],bt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,zn(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(on.has(this)?this.attached&&!on.running(this)&&on.start(this):(this.draw(),jd({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,o;for(s=0,o=e.length;s<o;++s){const r=e[s];(!t||r.visible)&&i.push(r)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,s=!i.disabled,o=this.chartArea,r={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&$g(e,{left:i.left===!1?0:o.left-i.left,right:i.right===!1?this.width:o.right+i.right,top:i.top===!1?0:o.top-i.top,bottom:i.bottom===!1?this.height:o.bottom+i.bottom}),t.controller.draw(),s&&Vg(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return oo(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const o=cM.modes[e];return typeof o=="function"?o(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(o=>o&&o._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=jn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",o=this.getDatasetMeta(t),r=o.controller._resolveAnimations(void 0,s);Ae(e)?(o.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),r.update(o,{visible:i}),this.update(a=>a.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),on.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),hd(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete Zr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(o,r)=>{e.addEventListener(this,o,r),t[o]=r},s=(o,r,a)=>{o.offsetX=r,o.offsetY=a,this._eventHandler(o)};bt(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},s=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let r;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",o),i("detach",r)};r=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():r()}unbindEvents(){bt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},bt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let o,r,a,l;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){r=t[a];const c=r&&this.getDatasetMeta(r.datasetIndex).controller;c&&c[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:o,index:r})=>{const a=this.getDatasetMeta(o);if(!a)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:a.data[r],index:r}});!jr(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}_updateHoverStyles(t,e,i){const s=this.options.hover,o=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),r=o(e,t),a=i?t:o(t,e);r.length&&this.updateHoverStyle(r,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=r=>(r.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const o=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:o}=this,r=e,a=this._getActiveElements(t,s,i,r),l=Rv(t),c=GM(t,this._lastEvent,i,l);i&&(this._lastEvent=null,Bt(o.onHover,[t,a,this],this),l&&Bt(o.onClick,[t,a,this],this));const h=!jr(a,s);return(h||e)&&(this._active=a,this._updateHoverStyles(a,s,e)),this._lastEvent=c,h}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}const Wd=()=>bt(kc.instances,n=>n._plugins.invalidate()),Mn=!0;Object.defineProperties(kc,{defaults:{enumerable:Mn,value:ct},instances:{enumerable:Mn,value:Zr},overrides:{enumerable:Mn,value:_i},registry:{enumerable:Mn,value:Ye},version:{enumerable:Mn,value:HM},getChart:{enumerable:Mn,value:up},register:{enumerable:Mn,value:(...n)=>{Ye.add(...n),Wd()}},unregister:{enumerable:Mn,value:(...n)=>{Ye.remove(...n),Wd()}}});function dp(n,t,e){const{startAngle:i,pixelMargin:s,x:o,y:r,outerRadius:a,innerRadius:l}=t;let c=s/a;n.beginPath(),n.arc(o,r,a,i-c,e+c),l>s?(c=s/l,n.arc(o,r,l,e+c,i-c,!0)):n.arc(o,r,s,e+Vt,i-Vt),n.closePath(),n.clip()}function qM(n){return gc(n,["outerStart","outerEnd","innerStart","innerEnd"])}function KM(n,t,e,i){const s=qM(n.options.borderRadius),o=(e-t)/2,r=Math.min(o,i*t/2),a=l=>{const c=(e-Math.min(o,l))*i/2;return ae(l,0,Math.min(o,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:ae(s.innerStart,0,r),innerEnd:ae(s.innerEnd,0,r)}}function Ai(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Dl(n,t,e,i,s,o){const{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=t,d=Math.max(t.outerRadius+i+e-c,0),f=h>0?h+i+e+c:0;let p=0;const m=s-l;if(i){const N=h>0?h-i:0,X=d>0?d-i:0,K=(N+X)/2,St=K!==0?m*K/(K+i):m;p=(m-St)/2}const b=Math.max(.001,m*d-e/jt)/d,_=(m-b)/2,x=l+_+p,M=s-_-p,{outerStart:k,outerEnd:v,innerStart:w,innerEnd:O}=KM(t,f,d,M-x),T=d-k,D=d-v,R=x+k/T,W=M-v/D,B=f+w,Y=f+O,et=x+w/B,Q=M-O/Y;if(n.beginPath(),o){if(n.arc(r,a,d,R,W),v>0){const K=Ai(D,W,r,a);n.arc(K.x,K.y,v,W,M+Vt)}const N=Ai(Y,M,r,a);if(n.lineTo(N.x,N.y),O>0){const K=Ai(Y,Q,r,a);n.arc(K.x,K.y,O,M+Vt,Q+Math.PI)}if(n.arc(r,a,f,M-O/f,x+w/f,!0),w>0){const K=Ai(B,et,r,a);n.arc(K.x,K.y,w,et+Math.PI,x-Vt)}const X=Ai(T,x,r,a);if(n.lineTo(X.x,X.y),k>0){const K=Ai(T,R,r,a);n.arc(K.x,K.y,k,x-Vt,R)}}else{n.moveTo(r,a);const N=Math.cos(R)*d+r,X=Math.sin(R)*d+a;n.lineTo(N,X);const K=Math.cos(W)*d+r,St=Math.sin(W)*d+a;n.lineTo(K,St)}n.closePath()}function JM(n,t,e,i,s){const{fullCircles:o,startAngle:r,circumference:a}=t;let l=t.endAngle;if(o){Dl(n,t,e,i,r+wt,s);for(let c=0;c<o;++c)n.fill();isNaN(a)||(l=r+a%wt,a%wt===0&&(l+=wt))}return Dl(n,t,e,i,l,s),n.fill(),l}function ZM(n,t,e){const{x:i,y:s,startAngle:o,pixelMargin:r,fullCircles:a}=t,l=Math.max(t.outerRadius-r,0),c=t.innerRadius+r;let h;for(e&&dp(n,t,o+wt),n.beginPath(),n.arc(i,s,c,o+wt,o,!0),h=0;h<a;++h)n.stroke();for(n.beginPath(),n.arc(i,s,l,o,o+wt),h=0;h<a;++h)n.stroke()}function QM(n,t,e,i,s,o){const{options:r}=t,{borderWidth:a,borderJoinStyle:l}=r,c=r.borderAlign==="inner";a&&(c?(n.lineWidth=a*2,n.lineJoin=l||"round"):(n.lineWidth=a,n.lineJoin=l||"bevel"),t.fullCircles&&ZM(n,t,c),c&&dp(n,t,s),Dl(n,t,e,i,s,o),n.stroke())}class Cc extends mn{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.getProps(["x","y"],i),{angle:o,distance:r}=Og(s,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=this.options.spacing/2,m=ht(d,l-a)>=wt||so(o,a,l),b=Ur(r,c+f,h+f);return m&&b}getCenterPoint(t){const{x:e,y:i,startAngle:s,endAngle:o,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:l,spacing:c}=this.options,h=(s+o)/2,d=(r+a+c+l)/2;return{x:e+Math.cos(h)*d,y:i+Math.sin(h)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,s=(e.offset||0)/2,o=(e.spacing||0)/2,r=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=i>wt?Math.floor(i/wt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=0;if(s){a=s/2;const c=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(c)*a,Math.sin(c)*a),this.circumference>=jt&&(a=s)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const l=JM(t,this,a,o,r);QM(t,this,a,o,l,r),t.restore()}}Cc.id="arc";Cc.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};Cc.defaultRoutes={backgroundColor:"backgroundColor"};function fp(n,t,e=t){n.lineCap=ht(e.borderCapStyle,t.borderCapStyle),n.setLineDash(ht(e.borderDash,t.borderDash)),n.lineDashOffset=ht(e.borderDashOffset,t.borderDashOffset),n.lineJoin=ht(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=ht(e.borderWidth,t.borderWidth),n.strokeStyle=ht(e.borderColor,t.borderColor)}function tS(n,t,e){n.lineTo(e.x,e.y)}function eS(n){return n.stepped?y1:n.tension||n.cubicInterpolationMode==="monotone"?x1:tS}function gp(n,t,e={}){const i=n.length,{start:s=0,end:o=i-1}=e,{start:r,end:a}=t,l=Math.max(s,r),c=Math.min(o,a),h=s<r&&o<r||s>a&&o>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!h?i+c-l:c-l}}function nS(n,t,e,i){const{points:s,options:o}=t,{count:r,start:a,loop:l,ilen:c}=gp(s,e,i),h=eS(o);let{move:d=!0,reverse:f}=i||{},p,m,b;for(p=0;p<=c;++p)m=s[(a+(f?c-p:p))%r],!m.skip&&(d?(n.moveTo(m.x,m.y),d=!1):h(n,b,m,f,o.stepped),b=m);return l&&(m=s[(a+(f?c:0))%r],h(n,b,m,f,o.stepped)),!!l}function iS(n,t,e,i){const s=t.points,{count:o,start:r,ilen:a}=gp(s,e,i),{move:l=!0,reverse:c}=i||{};let h=0,d=0,f,p,m,b,_,x;const M=v=>(r+(c?a-v:v))%o,k=()=>{b!==_&&(n.lineTo(h,_),n.lineTo(h,b),n.lineTo(h,x))};for(l&&(p=s[M(0)],n.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=s[M(f)],p.skip)continue;const v=p.x,w=p.y,O=v|0;O===m?(w<b?b=w:w>_&&(_=w),h=(d*h+v)/++d):(k(),n.lineTo(v,w),m=O,d=0,b=_=w),x=w}k()}function Ll(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?iS:nS}function sS(n){return n.stepped?J1:n.tension||n.cubicInterpolationMode==="monotone"?Z1:ai}function oS(n,t,e,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,i)&&s.closePath()),fp(n,t.options),n.stroke(s)}function rS(n,t,e,i){const{segments:s,options:o}=t,r=Ll(t);for(const a of s)fp(n,o,a.style),n.beginPath(),r(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const aS=typeof Path2D=="function";function lS(n,t,e,i){aS&&!t.options.segment?oS(n,t,e,i):rS(n,t,e,i)}class da extends mn{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;W1(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=cw(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],o=this.points,r=rw(this,{property:e,start:s,end:s});if(!r.length)return;const a=[],l=sS(i);let c,h;for(c=0,h=r.length;c<h;++c){const{start:d,end:f}=r[c],p=o[d],m=o[f];if(p===m){a.push(p);continue}const b=Math.abs((s-p[e])/(m[e]-p[e])),_=l(p,m,b,i.stepped);_[e]=t[e],a.push(_)}return a.length===1?a[0]:a}pathSegment(t,e,i){return Ll(this)(t,this,e,i)}path(t,e,i){const s=this.segments,o=Ll(this);let r=this._loop;e=e||0,i=i||this.points.length-e;for(const a of s)r&=o(t,this,a,{start:e,end:e+i-1});return!!r}draw(t,e,i,s){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),lS(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}da.id="line";da.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};da.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};da.descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"&&n!=="fill"};function Hd(n,t,e,i){const s=n.options,{[e]:o}=n.getProps([e],i);return Math.abs(t-o)<s.radius+s.hitRadius}class Pc extends mn{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.options,{x:o,y:r}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(e-r,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,e){return Hd(this,t,"x",e)}inYRange(t,e){return Hd(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const i=e&&t.borderWidth||0;return(e+i)*2}draw(t,e){const i=this.options;this.skip||i.radius<.1||!oo(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,Ol(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}Pc.id="point";Pc.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};Pc.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function pp(n,t){const{x:e,y:i,base:s,width:o,height:r}=n.getProps(["x","y","base","width","height"],t);let a,l,c,h,d;return n.horizontal?(d=r/2,a=Math.min(e,s),l=Math.max(e,s),c=i-d,h=i+d):(d=o/2,a=e-d,l=e+d,c=Math.min(i,s),h=Math.max(i,s)),{left:a,top:c,right:l,bottom:h}}function Dn(n,t,e,i){return n?0:ae(t,e,i)}function cS(n,t,e){const i=n.options.borderWidth,s=n.borderSkipped,o=jg(i);return{t:Dn(s.top,o.top,0,e),r:Dn(s.right,o.right,0,t),b:Dn(s.bottom,o.bottom,0,e),l:Dn(s.left,o.left,0,t)}}function hS(n,t,e){const{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,o=$i(s),r=Math.min(t,e),a=n.borderSkipped,l=i||dt(s);return{topLeft:Dn(!l||a.top||a.left,o.topLeft,0,r),topRight:Dn(!l||a.top||a.right,o.topRight,0,r),bottomLeft:Dn(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:Dn(!l||a.bottom||a.right,o.bottomRight,0,r)}}function uS(n){const t=pp(n),e=t.right-t.left,i=t.bottom-t.top,s=cS(n,e/2,i/2),o=hS(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:o},inner:{x:t.left+s.l,y:t.top+s.t,w:e-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function ll(n,t,e,i){const s=t===null,o=e===null,a=n&&!(s&&o)&&pp(n,i);return a&&(s||Ur(t,a.left,a.right))&&(o||Ur(e,a.top,a.bottom))}function dS(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function fS(n,t){n.rect(t.x,t.y,t.w,t.h)}function cl(n,t,e={}){const i=n.x!==e.x?-t:0,s=n.y!==e.y?-t:0,o=(n.x+n.w!==e.x+e.w?t:0)-i,r=(n.y+n.h!==e.y+e.h?t:0)-s;return{x:n.x+i,y:n.y+s,w:n.w+o,h:n.h+r,radius:n.radius}}class Oc extends mn{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:o,outer:r}=uS(this),a=dS(r.radius)?qr:fS;t.save(),(r.w!==o.w||r.h!==o.h)&&(t.beginPath(),a(t,cl(r,e,o)),t.clip(),a(t,cl(o,-e,r)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,cl(o,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return ll(this,t,e,i)}inXRange(t,e){return ll(this,t,null,e)}inYRange(t,e){return ll(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+s)/2:e,y:o?i:(i+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}Oc.id="bar";Oc.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};Oc.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};const Ar={average(n){if(!n.length)return!1;let t,e,i=0,s=0,o=0;for(t=0,e=n.length;t<e;++t){const r=n[t].element;if(r&&r.hasValue()){const a=r.tooltipPosition();i+=a.x,s+=a.y,++o}}return{x:i/o,y:s/o}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=n.length;o<r;++o){const l=n[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=kl(t,c);h<s&&(s=h,a=l)}}if(a){const l=a.tooltipPosition();e=l.x,i=l.y}return{x:e,y:i}}};function We(n,t){return t&&(It(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function rn(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function gS(n,t){const{element:e,datasetIndex:i,index:s}=t,o=n.getDatasetMeta(i).controller,{label:r,value:a}=o.getLabelAndValue(s);return{chart:n,label:r,parsed:o.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:a,dataset:o.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function Ud(n,t){const e=n.chart.ctx,{body:i,footer:s,title:o}=n,{boxWidth:r,boxHeight:a}=t,l=Me(t.bodyFont),c=Me(t.titleFont),h=Me(t.footerFont),d=o.length,f=s.length,p=i.length,m=De(t.padding);let b=m.height,_=0,x=i.reduce((v,w)=>v+w.before.length+w.lines.length+w.after.length,0);if(x+=n.beforeBody.length+n.afterBody.length,d&&(b+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),x){const v=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=p*v+(x-p)*l.lineHeight+(x-1)*t.bodySpacing}f&&(b+=t.footerMarginTop+f*h.lineHeight+(f-1)*t.footerSpacing);let M=0;const k=function(v){_=Math.max(_,e.measureText(v).width+M)};return e.save(),e.font=c.string,bt(n.title,k),e.font=l.string,bt(n.beforeBody.concat(n.afterBody),k),M=t.displayColors?r+2+t.boxPadding:0,bt(i,v=>{bt(v.before,k),bt(v.lines,k),bt(v.after,k)}),M=0,e.font=h.string,bt(n.footer,k),e.restore(),_+=m.width,{width:_,height:b}}function pS(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function mS(n,t,e,i){const{x:s,width:o}=i,r=e.caretSize+e.caretPadding;if(n==="left"&&s+o+r>t.width||n==="right"&&s-o-r<0)return!0}function bS(n,t,e,i){const{x:s,width:o}=e,{width:r,chartArea:{left:a,right:l}}=n;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=o/2?c="left":s>=r-o/2&&(c="right"),mS(c,n,t,e)&&(c="center"),c}function Yd(n,t,e){const i=e.yAlign||t.yAlign||pS(n,e);return{xAlign:e.xAlign||t.xAlign||bS(n,t,e,i),yAlign:i}}function _S(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function yS(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function Xd(n,t,e,i){const{caretSize:s,caretPadding:o,cornerRadius:r}=n,{xAlign:a,yAlign:l}=e,c=s+o,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=$i(r);let m=_S(t,a);const b=yS(t,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(h,f)+s:a==="right"&&(m+=Math.max(d,p)+s),{x:ae(m,0,i.width-t.width),y:ae(b,0,i.height-t.height)}}function mr(n,t,e){const i=De(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function Gd(n){return We([],rn(n))}function xS(n,t,e){return jn(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function qd(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}class vS extends mn{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,o=new Jg(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=xS(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=i.beforeTitle.apply(this,[t]),o=i.title.apply(this,[t]),r=i.afterTitle.apply(this,[t]);let a=[];return a=We(a,rn(s)),a=We(a,rn(o)),a=We(a,rn(r)),a}getBeforeBody(t,e){return Gd(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const{callbacks:i}=e,s=[];return bt(t,o=>{const r={before:[],lines:[],after:[]},a=qd(i,o);We(r.before,rn(a.beforeLabel.call(this,o))),We(r.lines,a.label.call(this,o)),We(r.after,rn(a.afterLabel.call(this,o))),s.push(r)}),s}getAfterBody(t,e){return Gd(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const{callbacks:i}=e,s=i.beforeFooter.apply(this,[t]),o=i.footer.apply(this,[t]),r=i.afterFooter.apply(this,[t]);let a=[];return a=We(a,rn(s)),a=We(a,rn(o)),a=We(a,rn(r)),a}_createItems(t){const e=this._active,i=this.chart.data,s=[],o=[],r=[];let a=[],l,c;for(l=0,c=e.length;l<c;++l)a.push(gS(this.chart,e[l]));return t.filter&&(a=a.filter((h,d,f)=>t.filter(h,d,f,i))),t.itemSort&&(a=a.sort((h,d)=>t.itemSort(h,d,i))),bt(a,h=>{const d=qd(t.callbacks,h);s.push(d.labelColor.call(this,h)),o.push(d.labelPointStyle.call(this,h)),r.push(d.labelTextColor.call(this,h))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=a,a}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let o,r=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const a=Ar[i.position].call(this,s,this._eventPosition);r=this._createItems(i),this.title=this.getTitle(r,i),this.beforeBody=this.getBeforeBody(r,i),this.body=this.getBody(r,i),this.afterBody=this.getAfterBody(r,i),this.footer=this.getFooter(r,i);const l=this._size=Ud(this,i),c=Object.assign({},a,l),h=Yd(this.chart,i,c),d=Xd(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const o=this.getCaretPosition(t,i,s);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:o}=this,{caretSize:r,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=$i(a),{x:f,y:p}=t,{width:m,height:b}=e;let _,x,M,k,v,w;return o==="center"?(v=p+b/2,s==="left"?(_=f,x=_-r,k=v+r,w=v-r):(_=f+m,x=_+r,k=v-r,w=v+r),M=_):(s==="left"?x=f+Math.max(l,h)+r:s==="right"?x=f+m-Math.max(c,d)-r:x=this.caretX,o==="top"?(k=p,v=k-r,_=x-r,M=x+r):(k=p+b,v=k+r,_=x+r,M=x-r),w=k),{x1:_,x2:x,x3:M,y1:k,y2:v,y3:w}}drawTitle(t,e,i){const s=this.title,o=s.length;let r,a,l;if(o){const c=el(i.rtl,this.x,this.width);for(t.x=mr(this,i.titleAlign,i),e.textAlign=c.textAlign(i.titleAlign),e.textBaseline="middle",r=Me(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=r.string,l=0;l<o;++l)e.fillText(s[l],c.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+a,l+1===o&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,s,o){const r=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c,boxPadding:h}=o,d=Me(o.bodyFont),f=mr(this,"left",o),p=s.x(f),m=l<d.lineHeight?(d.lineHeight-l)/2:0,b=e.y+m;if(o.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=s.leftForLtr(p,c)+c/2,M=b+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,Ol(t,_,x,M),t.strokeStyle=r.borderColor,t.fillStyle=r.backgroundColor,Ol(t,_,x,M)}else{t.lineWidth=dt(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,t.strokeStyle=r.borderColor,t.setLineDash(r.borderDash||[]),t.lineDashOffset=r.borderDashOffset||0;const _=s.leftForLtr(p,c-h),x=s.leftForLtr(s.xPlus(p,1),c-h-2),M=$i(r.borderRadius);Object.values(M).some(k=>k!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,qr(t,{x:_,y:b,w:c,h:l,radius:M}),t.fill(),t.stroke(),t.fillStyle=r.backgroundColor,t.beginPath(),qr(t,{x,y:b+1,w:c-2,h:l-2,radius:M}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(_,b,c,l),t.strokeRect(_,b,c,l),t.fillStyle=r.backgroundColor,t.fillRect(x,b+1,c-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:o,bodyAlign:r,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,d=Me(i.bodyFont);let f=d.lineHeight,p=0;const m=el(i.rtl,this.x,this.width),b=function(D){e.fillText(D,m.x(t.x+p),t.y+f/2),t.y+=f+o},_=m.textAlign(r);let x,M,k,v,w,O,T;for(e.textAlign=r,e.textBaseline="middle",e.font=d.string,t.x=mr(this,_,i),e.fillStyle=i.bodyColor,bt(this.beforeBody,b),p=a&&_!=="right"?r==="center"?c/2+h:c+2+h:0,v=0,O=s.length;v<O;++v){for(x=s[v],M=this.labelTextColors[v],e.fillStyle=M,bt(x.before,b),k=x.lines,a&&k.length&&(this._drawColorBox(e,t,v,m,i),f=Math.max(d.lineHeight,l)),w=0,T=k.length;w<T;++w)b(k[w]),f=d.lineHeight;bt(x.after,b)}p=0,f=d.lineHeight,bt(this.afterBody,b),t.y-=o}drawFooter(t,e,i){const s=this.footer,o=s.length;let r,a;if(o){const l=el(i.rtl,this.x,this.width);for(t.x=mr(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",r=Me(i.footerFont),e.fillStyle=i.footerColor,e.font=r.string,a=0;a<o;++a)e.fillText(s[a],l.x(t.x),t.y+r.lineHeight/2),t.y+=r.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:o,yAlign:r}=this,{x:a,y:l}=t,{width:c,height:h}=i,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:m}=$i(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(a+d,l),r==="top"&&this.drawCaret(t,e,i,s),e.lineTo(a+c-f,l),e.quadraticCurveTo(a+c,l,a+c,l+f),r==="center"&&o==="right"&&this.drawCaret(t,e,i,s),e.lineTo(a+c,l+h-m),e.quadraticCurveTo(a+c,l+h,a+c-m,l+h),r==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(a+p,l+h),e.quadraticCurveTo(a,l+h,a,l+h-p),r==="center"&&o==="left"&&this.drawCaret(t,e,i,s),e.lineTo(a,l+d),e.quadraticCurveTo(a,l,a+d,l),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){const r=Ar[t.position].call(this,this._active,this._eventPosition);if(!r)return;const a=this._size=Ud(this,t),l=Object.assign({},r,this._size),c=Yd(e,t,l),h=Xd(t,l,c,e);(s._to!==h.x||o._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const r=De(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,s,e),nw(t,e.textDirection),o.y+=r.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),iw(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),o=!jr(i,s),r=this._positionChanged(s,e);(o||r)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],r=this._getActiveElements(t,o,e,i),a=this._positionChanged(r,t),l=e||!jr(r,o)||a;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,i,s){const o=this.options;if(t.type==="mouseout")return[];if(!s)return e;const r=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&r.reverse(),r}_positionChanged(t,e){const{caretX:i,caretY:s,options:o}=this,r=Ar[o.position].call(this,t,e);return r!==!1&&(i!==r.x||s!==r.y)}}vS.positioners=Ar;const wS=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function MS(n,t,e,i){const s=n.indexOf(t);if(s===-1)return wS(n,t,e,i);const o=n.lastIndexOf(t);return s!==o?e:s}const SS=(n,t)=>n===null?null:ae(Math.round(n),0,t);class Il extends xi{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:o}of e)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(_t(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:MS(i,t,ht(e,t),this._addedLabels),SS(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let r=t;r<=e;r++)s.push({value:r});return s}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Il.id="category";Il.defaults={ticks:{callback:Il.prototype.getLabelForValue}};function kS(n,t){const e=[],{bounds:s,step:o,min:r,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=n,p=o||1,m=h-1,{min:b,max:_}=t,x=!_t(r),M=!_t(a),k=!_t(c),v=(_-b)/(d+1);let w=Qu((_-b)/m/p)*p,O,T,D,R;if(w<1e-14&&!x&&!M)return[{value:b},{value:_}];R=Math.ceil(_/w)-Math.floor(b/w),R>m&&(w=Qu(R*w/m/p)*p),_t(l)||(O=Math.pow(10,l),w=Math.ceil(w*O)/O),s==="ticks"?(T=Math.floor(b/w)*w,D=Math.ceil(_/w)*w):(T=b,D=_),x&&M&&o&&zv((a-r)/o,w/1e3)?(R=Math.round(Math.min((a-r)/w,h)),w=(a-r)/R,T=r,D=a):k?(T=x?r:T,D=M?a:D,R=c-1,w=(D-T)/R):(R=(D-T)/w,Gs(R,Math.round(R),w/1e3)?R=Math.round(R):R=Math.ceil(R));const W=Math.max(td(w),td(T));O=Math.pow(10,_t(l)?W:l),T=Math.round(T*O)/O,D=Math.round(D*O)/O;let B=0;for(x&&(f&&T!==r?(e.push({value:r}),T<r&&B++,Gs(Math.round((T+B*w)*O)/O,r,Kd(r,v,n))&&B++):T<r&&B++);B<R;++B)e.push({value:Math.round((T+B*w)*O)/O});return M&&f&&D!==a?e.length&&Gs(e[e.length-1].value,a,Kd(a,v,n))?e[e.length-1].value=a:e.push({value:a}):(!M||D===a)&&e.push({value:D}),e}function Kd(n,t,{horizontal:e,minRotation:i}){const s=Ne(i),o=(e?Math.sin(s):Math.cos(s))||.001,r=.75*t*(""+n).length;return Math.min(t/o,r)}class Qr extends xi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return _t(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:o}=this;const r=l=>s=e?s:l,a=l=>o=i?o:l;if(t){const l=qe(s),c=qe(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(s===o){let l=1;(o>=Number.MAX_SAFE_INTEGER||s<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(o*.05)),a(o+l),t||r(s-l)}this.min=s,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,r=kS(s,o);return t.bounds==="ticks"&&Pg(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return fo(t,this.chart.options.locale,this.options.ticks.format)}}class mp extends Qr{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=se(t)?t:0,this.max=se(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Ne(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}mp.id="linear";mp.defaults={ticks:{callback:ua.formatters.numeric}};function Jd(n){return n/Math.pow(10,Math.floor(Te(n)))===1}function CS(n,t){const e=Math.floor(Te(t.max)),i=Math.ceil(t.max/Math.pow(10,e)),s=[];let o=Oe(n.min,Math.pow(10,Math.floor(Te(t.min)))),r=Math.floor(Te(o)),a=Math.floor(o/Math.pow(10,r)),l=r<0?Math.pow(10,Math.abs(r)):1;do s.push({value:o,major:Jd(o)}),++a,a===10&&(a=1,++r,l=r>=0?1:l),o=Math.round(a*Math.pow(10,r)*l)/l;while(r<e||r===e&&a<i);const c=Oe(n.max,o);return s.push({value:c,major:Jd(o)}),s}class bp extends xi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=Qr.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return se(i)&&i>0?i:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=se(t)?Math.max(0,t):null,this.max=se(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,s=this.max;const o=l=>i=t?i:l,r=l=>s=e?s:l,a=(l,c)=>Math.pow(10,Math.floor(Te(l))+c);i===s&&(i<=0?(o(1),r(10)):(o(a(i,-1)),r(a(s,1)))),i<=0&&o(a(s,-1)),s<=0&&r(a(i,1)),this._zero&&this.min!==this._suggestedMin&&i===a(this.min,0)&&o(a(i,-1)),this.min=i,this.max=s}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},i=CS(e,this);return t.bounds==="ticks"&&Pg(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":fo(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Te(t),this._valueRange=Te(this.max)-Te(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Te(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}bp.id="logarithmic";bp.defaults={ticks:{callback:ua.formatters.logarithmic,major:{enabled:!0}}};function Rl(n){const t=n.ticks;if(t.display&&n.display){const e=De(t.backdropPadding);return ht(t.font&&t.font.size,ct.font.size)+e.height}return 0}function PS(n,t,e){return e=It(e)?e:[e],{w:b1(n,t.string,e),h:e.length*t.lineHeight}}function Zd(n,t,e,i,s){return n===i||n===s?{start:t-e/2,end:t+e/2}:n<i||n>s?{start:t-e,end:t}:{start:t,end:t+e}}function OS(n){const t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],s=[],o=n._pointLabels.length,r=n.options.pointLabels,a=r.centerPointLabels?jt/o:0;for(let l=0;l<o;l++){const c=r.setContext(n.getPointLabelContext(l));s[l]=c.padding;const h=n.getPointPosition(l,n.drawingArea+s[l],a),d=Me(c.font),f=PS(n.ctx,d,n._pointLabels[l]);i[l]=f;const p=Re(n.getIndexAngle(l)+a),m=Math.round(cc(p)),b=Zd(m,h.x,f.w,0,180),_=Zd(m,h.y,f.h,90,270);ES(e,t,p,b,_)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=TS(n,i,s)}function ES(n,t,e,i,s){const o=Math.abs(Math.sin(e)),r=Math.abs(Math.cos(e));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/o,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/o,n.r=Math.max(n.r,t.r+a)),s.start<t.t?(l=(t.t-s.start)/r,n.t=Math.min(n.t,t.t-l)):s.end>t.b&&(l=(s.end-t.b)/r,n.b=Math.max(n.b,t.b+l))}function TS(n,t,e){const i=[],s=n._pointLabels.length,o=n.options,r=Rl(o)/2,a=n.drawingArea,l=o.pointLabels.centerPointLabels?jt/s:0;for(let c=0;c<s;c++){const h=n.getPointPosition(c,a+r+e[c],l),d=Math.round(cc(Re(h.angle+Vt))),f=t[c],p=LS(h.y,f.h,d),m=AS(d),b=DS(h.x,f.w,m);i.push({x:h.x,y:p,textAlign:m,left:b,top:p,right:b+f.w,bottom:p+f.h})}return i}function AS(n){return n===0||n===180?"center":n<180?"left":"right"}function DS(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function LS(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function IS(n,t){const{ctx:e,options:{pointLabels:i}}=n;for(let s=t-1;s>=0;s--){const o=i.setContext(n.getPointLabelContext(s)),r=Me(o.font),{x:a,y:l,textAlign:c,left:h,top:d,right:f,bottom:p}=n._pointLabelItems[s],{backdropColor:m}=o;if(!_t(m)){const b=$i(o.borderRadius),_=De(o.backdropPadding);e.fillStyle=m;const x=h-_.left,M=d-_.top,k=f-h+_.width,v=p-d+_.height;Object.values(b).some(w=>w!==0)?(e.beginPath(),qr(e,{x,y:M,w:k,h:v,radius:b}),e.fill()):e.fillRect(x,M,k,v)}Gr(e,n._pointLabels[s],a,l+r.lineHeight/2,r,{color:o.color,textAlign:c,textBaseline:"middle"})}}function _p(n,t,e,i){const{ctx:s}=n;if(e)s.arc(n.xCenter,n.yCenter,t,0,wt);else{let o=n.getPointPosition(0,t);s.moveTo(o.x,o.y);for(let r=1;r<i;r++)o=n.getPointPosition(r,t),s.lineTo(o.x,o.y)}}function RS(n,t,e,i){const s=n.ctx,o=t.circular,{color:r,lineWidth:a}=t;!o&&!i||!r||!a||e<0||(s.save(),s.strokeStyle=r,s.lineWidth=a,s.setLineDash(t.borderDash),s.lineDashOffset=t.borderDashOffset,s.beginPath(),_p(n,e,o,i),s.closePath(),s.stroke(),s.restore())}function FS(n,t,e){return jn(n,{label:e,index:t,type:"pointLabel"})}class fa extends Qr{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=De(Rl(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=se(t)&&!isNaN(t)?t:0,this.max=se(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Rl(this.options))}generateTickLabels(t){Qr.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{const s=Bt(this.options.pointLabels.callback,[e,i],this);return s||s===0?s:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){const t=this.options;t.display&&t.pointLabels.display?OS(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,s){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,s))}getIndexAngle(t){const e=wt/(this._pointLabels.length||1),i=this.options.startAngle||0;return Re(t*e+Ne(i))}getDistanceFromCenterForValue(t){if(_t(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(_t(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return FS(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const s=this.getIndexAngle(t)-Vt+i;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:s,bottom:o}=this._pointLabelItems[t];return{left:e,top:i,right:s,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),_p(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:s}=e,o=this._pointLabels.length;let r,a,l;if(e.pointLabels.display&&IS(this,o),s.display&&this.ticks.forEach((c,h)=>{if(h!==0){a=this.getDistanceFromCenterForValue(c.value);const d=s.setContext(this.getContext(h-1));RS(this,d,a,o)}}),i.display){for(t.save(),r=o-1;r>=0;r--){const c=i.setContext(this.getPointLabelContext(r)),{color:h,lineWidth:d}=c;!d||!h||(t.lineWidth=d,t.strokeStyle=h,t.setLineDash(c.borderDash),t.lineDashOffset=c.borderDashOffset,a=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),l=this.getPointPosition(r,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let o,r;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!e.reverse)return;const c=i.setContext(this.getContext(l)),h=Me(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=h.string,r=t.measureText(a.label).width,t.fillStyle=c.backdropColor;const d=De(c.backdropPadding);t.fillRect(-r/2-d.left,-o-h.size/2-d.top,r+d.width,h.size+d.height)}Gr(t,a.label,0,-o,h,{color:c.color})}),t.restore()}drawTitle(){}}fa.id="radialLinear";fa.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ua.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(n){return n},padding:5,centerPointLabels:!1}};fa.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};fa.descriptors={angleLines:{_fallback:"grid"}};const ga={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},be=Object.keys(ga);function NS(n,t){return n-t}function Qd(n,t){if(_t(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:o}=n._parseOpts;let r=t;return typeof i=="function"&&(r=i(r)),se(r)||(r=typeof i=="string"?e.parse(r,i):e.parse(r)),r===null?null:(s&&(r=s==="week"&&(Ui(o)||o===!0)?e.startOf(r,"isoWeek",o):e.startOf(r,s)),+r)}function tf(n,t,e,i){const s=be.length;for(let o=be.indexOf(n);o<s-1;++o){const r=ga[be[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((e-t)/(a*r.size))<=i)return be[o]}return be[s-1]}function BS(n,t,e,i,s){for(let o=be.length-1;o>=be.indexOf(e);o--){const r=be[o];if(ga[r].common&&n._adapter.diff(s,i,r)>=t-1)return r}return be[e?be.indexOf(e):0]}function zS(n){for(let t=be.indexOf(n)+1,e=be.length;t<e;++t)if(ga[be[t]].common)return be[t]}function ef(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=hc(e,t),o=e[i]>=t?e[i]:e[s];n[o]=!0}}function $S(n,t,e,i){const s=n._adapter,o=+s.startOf(t[0].value,i),r=t[t.length-1].value;let a,l;for(a=o;a<=r;a=+s.add(a,1,i))l=e[a],l>=0&&(t[l].major=!0);return t}function nf(n,t,e){const i=[],s={},o=t.length;let r,a;for(r=0;r<o;++r)a=t[r],s[a]=r,i.push({value:a,major:!1});return o===0||!e?i:$S(n,i,s,e)}class pa extends xi{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const i=t.time||(t.time={}),s=this._adapter=new sM._date(t.adapters.date);s.init(e),Xs(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Qd(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:o,minDefined:r,maxDefined:a}=this.getUserBounds();function l(c){!r&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!r||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=se(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),o=se(o)&&!isNaN(o)?o:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,r=this.max,a=Wv(s,o,r);return this._unit=e.unit||(i.autoSkip?tf(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):BS(this,a.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:zS(this._unit),this.initOffsets(s),t.reverse&&a.reverse(),nf(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t){let e=0,i=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);const r=t.length<3?.5:.25;e=ae(e,0,r),i=ae(i,0,r),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,o=s.time,r=o.unit||tf(o.minUnit,e,i,this._getLabelCapacity(e)),a=ht(o.stepSize,1),l=r==="week"?o.isoWeekday:!1,c=Ui(l)||l===!0,h={};let d=e,f,p;if(c&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,c?"day":r),t.diff(i,e,r)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+r);const m=s.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<i;f=+t.add(f,a,r),p++)ef(h,f,m);return(f===i||s.bounds==="ticks"||p===1)&&ef(h,f,m),Object.keys(h).sort((b,_)=>b-_).map(b=>+b)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}_tickFormatFunction(t,e,i,s){const o=this.options,r=o.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&r[a],h=l&&r[l],d=i[e],f=l&&h&&d&&d.major,p=this._adapter.format(t,s||(f?h:c)),m=o.ticks.callback;return m?Bt(m,[p,e,i],this):p}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=Ne(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(s),r=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*o+a*r,h:i*r+a*o}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,o=this._tickFormatFunction(t,0,nf(this,[t],this._majorUnit),s),r=this._getLabelSize(o),a=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(Qd(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Tg(t.sort(NS))}}pa.id="time";pa.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};function br(n,t,e){let i=0,s=n.length-1,o,r,a,l;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=ui(n,"pos",t)),{pos:o,time:a}=n[i],{pos:r,time:l}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=ui(n,"time",t)),{time:o,pos:a}=n[i],{time:r,pos:l}=n[s]);const c=r-o;return c?a+(l-a)*(t-o)/c:a}class yp extends pa{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=br(e,this.min),this._tableRange=br(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],o=[];let r,a,l,c,h;for(r=0,a=t.length;r<a;++r)c=t[r],c>=e&&c<=i&&s.push(c);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(r=0,a=s.length;r<a;++r)h=s[r+1],l=s[r-1],c=s[r],Math.round((h+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(br(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return br(this._table,i*this._tableRange+this._minPos,!0)}}yp.id="timeseries";yp.defaults=pa.defaults;var VS={value:()=>{}};function xp(){for(var n,t=0,e=arguments.length,i={};t<e;++t){if(!(n=arguments[t]+"")||n in i||/[\s.]/.test(n))throw new Error("illegal type: "+n);i[n]=[]}return new Dr(i)}function Dr(n){this._=n}function jS(n,t){return n.trim().split(/^|\s+/).map(function(e){var i="",s=e.indexOf(".");if(s>=0&&(i=e.slice(s+1),e=e.slice(0,s)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}function WS(n,t){for(var e,i=0,s=n.length;i<s;++i)if((e=n[i]).name===t)return e.value}function sf(n,t,e){for(var i=0,s=n.length;i<s;++i)if(n[i].name===t){n[i]=VS,n=n.slice(0,i).concat(n.slice(i+1));break}return e!=null&&n.push({name:t,value:e}),n}Dr.prototype=xp.prototype={constructor:Dr,on:function(n,t){var e,i=this._,s=jS(n+"",i),o=-1,r=s.length;if(!(arguments.length<2)){if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<r;)if(e=(n=s[o]).type)i[e]=sf(i[e],n.name,t);else if(t==null)for(e in i)i[e]=sf(i[e],n.name,null);return this}for(;++o<r;)if((e=(n=s[o]).type)&&(e=WS(i[e],n.name)))return e},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new Dr(n)},call:function(n,t){if((e=arguments.length-2)>0)for(var e,i,s=new Array(e),o=0;o<e;++o)s[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=0,e=(i=this._[n]).length;o<e;++o)i[o].value.apply(t,s)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],s=0,o=i.length;s<o;++s)i[s].value.apply(t,e)}};var Fl="http://www.w3.org/1999/xhtml",of={svg:"http://www.w3.org/2000/svg",xhtml:Fl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vp(n){var t=n+="",e=t.indexOf(":");return e>=0&&(t=n.slice(0,e))!=="xmlns"&&(n=n.slice(e+1)),of.hasOwnProperty(t)?{space:of[t],local:n}:n}function HS(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===Fl&&t.documentElement.namespaceURI===Fl?t.createElement(n):t.createElementNS(e,n)}}function US(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function rf(n){var t=vp(n);return(t.local?US:HS)(t)}function YS(){}function af(n){return n==null?YS:function(){return this.querySelector(n)}}function XS(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function GS(){return[]}function lf(n){return function(t){return t.matches(n)}}var qS=Array.prototype.find;function KS(){return this.firstElementChild}var JS=Array.prototype.filter;function ZS(){return Array.from(this.children)}function cf(n){return new Array(n.length)}function ta(n,t){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=t}function QS(n){return function(){return n}}function tk(n,t,e,i,s,o){for(var r,a=0,l=t.length,c=o.length;a<c;++a)(r=t[a])?(r.__data__=o[a],i[a]=r):e[a]=new ta(n,o[a]);for(;a<l;++a)(r=t[a])&&(s[a]=r)}function ek(n,t,e,i,s,o,r){var a,l,c,h=new Map,d=t.length,f=o.length,p=new Array(d);for(a=0;a<d;++a)(l=t[a])&&(p[a]=c=r.call(l,l.__data__,a,t)+"",h.has(c)?s[a]=l:h.set(c,l));for(a=0;a<f;++a)c=r.call(n,o[a],a,o)+"",(l=h.get(c))?(i[a]=l,l.__data__=o[a],h.delete(c)):e[a]=new ta(n,o[a]);for(a=0;a<d;++a)(l=t[a])&&h.get(p[a])===l&&(s[a]=l)}function nk(n){return n.__data__}function ik(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function sk(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function ok(n){return function(){this.removeAttribute(n)}}function rk(n){return function(){this.removeAttributeNS(n.space,n.local)}}function ak(n,t){return function(){this.setAttribute(n,t)}}function lk(n,t){return function(){this.setAttributeNS(n.space,n.local,t)}}function ck(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttribute(n):this.setAttribute(n,e)}}function hk(n,t){return function(){var e=t.apply(this,arguments);e==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}}function wp(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function uk(n){return function(){this.style.removeProperty(n)}}function dk(n,t,e){return function(){this.style.setProperty(n,t,e)}}function fk(n,t,e){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,e)}}function gk(n,t){return n.style.getPropertyValue(t)||wp(n).getComputedStyle(n,null).getPropertyValue(t)}function pk(n){return function(){delete this[n]}}function mk(n,t){return function(){this[n]=t}}function bk(n,t){return function(){var e=t.apply(this,arguments);e==null?delete this[n]:this[n]=e}}function Mp(n){return n.trim().split(/^|\s+/)}function Ec(n){return n.classList||new Sp(n)}function Sp(n){this._node=n,this._names=Mp(n.getAttribute("class")||"")}function kp(n,t){for(var e=Ec(n),i=-1,s=t.length;++i<s;)e.add(t[i])}function Cp(n,t){for(var e=Ec(n),i=-1,s=t.length;++i<s;)e.remove(t[i])}function _k(n){return function(){kp(this,n)}}function yk(n){return function(){Cp(this,n)}}function xk(n,t){return function(){(t.apply(this,arguments)?kp:Cp)(this,n)}}function vk(){this.textContent=""}function wk(n){return function(){this.textContent=n}}function Mk(n){return function(){var t=n.apply(this,arguments);this.textContent=t??""}}function Sk(){this.innerHTML=""}function kk(n){return function(){this.innerHTML=n}}function Ck(n){return function(){var t=n.apply(this,arguments);this.innerHTML=t??""}}function Pk(){this.nextSibling&&this.parentNode.appendChild(this)}function Ok(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ek(){return null}function Tk(){var n=this.parentNode;n&&n.removeChild(this)}function Ak(){var n=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function Dk(){var n=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(n,this.nextSibling):n}function Lk(n){return n.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}})}function Ik(n){return function(){var t=this.__on;if(t){for(var e,i=0,s=-1,o=t.length;i<o;++i)e=t[i],n.type&&e.type!==n.type||e.name!==n.name?t[++s]=e:this.removeEventListener(e.type,e.listener,e.options);++s?t.length=s:delete this.__on}}}function Rk(n,t,e){return function(){var i,s=this.__on,o=function(l){return function(c){l.call(this,c,this.__data__)}}(t);if(s){for(var r=0,a=s.length;r<a;++r)if((i=s[r]).type===n.type&&i.name===n.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=e),void(i.value=t)}this.addEventListener(n.type,o,e),i={type:n.type,name:n.name,value:t,listener:o,options:e},s?s.push(i):this.__on=[i]}}function Pp(n,t,e){var i=wp(n),s=i.CustomEvent;typeof s=="function"?s=new s(t,e):(s=i.document.createEvent("Event"),e?(s.initEvent(t,e.bubbles,e.cancelable),s.detail=e.detail):s.initEvent(t,!1,!1)),n.dispatchEvent(s)}function Fk(n,t){return function(){return Pp(this,n,t)}}function Nk(n,t){return function(){return Pp(this,n,t.apply(this,arguments))}}ta.prototype={constructor:ta,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,t){return this._parent.insertBefore(n,t)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}},Sp.prototype={add:function(n){this._names.indexOf(n)<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var t=this._names.indexOf(n);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};var Bk=[null];function Ee(n,t){this._groups=n,this._parents=t}function $s(n){return typeof n=="string"?new Ee([[document.querySelector(n)]],[document.documentElement]):new Ee([[n]],Bk)}function hf(n,t){if(n=function(o){let r;for(;r=o.sourceEvent;)o=r;return o}(n),t===void 0&&(t=n.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[n.clientX-s.left-t.clientLeft,n.clientY-s.top-t.clientTop]}}return[n.pageX,n.pageY]}Ee.prototype={constructor:Ee,select:function(n){typeof n!="function"&&(n=af(n));for(var t=this._groups,e=t.length,i=new Array(e),s=0;s<e;++s)for(var o,r,a=t[s],l=a.length,c=i[s]=new Array(l),h=0;h<l;++h)(o=a[h])&&(r=n.call(o,o.__data__,h,a))&&("__data__"in o&&(r.__data__=o.__data__),c[h]=r);return new Ee(i,this._parents)},selectAll:function(n){n=typeof n=="function"?function(h){return function(){return XS(h.apply(this,arguments))}}(n):function(h){return h==null?GS:function(){return this.querySelectorAll(h)}}(n);for(var t=this._groups,e=t.length,i=[],s=[],o=0;o<e;++o)for(var r,a=t[o],l=a.length,c=0;c<l;++c)(r=a[c])&&(i.push(n.call(r,r.__data__,c,a)),s.push(r));return new Ee(i,s)},selectChild:function(n){return this.select(n==null?KS:function(t){return function(){return qS.call(this.children,t)}}(typeof n=="function"?n:lf(n)))},selectChildren:function(n){return this.selectAll(n==null?ZS:function(t){return function(){return JS.call(this.children,t)}}(typeof n=="function"?n:lf(n)))},filter:function(n){typeof n!="function"&&(n=function(h){return function(){return this.matches(h)}}(n));for(var t=this._groups,e=t.length,i=new Array(e),s=0;s<e;++s)for(var o,r=t[s],a=r.length,l=i[s]=[],c=0;c<a;++c)(o=r[c])&&n.call(o,o.__data__,c,r)&&l.push(o);return new Ee(i,this._parents)},data:function(n,t){if(!arguments.length)return Array.from(this,nk);var e=t?ek:tk,i=this._parents,s=this._groups;typeof n!="function"&&(n=QS(n));for(var o=s.length,r=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var h=i[c],d=s[c],f=d.length,p=ik(n.call(h,h&&h.__data__,c,i)),m=p.length,b=a[c]=new Array(m),_=r[c]=new Array(m),x=l[c]=new Array(f);e(h,d,b,_,x,p,t);for(var M,k,v=0,w=0;v<m;++v)if(M=b[v]){for(v>=w&&(w=v+1);!(k=_[w])&&++w<m;);M._next=k||null}}return(r=new Ee(r,i))._enter=a,r._exit=l,r},enter:function(){return new Ee(this._enter||this._groups.map(cf),this._parents)},exit:function(){return new Ee(this._exit||this._groups.map(cf),this._parents)},join:function(n,t,e){var i=this.enter(),s=this,o=this.exit();return typeof n=="function"?(i=n(i))&&(i=i.selection()):i=i.append(n+""),t!=null&&(s=t(s))&&(s=s.selection()),e==null?o.remove():e(o),i&&s?i.merge(s).order():s},merge:function(n){for(var t=n.selection?n.selection():n,e=this._groups,i=t._groups,s=e.length,o=i.length,r=Math.min(s,o),a=new Array(s),l=0;l<r;++l)for(var c,h=e[l],d=i[l],f=h.length,p=a[l]=new Array(f),m=0;m<f;++m)(c=h[m]||d[m])&&(p[m]=c);for(;l<s;++l)a[l]=e[l];return new Ee(a,this._parents)},selection:function(){return this},order:function(){for(var n=this._groups,t=-1,e=n.length;++t<e;)for(var i,s=n[t],o=s.length-1,r=s[o];--o>=0;)(i=s[o])&&(r&&4^i.compareDocumentPosition(r)&&r.parentNode.insertBefore(i,r),r=i);return this},sort:function(n){function t(d,f){return d&&f?n(d.__data__,f.__data__):!d-!f}n||(n=sk);for(var e=this._groups,i=e.length,s=new Array(i),o=0;o<i;++o){for(var r,a=e[o],l=a.length,c=s[o]=new Array(l),h=0;h<l;++h)(r=a[h])&&(c[h]=r);c.sort(t)}return new Ee(s,this._parents).order()},call:function(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i=n[t],s=0,o=i.length;s<o;++s){var r=i[s];if(r)return r}return null},size:function(){let n=0;for(const t of this)++n;return n},empty:function(){return!this.node()},each:function(n){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var s,o=t[e],r=0,a=o.length;r<a;++r)(s=o[r])&&n.call(s,s.__data__,r,o);return this},attr:function(n,t){var e=vp(n);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((t==null?e.local?rk:ok:typeof t=="function"?e.local?hk:ck:e.local?lk:ak)(e,t))},style:function(n,t,e){return arguments.length>1?this.each((t==null?uk:typeof t=="function"?fk:dk)(n,t,e??"")):gk(this.node(),n)},property:function(n,t){return arguments.length>1?this.each((t==null?pk:typeof t=="function"?bk:mk)(n,t)):this.node()[n]},classed:function(n,t){var e=Mp(n+"");if(arguments.length<2){for(var i=Ec(this.node()),s=-1,o=e.length;++s<o;)if(!i.contains(e[s]))return!1;return!0}return this.each((typeof t=="function"?xk:t?_k:yk)(e,t))},text:function(n){return arguments.length?this.each(n==null?vk:(typeof n=="function"?Mk:wk)(n)):this.node().textContent},html:function(n){return arguments.length?this.each(n==null?Sk:(typeof n=="function"?Ck:kk)(n)):this.node().innerHTML},raise:function(){return this.each(Pk)},lower:function(){return this.each(Ok)},append:function(n){var t=typeof n=="function"?n:rf(n);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(n,t){var e=typeof n=="function"?n:rf(n),i=t==null?Ek:typeof t=="function"?t:af(t);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(Tk)},clone:function(n){return this.select(n?Dk:Ak)},datum:function(n){return arguments.length?this.property("__data__",n):this.node().__data__},on:function(n,t,e){var i,s,o=Lk(n+""),r=o.length;if(!(arguments.length<2)){for(a=t?Rk:Ik,i=0;i<r;++i)this.each(a(o[i],t,e));return this}var a=this.node().__on;if(a){for(var l,c=0,h=a.length;c<h;++c)for(i=0,l=a[c];i<r;++i)if((s=o[i]).type===l.type&&s.name===l.name)return l.value}},dispatch:function(n,t){return this.each((typeof t=="function"?Nk:Fk)(n,t))},[Symbol.iterator]:function*(){for(var n=this._groups,t=0,e=n.length;t<e;++t)for(var i,s=n[t],o=0,r=s.length;o<r;++o)(i=s[o])&&(yield i)}};const zk={passive:!1},_s={capture:!0,passive:!1};function hl(n){n.stopImmediatePropagation()}function Di(n){n.preventDefault(),n.stopImmediatePropagation()}var _r=n=>()=>n;function Nl(n,{sourceEvent:t,subject:e,target:i,identifier:s,active:o,x:r,y:a,dx:l,dy:c,dispatch:h}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:h}})}function $k(n){return!n.ctrlKey&&!n.button}function Vk(){return this.parentNode}function jk(n,t){return t??{x:n.x,y:n.y}}function Wk(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hk(){var n,t,e,i,s=$k,o=Vk,r=jk,a=Wk,l={},c=xp("start","drag","end"),h=0,d=0;function f(v){v.on("mousedown.drag",p).filter(a).on("touchstart.drag",_).on("touchmove.drag",x,zk).on("touchend.drag touchcancel.drag",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(v,w){if(!i&&s.call(this,v,w)){var O=k(this,o.call(this,v,w),v,w,"mouse");O&&($s(v.view).on("mousemove.drag",m,_s).on("mouseup.drag",b,_s),function(T){var D=T.document.documentElement,R=$s(T).on("dragstart.drag",Di,_s);"onselectstart"in D?R.on("selectstart.drag",Di,_s):(D.__noselect=D.style.MozUserSelect,D.style.MozUserSelect="none")}(v.view),hl(v),e=!1,n=v.clientX,t=v.clientY,O("start",v))}}function m(v){if(Di(v),!e){var w=v.clientX-n,O=v.clientY-t;e=w*w+O*O>d}l.mouse("drag",v)}function b(v){$s(v.view).on("mousemove.drag mouseup.drag",null),function(w,O){var T=w.document.documentElement,D=$s(w).on("dragstart.drag",null);O&&(D.on("click.drag",Di,_s),setTimeout(function(){D.on("click.drag",null)},0)),"onselectstart"in T?D.on("selectstart.drag",null):(T.style.MozUserSelect=T.__noselect,delete T.__noselect)}(v.view,e),Di(v),l.mouse("end",v)}function _(v,w){if(s.call(this,v,w)){var O,T,D=v.changedTouches,R=o.call(this,v,w),W=D.length;for(O=0;O<W;++O)(T=k(this,R,v,w,D[O].identifier,D[O]))&&(hl(v),T("start",v,D[O]))}}function x(v){var w,O,T=v.changedTouches,D=T.length;for(w=0;w<D;++w)(O=l[T[w].identifier])&&(Di(v),O("drag",v,T[w]))}function M(v){var w,O,T=v.changedTouches,D=T.length;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),w=0;w<D;++w)(O=l[T[w].identifier])&&(hl(v),O("end",v,T[w]))}function k(v,w,O,T,D,R){var W,B,Y,et=c.copy(),Q=hf(R||O,w);if((Y=r.call(v,new Nl("beforestart",{sourceEvent:O,target:f,identifier:D,active:h,x:Q[0],y:Q[1],dx:0,dy:0,dispatch:et}),T))!=null)return W=Y.x-Q[0]||0,B=Y.y-Q[1]||0,function N(X,K,St){var yt,Xt=Q;switch(X){case"start":l[D]=N,yt=h++;break;case"end":delete l[D],--h;case"drag":Q=hf(St||K,w),yt=h}et.call(X,v,new Nl(X,{sourceEvent:K,subject:Y,target:f,identifier:D,active:yt,x:Q[0]+W,y:Q[1]+B,dx:Q[0]-Xt[0],dy:Q[1]-Xt[1],dispatch:et}),T)}}return f.filter=function(v){return arguments.length?(s=typeof v=="function"?v:_r(!!v),f):s},f.container=function(v){return arguments.length?(o=typeof v=="function"?v:_r(v),f):o},f.subject=function(v){return arguments.length?(r=typeof v=="function"?v:_r(v),f):r},f.touchable=function(v){return arguments.length?(a=typeof v=="function"?v:_r(!!v),f):a},f.on=function(){var v=c.on.apply(c,arguments);return v===c?f:v},f.clickDistance=function(v){return arguments.length?(d=(v=+v)*v,f):Math.sqrt(d)},f}let ge,cn,Ue,Cn,ea,Op,Ep,Tp,Li,li,uf;Nl.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};let Bl=!1;function na(n,t){return isNaN(t)?n:Math.round(n*Math.pow(10,t))/Math.pow(10,t)}function zl(n,t,e,i,s){let o,r;const a=t.data.datasets[e].data[i];if(n.touches?(o=t.scales[Ue].getValueForPixel(n.touches[0].clientX-t.canvas.getBoundingClientRect().left),r=t.scales[cn].getValueForPixel(n.touches[0].clientY-t.canvas.getBoundingClientRect().top)):(o=t.scales[Ue].getValueForPixel(n.clientX-t.canvas.getBoundingClientRect().left),r=t.scales[cn].getValueForPixel(n.clientY-t.canvas.getBoundingClientRect().top)),o=na(o,t.config.options.plugins.dragData.round),r=na(r,t.config.options.plugins.dragData.round),o=o>t.scales[Ue].max?t.scales[Ue].max:o,o=o<t.scales[Ue].min?t.scales[Ue].min:o,r=r>t.scales[cn].max?t.scales[cn].max:r,r=r<t.scales[cn].min?t.scales[cn].min:r,Ep){let l;return l=t.config.options.indexAxis==="y"?o:r,Math.abs(l-a[0])<=Math.abs(l-a[1])?[l,a[1]]:[a[0],l]}return a.x!==void 0&&t.config.options.plugins.dragData.dragX&&(a.x=o),a.y!==void 0?(t.config.options.plugins.dragData.dragY!==!1&&(a.y=r),a):t.config.options.indexAxis==="y"?o:r}const Uk=(n,t,e,i)=>{if(ge){Li=ge.datasetIndex,li=ge.index,Bl=!0;let s=t.data.datasets[Li].data[li];ea==="radar"||ea==="polarArea"?s=function(o,r){let a,l,c;o.touches?(a=o.touches[0].clientX-r.canvas.getBoundingClientRect().left,l=o.touches[0].clientY-r.canvas.getBoundingClientRect().top):(a=o.clientX-r.canvas.getBoundingClientRect().left,l=o.clientY-r.canvas.getBoundingClientRect().top);let h=r.scales[Cn],d=Math.sqrt(Math.pow(a-h.xCenter,2)+Math.pow(l-h.yCenter,2)),f=h.drawingArea/(h.max-h.min);return c=h.options.ticks.reverse?h.max-d/f:h.min+d/f,c=na(c,r.config.options.plugins.dragData.round),c=c>r.scales[Cn].max?r.scales[Cn].max:c,c=c<r.scales[Cn].min?r.scales[Cn].min:c,c}(n,t):Op?s=na(zl(n,t,Li,li)-Tp,e.round):s=zl(n,t,Li,li),(!i||typeof i=="function"&&i(n,Li,li,s)!==!1)&&(t.data.datasets[Li].data[li]=s,t.update("none"))}},Ap={id:"dragdata",afterInit:function(n){if(n.config.options.plugins&&n.config.options.plugins.dragData){const t=n.config.options.plugins.dragData;$s(n.canvas).call(Hk().container(n.canvas).on("start",e=>((i,s,o)=>{if(ge=s.getElementsAtEventForMode(i,"nearest",{intersect:!0},!1)[0],ea=s.config.type,ge){let r=ge.datasetIndex,a=ge.index;uf=function(d){try{return d()}catch{return""}}(()=>s.config.options.plugins.tooltip.animation);const l=s.data.datasets[r],c=s.getDatasetMeta(r);let h=l.data[a];if(Ue=c.xAxisID,cn=c.yAxisID,Cn=c.rAxisID,l.dragData===!1||s.config.options.scales[Ue]&&s.config.options.scales[Ue].dragData===!1||s.config.options.scales[cn]&&s.config.options.scales[cn].dragData===!1||s.config.options.scales[Cn]&&s.config.options.scales[Cn].rAxisID===!1||l.data[ge.index].dragData===!1)return void(ge=null);if(ea==="bar"){Op=s.config.options.scales[Ue].stacked;const d=s.data.datasets[0].data[0];Ep=d!==null&&Array.isArray(d)&&d.length==2,Tp=zl(i,s,r,a)-h}(s.config.options.plugins.dragData.showTooltip===void 0||s.config.options.plugins.dragData.showTooltip)&&(s.config.options.plugins.tooltip||(s.config.options.plugins.tooltip={}),s.config.options.plugins.tooltip.animation=!1),typeof o=="function"&&ge&&o(i,r,a,h)===!1&&(ge=null)}})(e.sourceEvent,n,t.onDragStart)).on("drag",e=>Uk(e.sourceEvent,n,t,t.onDrag)).on("end",e=>((i,s,o)=>{if(li=void 0,Bl=!1,s.config.options.plugins.tooltip&&(s.config.options.plugins.tooltip.animation=uf,s.update("none")),typeof o=="function"&&ge){const r=ge.datasetIndex,a=ge.index;let l=function(c,h,d){const f=c.config.options.plugins.dragData;if(!f.magnet)return c.data.datasets[h].data[d];{const p=f.magnet;if(p.to&&typeof p.to=="function"){let m=c.data.datasets[h].data[d];return m=p.to(m),c.data.datasets[h].data[d]=m,c.update("none"),m}}}(s,r,a);return o(i,r,a,l)}})(e.sourceEvent,n,t.onDragEnd)))}},beforeEvent:function(n){if(Bl)return n.tooltip&&n.tooltip.update(),!1}};kc.register(Ap);function Yk(n){let t,e,i,s,o;return{c(){t=ot("canvas"),e=pe(),i=ot("canvas"),Bi(t,"width","100%"),Bi(t,"height","400px"),Bi(i,"width","100%"),Bi(i,"height","300px")},m(r,a){Ot(r,t,a),Ot(r,e,a),Ot(r,i,a),s||(o=[Mh(n[0].call(null,t)),Mh(n[1].call(null,i))],s=!0)},p:ue,i:ue,o:ue,d(r){r&&(Et(t),Et(e),Et(i)),s=!1,Ki(o)}}}function Xk(n,t,e){Fs.register(...Ov),Fs.register(Ap);let{lts:i}=t,{nearbyAmenities:s}=t,{greenspace:o}=t;const r=wf();let a=null,l=["red","blue","green"];c();function c(){let f=i+s+o;e(2,i=100*i/f),e(3,s=100*s/f),e(4,o=100*o/f),a&&(a.data.datasets[0].data=[i,s,o],a.update())}function h(f){let p={type:"radar",data:{labels:["LTS","Amenities","Greenspace"],datasets:[{label:"Routing preferences",data:[i,s,o],pointHitRadius:25}]},options:{responsive:!1,onHover(m){const b=m.chart.getElementsAtEventForMode(m,"nearest",{intersect:!0},!1);m.native.target.style.cursor=b.length?"grab":"default"},plugins:{dragData:{round:1,showTooltip:!0,onDragStart(m){m.target.style.cursor="grabbing"},onDragEnd(m,b,_,x){m.target.style.cursor="default",_==0?e(2,i=x):_==1?e(3,s=x):_==2&&e(4,o=x),c(),r("change","")}}},scales:{r:{min:0,max:100,stepSize:1,pointLabels:{color:l,font:{weight:"bold",size:15}},ticks:{display:!1}}}}};new Fs(f.getContext("2d"),p)}function d(f){let p={type:"bar",data:{labels:["LTS","Amenities","Greenspace"],datasets:[{label:"Routing preferences",data:[i,s,o],backgroundColor:l}]},options:{indexAxis:"y"}};a=new Fs(f.getContext("2d"),p)}return n.$$set=f=>{"lts"in f&&e(2,i=f.lts),"nearbyAmenities"in f&&e(3,s=f.nearbyAmenities),"greenspace"in f&&e(4,o=f.greenspace)},[h,d,i,s,o]}class Gk extends Gi{constructor(t){super(),qi(this,t,Xk,Yk,yi,{lts:2,nearbyAmenities:3,greenspace:4})}}function df(n,t,e){const i=n.slice();return i[24]=t[e],i[29]=t,i[30]=e,i}function ff(n,t,e){const i=n.slice();return i[24]=t[e],i[27]=t,i[28]=e,i}function gf(n,t,e){const i=n.slice();return i[24]=t[e],i[25]=t,i[26]=e,i}function qk(n){let t,e,i,s,o,r,a,l,c,h,d,f,p,m;function b(w){n[15](w)}function _(w){n[16](w)}function x(w){n[17](w)}let M={};n[3].tradeoff_lts!==void 0&&(M.lts=n[3].tradeoff_lts),n[3].tradeoff_amenities!==void 0&&(M.nearbyAmenities=n[3].tradeoff_amenities),n[3].tradeoff_greenspace!==void 0&&(M.greenspace=n[3].tradeoff_greenspace),t=new Gk({props:M}),Cr.push(()=>Fa(t,"lts",b)),Cr.push(()=>Fa(t,"nearbyAmenities",_)),Cr.push(()=>Fa(t,"greenspace",x)),t.$on("change",n[18]);let k=Vi(n[6]),v=[];for(let w=0;w<k.length;w+=1)v[w]=pf(df(n,k,w));return{c(){Hm(t.$$.fragment),o=pe(),r=ot("ul");for(let w=0;w<v.length;w+=1)v[w].c();a=pe(),l=ot("div"),c=ot("label"),h=Xe(`Give roads a good score if they have at least this many nearby amenities:
      `),d=ot("input"),_e(d,"type","number"),_e(d,"min","0")},m(w,O){Um(t,w,O),Ot(w,o,O),Ot(w,r,O);for(let T=0;T<v.length;T+=1)v[T]&&v[T].m(r,null);Ot(w,a,O),Ot(w,l,O),nt(l,c),nt(c,h),nt(c,d),ee(d,n[3].minimum_amenities),f=!0,p||(m=[ye(d,"input",n[21]),ye(d,"change",n[22])],p=!0)},p(w,O){const T={};if(!e&&O&8&&(e=!0,T.lts=w[3].tradeoff_lts,Na(()=>e=!1)),!i&&O&8&&(i=!0,T.nearbyAmenities=w[3].tradeoff_amenities,Na(()=>i=!1)),!s&&O&8&&(s=!0,T.greenspace=w[3].tradeoff_greenspace,Na(()=>s=!1)),t.$set(T),O&73){k=Vi(w[6]);let D;for(D=0;D<k.length;D+=1){const R=df(w,k,D);v[D]?v[D].p(R,O):(v[D]=pf(R),v[D].c(),v[D].m(r,null))}for(;D<v.length;D+=1)v[D].d(1);v.length=k.length}O&8&&hi(d.value)!==w[3].minimum_amenities&&ee(d,w[3].minimum_amenities)},i(w){f||(gn(t.$$.fragment,w),f=!0)},o(w){Rn(t.$$.fragment,w),f=!1},d(w){w&&(Et(o),Et(r),Et(a),Et(l)),Ym(t,w),Wl(v,w),p=!1,Ki(m)}}}function Kk(n){let t,e=Vi(n[6]),i=[];for(let s=0;s<e.length;s+=1)i[s]=mf(ff(n,e,s));return{c(){t=ot("ul");for(let s=0;s<i.length;s+=1)i[s].c()},m(s,o){Ot(s,t,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(t,null)},p(s,o){if(o&81){e=Vi(s[6]);let r;for(r=0;r<e.length;r+=1){const a=ff(s,e,r);i[r]?i[r].p(a,o):(i[r]=mf(a),i[r].c(),i[r].m(t,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=e.length}},i:ue,o:ue,d(s){s&&Et(t),Wl(i,s)}}}function Jk(n){let t,e=Vi(Object.keys(n[5])),i=[];for(let s=0;s<e.length;s+=1)i[s]=bf(gf(n,e,s));return{c(){t=ot("ul");for(let s=0;s<i.length;s+=1)i[s].c()},m(s,o){Ot(s,t,o);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(t,null)},p(s,o){if(o&33){e=Vi(Object.keys(s[5]));let r;for(r=0;r<e.length;r+=1){const a=gf(s,e,r);i[r]?i[r].p(a,o):(i[r]=bf(a),i[r].c(),i[r].m(t,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=e.length}},i:ue,o:ue,d(s){s&&Et(t),Wl(i,s)}}}function pf(n){let t,e=Mf[n[24]]+"",i,s,o=n[3][n[24]]+"",r,a,l,c,h,d;function f(){n[19].call(l,n[24])}return{c(){t=ot("li"),i=Xe(e),s=Xe(": "),r=Xe(o),a=pe(),l=ot("input"),c=pe(),_e(l,"type","range"),_e(l,"min","0.0"),_e(l,"max","1.0"),_e(l,"step","0.1"),Bi(t,"display","flex"),Bi(t,"justify-content","space-between")},m(p,m){Ot(p,t,m),nt(t,i),nt(t,s),nt(t,r),nt(t,a),nt(t,l),ee(l,n[3][n[24]]),nt(t,c),h||(d=[ye(l,"change",f),ye(l,"input",f),ye(l,"change",n[20])],h=!0)},p(p,m){n=p,m&8&&o!==(o=n[3][n[24]]+"")&&jl(r,o),m&72&&ee(l,n[3][n[24]])},d(p){p&&Et(t),h=!1,Ki(d)}}}function mf(n){let t,e,i=Mf[n[24]]+"",s,o,r,a,l,c;function h(){n[13].call(r,n[24])}return{c(){t=ot("li"),e=ot("label"),s=Xe(i),o=pe(),r=ot("input"),a=pe(),_e(r,"type","number"),_e(r,"min","1.0"),_e(r,"step","0.1")},m(d,f){Ot(d,t,f),nt(t,e),nt(e,s),nt(e,o),nt(e,r),ee(r,n[4][n[24]]),nt(t,a),l||(c=[ye(r,"input",h),ye(r,"change",n[14])],l=!0)},p(d,f){n=d,f&80&&hi(r.value)!==n[4][n[24]]&&ee(r,n[4][n[24]])},d(d){d&&Et(t),l=!1,Ki(c)}}}function bf(n){let t,e,i=n[24]+"",s,o,r,a,l,c;function h(){n[11].call(r,n[24])}return{c(){t=ot("li"),e=ot("label"),s=Xe(i),o=pe(),r=ot("input"),a=pe(),_e(r,"type","number"),_e(r,"min","1.0"),_e(r,"step","0.1")},m(d,f){Ot(d,t,f),nt(t,e),nt(e,s),nt(e,o),nt(e,r),ee(r,n[5][n[24]]),nt(t,a),l||(c=[ye(r,"input",h),ye(r,"change",n[12])],l=!0)},p(d,f){n=d,f&32&&i!==(i=n[24]+"")&&jl(s,i),f&32&&hi(r.value)!==n[5][n[24]]&&ee(r,n[5][n[24]])},d(d){d&&Et(t),l=!1,Ki(c)}}}function Zk(n){let t,e,i,s,o,r,a,l,c,h,d,f,p,m,b,_,x=JSON.stringify(n[0],null,2)+"",M,k,v,w,O,T,D,R,W,B;const Y=[Jk,Kk,qk],et=[];function Q(N,X){return N[1]=="OsmHighwayType"?0:N[1]=="ByLTS"?1:N[1]=="Generalized"?2:-1}return~(O=Q(n))&&(T=et[O]=Y[O](n)),{c(){t=ot("div"),e=ot("label"),i=Xe(`Cost function:
    `),s=ot("select"),o=ot("option"),o.textContent="Distance",r=ot("option"),r.textContent="Generalized cost function",a=ot("option"),a.textContent="Weight per LTS",l=ot("option"),l.textContent="Set a weight per OSM highway type",c=pe(),h=ot("dialog"),d=ot("button"),d.textContent="Close",f=pe(),p=ot("p"),p.innerHTML=`Copy this into a <i>config.json</i>
    file`,m=pe(),b=ot("pre"),_=Xe('"cost": '),M=Xe(x),k=pe(),v=ot("button"),v.textContent="See cost function JSON",w=pe(),T&&T.c(),D=ia(),o.__value="Distance",ee(o,o.__value),r.__value="Generalized",ee(r,r.__value),a.__value="ByLTS",ee(a,a.__value),l.__value="OsmHighwayType",ee(l,l.__value),n[1]===void 0&&xf(()=>n[7].call(s))},m(N,X){Ot(N,t,X),nt(t,e),nt(e,i),nt(e,s),nt(s,o),nt(s,r),nt(s,a),nt(s,l),Lr(s,n[1],!0),Ot(N,c,X),Ot(N,h,X),nt(h,d),nt(h,f),nt(h,p),nt(h,m),nt(h,b),nt(b,_),nt(b,M),n[9](h),Ot(N,k,X),Ot(N,v,X),Ot(N,w,X),~O&&et[O].m(N,X),Ot(N,D,X),R=!0,W||(B=[ye(s,"change",n[7]),ye(d,"click",n[8]),ye(v,"click",n[10])],W=!0)},p(N,[X]){X&2&&Lr(s,N[1]),(!R||X&1)&&x!==(x=JSON.stringify(N[0],null,2)+"")&&jl(M,x);let K=O;O=Q(N),O===K?~O&&et[O].p(N,X):(T&&($l(),Rn(et[K],1,1,()=>{et[K]=null}),Vl()),~O?(T=et[O],T?T.p(N,X):(T=et[O]=Y[O](N),T.c()),gn(T,1),T.m(D.parentNode,D)):T=null)},i(N){R||(gn(T),R=!0)},o(N){Rn(T),R=!1},d(N){N&&(Et(t),Et(c),Et(h),Et(k),Et(v),Et(w),Et(D)),n[9](null),~O&&et[O].d(N),W=!1,Ki(B)}}}function Qk(n,t,e){let{cost:i}=t,s,o="Distance",r={tradeoff_lts:50,tradeoff_amenities:30,tradeoff_greenspace:20,lts1:0,lts2:.2,lts3:.6,lts4:1,minimum_amenities:1},a=["lts1","lts2","lts3","lts4"],l={lts1:1,lts2:1,lts3:1,lts4:1},c={};for(let B of["cycleway","footway","living_street","motorway","motorway_link","path","pedestrian","primary","primary_link","residential","secondary","secondary_link","service","steps","tertiary","tertiary_link","track","trunk","trunk_link","unclassified"])c[B]=1;function h(B){B=="OsmHighwayType"?e(0,i={OsmHighwayType:c}):B=="ByLTS"?e(0,i={ByLTS:l}):B=="Generalized"?e(0,i={Generalized:r}):e(0,i=B)}function d(){o=vf(this),e(1,o)}const f=()=>s.close();function p(B){Cr[B?"unshift":"push"](()=>{s=B,e(2,s)})}const m=()=>s.showModal();function b(B){c[B]=hi(this.value),e(5,c)}const _=()=>e(0,i);function x(B){l[B]=hi(this.value),e(4,l)}const M=()=>e(0,i);function k(B){n.$$.not_equal(r.tradeoff_lts,B)&&(r.tradeoff_lts=B,e(3,r))}function v(B){n.$$.not_equal(r.tradeoff_amenities,B)&&(r.tradeoff_amenities=B,e(3,r))}function w(B){n.$$.not_equal(r.tradeoff_greenspace,B)&&(r.tradeoff_greenspace=B,e(3,r))}const O=()=>e(0,i);function T(B){r[B]=hi(this.value),e(3,r)}const D=()=>e(0,i);function R(){r.minimum_amenities=hi(this.value),e(3,r)}const W=()=>e(0,i);return n.$$set=B=>{"cost"in B&&e(0,i=B.cost)},n.$$.update=()=>{n.$$.dirty&2&&h(o)},[i,o,s,r,l,c,a,d,f,p,m,b,_,x,M,k,v,w,O,T,D,R,W]}class UC extends Gi{constructor(t){super(),qi(this,t,Qk,Zk,yi,{cost:0})}}function _f(n){let t;return{c(){t=ot("div"),t.textContent="Loading",_e(t,"class","svelte-1uuov7f")},m(e,i){Ot(e,t,i)},d(e){e&&Et(t)}}}function tC(n){let t,e=n[0]&&_f();return{c(){e&&e.c(),t=ia()},m(i,s){e&&e.m(i,s),Ot(i,t,s)},p(i,[s]){i[0]?e||(e=_f(),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:ue,o:ue,d(i){i&&Et(t),e&&e.d(i)}}}function eC(n,t,e){let{loading:i=!1}=t;return n.$$set=s=>{"loading"in s&&e(0,i=s.loading)},[i]}class YC extends Gi{constructor(t){super(),qi(this,t,eC,tC,yi,{loading:0})}}var Dp={exports:{}};(function(n,t){(function(e,i){n.exports=i()})(os,function(){var e=function(u,g){var y={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},S={on:function(P,E,F){if(y[P]===void 0)throw new Error("Invalid event type: "+P);y[P].push({selector:E,fn:F})},render:function(P){g.store.featureChanged(P)}},C=function(P,E){for(var F=y[P],z=F.length;z--;){var H=F[z];if(H.selector(E)){H.fn.call(S,E)||g.store.render(),g.ui.updateMapClasses();break}}};return u.start.call(S),{render:u.render,stop:function(){u.stop&&u.stop()},trash:function(){u.trash&&(u.trash(),g.store.render())},combineFeatures:function(){u.combineFeatures&&u.combineFeatures()},uncombineFeatures:function(){u.uncombineFeatures&&u.uncombineFeatures()},drag:function(P){C("drag",P)},click:function(P){C("click",P)},mousemove:function(P){C("mousemove",P)},mousedown:function(P){C("mousedown",P)},mouseup:function(P){C("mouseup",P)},mouseout:function(P){C("mouseout",P)},keydown:function(P){C("keydown",P)},keyup:function(P){C("keyup",P)},touchstart:function(P){C("touchstart",P)},touchmove:function(P){C("touchmove",P)},touchend:function(P){C("touchend",P)},tap:function(P){C("tap",P)}}};function i(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}function s(u){if(u.__esModule)return u;var g=u.default;if(typeof g=="function"){var y=function S(){if(this instanceof S){var C=[null];C.push.apply(C,arguments);var P=Function.bind.apply(g,C);return new P}return g.apply(this,arguments)};y.prototype=g.prototype}else y={};return Object.defineProperty(y,"__esModule",{value:!0}),Object.keys(u).forEach(function(S){var C=Object.getOwnPropertyDescriptor(u,S);Object.defineProperty(y,S,C.get?C:{enumerable:!0,get:function(){return u[S]}})}),y}var o={},r={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},a=r;function l(u){var g=0;if(u&&u.length>0){g+=Math.abs(c(u[0]));for(var y=1;y<u.length;y++)g-=Math.abs(c(u[y]))}return g}function c(u){var g,y,S,C,P,E,F=0,z=u.length;if(z>2){for(E=0;E<z;E++)E===z-2?(S=z-2,C=z-1,P=0):E===z-1?(S=z-1,C=0,P=1):(S=E,C=E+1,P=E+2),g=u[S],y=u[C],F+=(h(u[P][0])-h(g[0]))*Math.sin(h(y[1]));F=F*a.RADIUS*a.RADIUS/2}return F}function h(u){return u*Math.PI/180}o.geometry=function u(g){var y,S=0;switch(g.type){case"Polygon":return l(g.coordinates);case"MultiPolygon":for(y=0;y<g.coordinates.length;y++)S+=l(g.coordinates[y]);return S;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(y=0;y<g.geometries.length;y++)S+=u(g.geometries[y]);return S}},o.ring=c;var d={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},f={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},p={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},m={POLYGON:"polygon",LINE:"line_string",POINT:"point"},b={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},_={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},x={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},M={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},k={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},v={ACTIVE:"true",INACTIVE:"false"},w=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],O=-85,T=Object.freeze({__proto__:null,classes:d,sources:f,cursors:p,types:m,geojsonTypes:b,modes:_,events:x,updateActions:M,meta:k,activeStates:v,interactions:w,LAT_MIN:-90,LAT_RENDERED_MIN:O,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),D={Point:0,LineString:1,MultiLineString:1,Polygon:2};function R(u,g){var y=D[u.geometry.type]-D[g.geometry.type];return y===0&&u.geometry.type===b.POLYGON?u.area-g.area:y}function W(u){return u.map(function(g){return g.geometry.type===b.POLYGON&&(g.area=o.geometry({type:b.FEATURE,property:{},geometry:g.geometry})),g}).sort(R).map(function(g){return delete g.area,g})}function B(u,g){return g===void 0&&(g=0),[[u.point.x-g,u.point.y-g],[u.point.x+g,u.point.y+g]]}function Y(u){if(this._items={},this._nums={},this._length=u?u.length:0,u)for(var g=0,y=u.length;g<y;g++)this.add(u[g]),u[g]!==void 0&&(typeof u[g]=="string"?this._items[u[g]]=g:this._nums[u[g]]=g)}Y.prototype.add=function(u){return this.has(u)||(this._length++,typeof u=="string"?this._items[u]=this._length:this._nums[u]=this._length),this},Y.prototype.delete=function(u){return this.has(u)===!1||(this._length--,delete this._items[u],delete this._nums[u]),this},Y.prototype.has=function(u){return(typeof u=="string"||typeof u=="number")&&(this._items[u]!==void 0||this._nums[u]!==void 0)},Y.prototype.values=function(){var u=this,g=[];return Object.keys(this._items).forEach(function(y){g.push({k:y,v:u._items[y]})}),Object.keys(this._nums).forEach(function(y){g.push({k:JSON.parse(y),v:u._nums[y]})}),g.sort(function(y,S){return y.v-S.v}).map(function(y){return y.k})},Y.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var et=[k.FEATURE,k.MIDPOINT,k.VERTEX],Q={click:function(u,g,y){return N(u,g,y,y.options.clickBuffer)},touch:function(u,g,y){return N(u,g,y,y.options.touchBuffer)}};function N(u,g,y,S){if(y.map===null)return[];var C=u?B(u,S):g,P={};y.options.styles&&(P.layers=y.options.styles.map(function(H){return H.id}).filter(function(H){return y.map.getLayer(H)!=null}));var E=y.map.queryRenderedFeatures(C,P).filter(function(H){return et.indexOf(H.properties.meta)!==-1}),F=new Y,z=[];return E.forEach(function(H){var U=H.properties.id;F.has(U)||(F.add(U),z.push(H))}),W(z)}function X(u,g){var y=Q.click(u,null,g),S={mouse:p.NONE};return y[0]&&(S.mouse=y[0].properties.active===v.ACTIVE?p.MOVE:p.POINTER,S.feature=y[0].properties.meta),g.events.currentModeName().indexOf("draw")!==-1&&(S.mouse=p.ADD),g.ui.queueMapClasses(S),g.ui.updateMapClasses(),y[0]}function K(u,g){var y=u.x-g.x,S=u.y-g.y;return Math.sqrt(y*y+S*S)}function St(u,g,y){y===void 0&&(y={});var S=y.fineTolerance!=null?y.fineTolerance:4,C=y.grossTolerance!=null?y.grossTolerance:12,P=y.interval!=null?y.interval:500;u.point=u.point||g.point,u.time=u.time||g.time;var E=K(u.point,g.point);return E<S||E<C&&g.time-u.time<P}function yt(u,g,y){y===void 0&&(y={});var S=y.tolerance!=null?y.tolerance:25,C=y.interval!=null?y.interval:250;return u.point=u.point||g.point,u.time=u.time||g.time,K(u.point,g.point)<S&&g.time-u.time<C}var Xt={exports:{}},xe=Xt.exports=function(u,g){if(g||(g=16),u===void 0&&(u=128),u<=0)return"0";for(var y=Math.log(Math.pow(2,u))/Math.log(g),S=2;y===1/0;S*=2)y=Math.log(Math.pow(2,u/S))/Math.log(g)*S;var C=y-Math.floor(y),P="";for(S=0;S<Math.floor(y);S++)P=Math.floor(Math.random()*g).toString(g)+P;if(C){var E=Math.pow(g,C);P=Math.floor(Math.random()*E).toString(g)+P}var F=parseInt(P,g);return F!==1/0&&F>=Math.pow(2,u)?xe(u,g):P};xe.rack=function(u,g,y){var S=function(P){var E=0;do{if(E++>10){if(!y)throw new Error("too many ID collisions, use more bits");u+=y}var F=xe(u,g)}while(Object.hasOwnProperty.call(C,F));return C[F]=P,F},C=S.hats={};return S.get=function(P){return S.hats[P]},S.set=function(P,E){return S.hats[P]=E,S},S.bits=u||128,S.base=g||16,S};var ie=i(Xt.exports),xt=function(u,g){this.ctx=u,this.properties=g.properties||{},this.coordinates=g.geometry.coordinates,this.id=g.id||ie(),this.type=g.geometry.type};xt.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},xt.prototype.incomingCoords=function(u){this.setCoordinates(u)},xt.prototype.setCoordinates=function(u){this.coordinates=u,this.changed()},xt.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},xt.prototype.setProperty=function(u,g){this.properties[u]=g},xt.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:b.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},xt.prototype.internal=function(u){var g={id:this.id,meta:k.FEATURE,"meta:type":this.type,active:v.INACTIVE,mode:u};if(this.ctx.options.userProperties)for(var y in this.properties)g["user_"+y]=this.properties[y];return{type:b.FEATURE,properties:g,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Gt=function(u,g){xt.call(this,u,g)};(Gt.prototype=Object.create(xt.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Gt.prototype.updateCoordinate=function(u,g,y){this.coordinates=arguments.length===3?[g,y]:[u,g],this.changed()},Gt.prototype.getCoordinate=function(){return this.getCoordinates()};var qt=function(u,g){xt.call(this,u,g)};(qt.prototype=Object.create(xt.prototype)).isValid=function(){return this.coordinates.length>1},qt.prototype.addCoordinate=function(u,g,y){this.changed();var S=parseInt(u,10);this.coordinates.splice(S,0,[g,y])},qt.prototype.getCoordinate=function(u){var g=parseInt(u,10);return JSON.parse(JSON.stringify(this.coordinates[g]))},qt.prototype.removeCoordinate=function(u){this.changed(),this.coordinates.splice(parseInt(u,10),1)},qt.prototype.updateCoordinate=function(u,g,y){var S=parseInt(u,10);this.coordinates[S]=[g,y],this.changed()};var Lt=function(u,g){xt.call(this,u,g),this.coordinates=this.coordinates.map(function(y){return y.slice(0,-1)})};(Lt.prototype=Object.create(xt.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(u){return u.length>2})},Lt.prototype.incomingCoords=function(u){this.coordinates=u.map(function(g){return g.slice(0,-1)}),this.changed()},Lt.prototype.setCoordinates=function(u){this.coordinates=u,this.changed()},Lt.prototype.addCoordinate=function(u,g,y){this.changed();var S=u.split(".").map(function(C){return parseInt(C,10)});this.coordinates[S[0]].splice(S[1],0,[g,y])},Lt.prototype.removeCoordinate=function(u){this.changed();var g=u.split(".").map(function(S){return parseInt(S,10)}),y=this.coordinates[g[0]];y&&(y.splice(g[1],1),y.length<3&&this.coordinates.splice(g[0],1))},Lt.prototype.getCoordinate=function(u){var g=u.split(".").map(function(S){return parseInt(S,10)}),y=this.coordinates[g[0]];return JSON.parse(JSON.stringify(y[g[1]]))},Lt.prototype.getCoordinates=function(){return this.coordinates.map(function(u){return u.concat([u[0]])})},Lt.prototype.updateCoordinate=function(u,g,y){this.changed();var S=u.split("."),C=parseInt(S[0],10),P=parseInt(S[1],10);this.coordinates[C]===void 0&&(this.coordinates[C]=[]),this.coordinates[C][P]=[g,y]};var Lp={MultiPoint:Gt,MultiLineString:qt,MultiPolygon:Lt},mo=function(u,g,y,S,C){var P=y.split("."),E=parseInt(P[0],10),F=P[1]?P.slice(1).join("."):null;return u[E][g](F,S,C)},de=function(u,g){if(xt.call(this,u,g),delete this.coordinates,this.model=Lp[g.geometry.type],this.model===void 0)throw new TypeError(g.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(g.geometry.coordinates)};function st(u){this.map=u.map,this.drawConfig=JSON.parse(JSON.stringify(u.options||{})),this._ctx=u}(de.prototype=Object.create(xt.prototype))._coordinatesToFeatures=function(u){var g=this,y=this.model.bind(this);return u.map(function(S){return new y(g.ctx,{id:ie(),type:b.FEATURE,properties:{},geometry:{coordinates:S,type:g.type.replace("Multi","")}})})},de.prototype.isValid=function(){return this.features.every(function(u){return u.isValid()})},de.prototype.setCoordinates=function(u){this.features=this._coordinatesToFeatures(u),this.changed()},de.prototype.getCoordinate=function(u){return mo(this.features,"getCoordinate",u)},de.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(u){return u.type===b.POLYGON?u.getCoordinates():u.coordinates})))},de.prototype.updateCoordinate=function(u,g,y){mo(this.features,"updateCoordinate",u,g,y),this.changed()},de.prototype.addCoordinate=function(u,g,y){mo(this.features,"addCoordinate",u,g,y),this.changed()},de.prototype.removeCoordinate=function(u){mo(this.features,"removeCoordinate",u),this.changed()},de.prototype.getFeatures=function(){return this.features},st.prototype.setSelected=function(u){return this._ctx.store.setSelected(u)},st.prototype.setSelectedCoordinates=function(u){var g=this;this._ctx.store.setSelectedCoordinates(u),u.reduce(function(y,S){return y[S.feature_id]===void 0&&(y[S.feature_id]=!0,g._ctx.store.get(S.feature_id).changed()),y},{})},st.prototype.getSelected=function(){return this._ctx.store.getSelected()},st.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},st.prototype.isSelected=function(u){return this._ctx.store.isSelected(u)},st.prototype.getFeature=function(u){return this._ctx.store.get(u)},st.prototype.select=function(u){return this._ctx.store.select(u)},st.prototype.deselect=function(u){return this._ctx.store.deselect(u)},st.prototype.deleteFeature=function(u,g){return g===void 0&&(g={}),this._ctx.store.delete(u,g)},st.prototype.addFeature=function(u){return this._ctx.store.add(u)},st.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},st.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},st.prototype.setActionableState=function(u){u===void 0&&(u={});var g={trash:u.trash||!1,combineFeatures:u.combineFeatures||!1,uncombineFeatures:u.uncombineFeatures||!1};return this._ctx.events.actionable(g)},st.prototype.changeMode=function(u,g,y){return g===void 0&&(g={}),y===void 0&&(y={}),this._ctx.events.changeMode(u,g,y)},st.prototype.updateUIClasses=function(u){return this._ctx.ui.queueMapClasses(u)},st.prototype.activateUIButton=function(u){return this._ctx.ui.setActiveButton(u)},st.prototype.featuresAt=function(u,g,y){if(y===void 0&&(y="click"),y!=="click"&&y!=="touch")throw new Error("invalid buffer type");return Q[y](u,g,this._ctx)},st.prototype.newFeature=function(u){var g=u.geometry.type;return g===b.POINT?new Gt(this._ctx,u):g===b.LINE_STRING?new qt(this._ctx,u):g===b.POLYGON?new Lt(this._ctx,u):new de(this._ctx,u)},st.prototype.isInstanceOf=function(u,g){if(u===b.POINT)return g instanceof Gt;if(u===b.LINE_STRING)return g instanceof qt;if(u===b.POLYGON)return g instanceof Lt;if(u==="MultiFeature")return g instanceof de;throw new Error("Unknown feature class: "+u)},st.prototype.doRender=function(u){return this._ctx.store.featureChanged(u)},st.prototype.onSetup=function(){},st.prototype.onDrag=function(){},st.prototype.onClick=function(){},st.prototype.onMouseMove=function(){},st.prototype.onMouseDown=function(){},st.prototype.onMouseUp=function(){},st.prototype.onMouseOut=function(){},st.prototype.onKeyUp=function(){},st.prototype.onKeyDown=function(){},st.prototype.onTouchStart=function(){},st.prototype.onTouchMove=function(){},st.prototype.onTouchEnd=function(){},st.prototype.onTap=function(){},st.prototype.onStop=function(){},st.prototype.onTrash=function(){},st.prototype.onCombineFeature=function(){},st.prototype.onUncombineFeature=function(){},st.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Tc={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Ip=Object.keys(Tc);function Rp(u){var g=Object.keys(u);return function(y,S){S===void 0&&(S={});var C={},P=g.reduce(function(E,F){return E[F]=u[F],E},new st(y));return{start:function(){var E=this;C=P.onSetup(S),Ip.forEach(function(F){var z,H=Tc[F],U=function(){return!1};u[H]&&(U=function(){return!0}),E.on(F,U,(z=H,function($){return P[z](C,$)}))})},stop:function(){P.onStop(C)},trash:function(){P.onTrash(C)},combineFeatures:function(){P.onCombineFeatures(C)},uncombineFeatures:function(){P.onUncombineFeatures(C)},render:function(E,F){P.toDisplayFeatures(C,E,F)}}}}function Ji(u){return[].concat(u).filter(function(g){return g!==void 0})}function Fp(){var u=this;if(!(u.ctx.map&&u.ctx.map.getSource(f.HOT)!==void 0))return z();var g=u.ctx.events.currentModeName();u.ctx.ui.queueMapClasses({mode:g});var y=[],S=[];u.isDirty?S=u.getAllIds():(y=u.getChangedIds().filter(function(H){return u.get(H)!==void 0}),S=u.sources.hot.filter(function(H){return H.properties.id&&y.indexOf(H.properties.id)===-1&&u.get(H.properties.id)!==void 0}).map(function(H){return H.properties.id})),u.sources.hot=[];var C=u.sources.cold.length;u.sources.cold=u.isDirty?[]:u.sources.cold.filter(function(H){var U=H.properties.id||H.properties.parent;return y.indexOf(U)===-1});var P=C!==u.sources.cold.length||S.length>0;function E(H,U){var $=u.get(H).internal(g);u.ctx.events.currentModeRender($,function(Z){u.sources[U].push(Z)})}if(y.forEach(function(H){return E(H,"hot")}),S.forEach(function(H){return E(H,"cold")}),P&&u.ctx.map.getSource(f.COLD).setData({type:b.FEATURE_COLLECTION,features:u.sources.cold}),u.ctx.map.getSource(f.HOT).setData({type:b.FEATURE_COLLECTION,features:u.sources.hot}),u._emitSelectionChange&&(u.ctx.map.fire(x.SELECTION_CHANGE,{features:u.getSelected().map(function(H){return H.toGeoJSON()}),points:u.getSelectedCoordinates().map(function(H){return{type:b.FEATURE,properties:{},geometry:{type:b.POINT,coordinates:H.coordinates}}})}),u._emitSelectionChange=!1),u._deletedFeaturesToEmit.length){var F=u._deletedFeaturesToEmit.map(function(H){return H.toGeoJSON()});u._deletedFeaturesToEmit=[],u.ctx.map.fire(x.DELETE,{features:F})}function z(){u.isDirty=!1,u.clearChangedIds()}z(),u.ctx.map.fire(x.RENDER,{})}function kt(u){var g,y=this;this._features={},this._featureIds=new Y,this._selectedFeatureIds=new Y,this._selectedCoordinates=[],this._changedFeatureIds=new Y,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=u,this.sources={hot:[],cold:[]},this.render=function(){g||(g=requestAnimationFrame(function(){g=null,Fp.call(y)}))},this.isDirty=!1}function Ac(u,g){var y=u._selectedCoordinates.filter(function(S){return u._selectedFeatureIds.has(S.feature_id)});u._selectedCoordinates.length===y.length||g.silent||(u._emitSelectionChange=!0),u._selectedCoordinates=y}kt.prototype.createRenderBatch=function(){var u=this,g=this.render,y=0;return this.render=function(){y++},function(){u.render=g,y>0&&u.render()}},kt.prototype.setDirty=function(){return this.isDirty=!0,this},kt.prototype.featureChanged=function(u){return this._changedFeatureIds.add(u),this},kt.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},kt.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},kt.prototype.getAllIds=function(){return this._featureIds.values()},kt.prototype.add=function(u){return this.featureChanged(u.id),this._features[u.id]=u,this._featureIds.add(u.id),this},kt.prototype.delete=function(u,g){var y=this;return g===void 0&&(g={}),Ji(u).forEach(function(S){y._featureIds.has(S)&&(y._featureIds.delete(S),y._selectedFeatureIds.delete(S),g.silent||y._deletedFeaturesToEmit.indexOf(y._features[S])===-1&&y._deletedFeaturesToEmit.push(y._features[S]),delete y._features[S],y.isDirty=!0)}),Ac(this,g),this},kt.prototype.get=function(u){return this._features[u]},kt.prototype.getAll=function(){var u=this;return Object.keys(this._features).map(function(g){return u._features[g]})},kt.prototype.select=function(u,g){var y=this;return g===void 0&&(g={}),Ji(u).forEach(function(S){y._selectedFeatureIds.has(S)||(y._selectedFeatureIds.add(S),y._changedFeatureIds.add(S),g.silent||(y._emitSelectionChange=!0))}),this},kt.prototype.deselect=function(u,g){var y=this;return g===void 0&&(g={}),Ji(u).forEach(function(S){y._selectedFeatureIds.has(S)&&(y._selectedFeatureIds.delete(S),y._changedFeatureIds.add(S),g.silent||(y._emitSelectionChange=!0))}),Ac(this,g),this},kt.prototype.clearSelected=function(u){return u===void 0&&(u={}),this.deselect(this._selectedFeatureIds.values(),{silent:u.silent}),this},kt.prototype.setSelected=function(u,g){var y=this;return g===void 0&&(g={}),u=Ji(u),this.deselect(this._selectedFeatureIds.values().filter(function(S){return u.indexOf(S)===-1}),{silent:g.silent}),this.select(u.filter(function(S){return!y._selectedFeatureIds.has(S)}),{silent:g.silent}),this},kt.prototype.setSelectedCoordinates=function(u){return this._selectedCoordinates=u,this._emitSelectionChange=!0,this},kt.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},kt.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},kt.prototype.getSelected=function(){var u=this;return this._selectedFeatureIds.values().map(function(g){return u.get(g)})},kt.prototype.getSelectedCoordinates=function(){var u=this;return this._selectedCoordinates.map(function(g){return{coordinates:u.get(g.feature_id).getCoordinate(g.coord_path)}})},kt.prototype.isSelected=function(u){return this._selectedFeatureIds.has(u)},kt.prototype.setFeatureProperty=function(u,g,y){this.get(u).setProperty(g,y),this.featureChanged(u)},kt.prototype.storeMapConfig=function(){var u=this;w.forEach(function(g){u.ctx.map[g]&&(u._mapInitialConfig[g]=u.ctx.map[g].isEnabled())})},kt.prototype.restoreMapConfig=function(){var u=this;Object.keys(this._mapInitialConfig).forEach(function(g){u._mapInitialConfig[g]?u.ctx.map[g].enable():u.ctx.map[g].disable()})},kt.prototype.getInitialConfigValue=function(u){return this._mapInitialConfig[u]===void 0||this._mapInitialConfig[u]};var Np=function(){for(var u=arguments,g={},y=0;y<arguments.length;y++){var S=u[y];for(var C in S)Bp.call(S,C)&&(g[C]=S[C])}return g},Bp=Object.prototype.hasOwnProperty,bn=i(Np),zp=["mode","feature","mouse"];function $p(u){var g=null,y=null,S={onRemove:function(){return u.map.off("load",S.connect),clearInterval(y),S.removeLayers(),u.store.restoreMapConfig(),u.ui.removeButtons(),u.events.removeEventListeners(),u.ui.clearMapClasses(),u.boxZoomInitial&&u.map.boxZoom.enable(),u.map=null,u.container=null,u.store=null,g&&g.parentNode&&g.parentNode.removeChild(g),g=null,this},connect:function(){u.map.off("load",S.connect),clearInterval(y),S.addLayers(),u.store.storeMapConfig(),u.events.addEventListeners()},onAdd:function(C){var P=C.fire;return C.fire=function(E,F){var z=arguments;return P.length===1&&arguments.length!==1&&(z=[bn({},{type:E},F)]),P.apply(C,z)},u.map=C,u.events=function(E){var F=Object.keys(E.options.modes).reduce(function(I,G){return I[G]=Rp(E.options.modes[G]),I},{}),z={},H={},U={},$=null,Z=null;U.drag=function(I,G){G({point:I.point,time:new Date().getTime()})?(E.ui.queueMapClasses({mouse:p.DRAG}),Z.drag(I)):I.originalEvent.stopPropagation()},U.mousedrag=function(I){U.drag(I,function(G){return!St(z,G)})},U.touchdrag=function(I){U.drag(I,function(G){return!yt(H,G)})},U.mousemove=function(I){if((I.originalEvent.buttons!==void 0?I.originalEvent.buttons:I.originalEvent.which)===1)return U.mousedrag(I);var G=X(I,E);I.featureTarget=G,Z.mousemove(I)},U.mousedown=function(I){z={time:new Date().getTime(),point:I.point};var G=X(I,E);I.featureTarget=G,Z.mousedown(I)},U.mouseup=function(I){var G=X(I,E);I.featureTarget=G,St(z,{point:I.point,time:new Date().getTime()})?Z.click(I):Z.mouseup(I)},U.mouseout=function(I){Z.mouseout(I)},U.touchstart=function(I){if(E.options.touchEnabled){H={time:new Date().getTime(),point:I.point};var G=Q.touch(I,null,E)[0];I.featureTarget=G,Z.touchstart(I)}},U.touchmove=function(I){if(E.options.touchEnabled)return Z.touchmove(I),U.touchdrag(I)},U.touchend=function(I){if(I.originalEvent.preventDefault(),E.options.touchEnabled){var G=Q.touch(I,null,E)[0];I.featureTarget=G,yt(H,{time:new Date().getTime(),point:I.point})?Z.tap(I):Z.touchend(I)}};var Rt=function(I){return!(I===8||I===46||I>=48&&I<=57)};function tt(I,G,ft){ft===void 0&&(ft={}),Z.stop();var te=F[I];if(te===void 0)throw new Error(I+" is not valid");$=I;var Ut=te(E,G);Z=e(Ut,E),ft.silent||E.map.fire(x.MODE_CHANGE,{mode:I}),E.store.setDirty(),E.store.render()}U.keydown=function(I){(I.srcElement||I.target).classList.contains("mapboxgl-canvas")&&(I.keyCode!==8&&I.keyCode!==46||!E.options.controls.trash?Rt(I.keyCode)?Z.keydown(I):I.keyCode===49&&E.options.controls.point?tt(_.DRAW_POINT):I.keyCode===50&&E.options.controls.line_string?tt(_.DRAW_LINE_STRING):I.keyCode===51&&E.options.controls.polygon&&tt(_.DRAW_POLYGON):(I.preventDefault(),Z.trash()))},U.keyup=function(I){Rt(I.keyCode)&&Z.keyup(I)},U.zoomend=function(){E.store.changeZoom()},U.data=function(I){if(I.dataType==="style"){var G=E.setup,ft=E.map,te=E.options,Ut=E.store;te.styles.some(function(Ma){return ft.getLayer(Ma.id)})||(G.addLayers(),Ut.setDirty(),Ut.render())}};var Ht={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){$=E.options.defaultMode,Z=e(F[$](E),E)},changeMode:tt,actionable:function(I){var G=!1;Object.keys(I).forEach(function(ft){if(Ht[ft]===void 0)throw new Error("Invalid action type");Ht[ft]!==I[ft]&&(G=!0),Ht[ft]=I[ft]}),G&&E.map.fire(x.ACTIONABLE,{actions:Ht})},currentModeName:function(){return $},currentModeRender:function(I,G){return Z.render(I,G)},fire:function(I,G){U[I]&&U[I](G)},addEventListeners:function(){E.map.on("mousemove",U.mousemove),E.map.on("mousedown",U.mousedown),E.map.on("mouseup",U.mouseup),E.map.on("data",U.data),E.map.on("touchmove",U.touchmove),E.map.on("touchstart",U.touchstart),E.map.on("touchend",U.touchend),E.container.addEventListener("mouseout",U.mouseout),E.options.keybindings&&(E.container.addEventListener("keydown",U.keydown),E.container.addEventListener("keyup",U.keyup))},removeEventListeners:function(){E.map.off("mousemove",U.mousemove),E.map.off("mousedown",U.mousedown),E.map.off("mouseup",U.mouseup),E.map.off("data",U.data),E.map.off("touchmove",U.touchmove),E.map.off("touchstart",U.touchstart),E.map.off("touchend",U.touchend),E.container.removeEventListener("mouseout",U.mouseout),E.options.keybindings&&(E.container.removeEventListener("keydown",U.keydown),E.container.removeEventListener("keyup",U.keyup))},trash:function(I){Z.trash(I)},combineFeatures:function(){Z.combineFeatures()},uncombineFeatures:function(){Z.uncombineFeatures()},getMode:function(){return $}}}(u),u.ui=function(E){var F={},z=null,H={mode:null,feature:null,mouse:null},U={mode:null,feature:null,mouse:null};function $(I){U=bn(U,I)}function Z(){var I,G;if(E.container){var ft=[],te=[];zp.forEach(function(Ut){U[Ut]!==H[Ut]&&(ft.push(Ut+"-"+H[Ut]),U[Ut]!==null&&te.push(Ut+"-"+U[Ut]))}),ft.length>0&&(I=E.container.classList).remove.apply(I,ft),te.length>0&&(G=E.container.classList).add.apply(G,te),H=bn(H,U)}}function Rt(I,G){G===void 0&&(G={});var ft=document.createElement("button");return ft.className=d.CONTROL_BUTTON+" "+G.className,ft.setAttribute("title",G.title),G.container.appendChild(ft),ft.addEventListener("click",function(te){if(te.preventDefault(),te.stopPropagation(),te.target===z)return tt(),void G.onDeactivate();Ht(I),G.onActivate()},!0),ft}function tt(){z&&(z.classList.remove(d.ACTIVE_BUTTON),z=null)}function Ht(I){tt();var G=F[I];G&&G&&I!=="trash"&&(G.classList.add(d.ACTIVE_BUTTON),z=G)}return{setActiveButton:Ht,queueMapClasses:$,updateMapClasses:Z,clearMapClasses:function(){$({mode:null,feature:null,mouse:null}),Z()},addButtons:function(){var I=E.options.controls,G=document.createElement("div");return G.className=d.CONTROL_GROUP+" "+d.CONTROL_BASE,I&&(I[m.LINE]&&(F[m.LINE]=Rt(m.LINE,{container:G,className:d.CONTROL_BUTTON_LINE,title:"LineString tool "+(E.options.keybindings?"(l)":""),onActivate:function(){return E.events.changeMode(_.DRAW_LINE_STRING)},onDeactivate:function(){return E.events.trash()}})),I[m.POLYGON]&&(F[m.POLYGON]=Rt(m.POLYGON,{container:G,className:d.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(E.options.keybindings?"(p)":""),onActivate:function(){return E.events.changeMode(_.DRAW_POLYGON)},onDeactivate:function(){return E.events.trash()}})),I[m.POINT]&&(F[m.POINT]=Rt(m.POINT,{container:G,className:d.CONTROL_BUTTON_POINT,title:"Marker tool "+(E.options.keybindings?"(m)":""),onActivate:function(){return E.events.changeMode(_.DRAW_POINT)},onDeactivate:function(){return E.events.trash()}})),I.trash&&(F.trash=Rt("trash",{container:G,className:d.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){E.events.trash()}})),I.combine_features&&(F.combine_features=Rt("combineFeatures",{container:G,className:d.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){E.events.combineFeatures()}})),I.uncombine_features&&(F.uncombine_features=Rt("uncombineFeatures",{container:G,className:d.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){E.events.uncombineFeatures()}}))),G},removeButtons:function(){Object.keys(F).forEach(function(I){var G=F[I];G.parentNode&&G.parentNode.removeChild(G),delete F[I]})}}}(u),u.container=C.getContainer(),u.store=new kt(u),g=u.ui.addButtons(),u.options.boxSelect&&(u.boxZoomInitial=C.boxZoom.isEnabled(),C.boxZoom.disable(),C.dragPan.disable(),C.dragPan.enable()),C.loaded()?S.connect():(C.on("load",S.connect),y=setInterval(function(){C.loaded()&&S.connect()},16)),u.events.start(),g},addLayers:function(){u.map.addSource(f.COLD,{data:{type:b.FEATURE_COLLECTION,features:[]},type:"geojson"}),u.map.addSource(f.HOT,{data:{type:b.FEATURE_COLLECTION,features:[]},type:"geojson"}),u.options.styles.forEach(function(C){u.map.addLayer(C)}),u.store.setDirty(!0),u.store.render()},removeLayers:function(){u.options.styles.forEach(function(C){u.map.getLayer(C.id)&&u.map.removeLayer(C.id)}),u.map.getSource(f.COLD)&&u.map.removeSource(f.COLD),u.map.getSource(f.HOT)&&u.map.removeSource(f.HOT)}};return u.setup=S,S}var Dc=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function bo(u){return function(g){var y=g.featureTarget;return!!y&&!!y.properties&&y.properties.meta===u}}function Lc(u){return!!u.originalEvent&&!!u.originalEvent.shiftKey&&u.originalEvent.button===0}function Wn(u){return!!u.featureTarget&&!!u.featureTarget.properties&&u.featureTarget.properties.active===v.ACTIVE&&u.featureTarget.properties.meta===k.FEATURE}function ma(u){return!!u.featureTarget&&!!u.featureTarget.properties&&u.featureTarget.properties.active===v.INACTIVE&&u.featureTarget.properties.meta===k.FEATURE}function _o(u){return u.featureTarget===void 0}function ba(u){return!!u.featureTarget&&!!u.featureTarget.properties&&u.featureTarget.properties.meta===k.FEATURE}function Zi(u){var g=u.featureTarget;return!!g&&!!g.properties&&g.properties.meta===k.VERTEX}function yo(u){return!!u.originalEvent&&u.originalEvent.shiftKey===!0}function xo(u){return u.keyCode===27}function vo(u){return u.keyCode===13}var Vp=Object.freeze({__proto__:null,isOfMetaType:bo,isShiftMousedown:Lc,isActiveFeature:Wn,isInactiveFeature:ma,noTarget:_o,isFeature:ba,isVertex:Zi,isShiftDown:yo,isEscapeKey:xo,isEnterKey:vo,isTrue:function(){return!0}}),jp=vi;function vi(u,g){this.x=u,this.y=g}vi.prototype={clone:function(){return new vi(this.x,this.y)},add:function(u){return this.clone()._add(u)},sub:function(u){return this.clone()._sub(u)},multByPoint:function(u){return this.clone()._multByPoint(u)},divByPoint:function(u){return this.clone()._divByPoint(u)},mult:function(u){return this.clone()._mult(u)},div:function(u){return this.clone()._div(u)},rotate:function(u){return this.clone()._rotate(u)},rotateAround:function(u,g){return this.clone()._rotateAround(u,g)},matMult:function(u){return this.clone()._matMult(u)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(u){return this.x===u.x&&this.y===u.y},dist:function(u){return Math.sqrt(this.distSqr(u))},distSqr:function(u){var g=u.x-this.x,y=u.y-this.y;return g*g+y*y},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(u){return Math.atan2(this.y-u.y,this.x-u.x)},angleWith:function(u){return this.angleWithSep(u.x,u.y)},angleWithSep:function(u,g){return Math.atan2(this.x*g-this.y*u,this.x*u+this.y*g)},_matMult:function(u){var g=u[0]*this.x+u[1]*this.y,y=u[2]*this.x+u[3]*this.y;return this.x=g,this.y=y,this},_add:function(u){return this.x+=u.x,this.y+=u.y,this},_sub:function(u){return this.x-=u.x,this.y-=u.y,this},_mult:function(u){return this.x*=u,this.y*=u,this},_div:function(u){return this.x/=u,this.y/=u,this},_multByPoint:function(u){return this.x*=u.x,this.y*=u.y,this},_divByPoint:function(u){return this.x/=u.x,this.y/=u.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var u=this.y;return this.y=this.x,this.x=-u,this},_rotate:function(u){var g=Math.cos(u),y=Math.sin(u),S=g*this.x-y*this.y,C=y*this.x+g*this.y;return this.x=S,this.y=C,this},_rotateAround:function(u,g){var y=Math.cos(u),S=Math.sin(u),C=g.x+y*(this.x-g.x)-S*(this.y-g.y),P=g.y+S*(this.x-g.x)+y*(this.y-g.y);return this.x=C,this.y=P,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},vi.convert=function(u){return u instanceof vi?u:Array.isArray(u)?new vi(u[0],u[1]):u};var Wp=i(jp);function _a(u,g){var y=g.getBoundingClientRect();return new Wp(u.clientX-y.left-(g.clientLeft||0),u.clientY-y.top-(g.clientTop||0))}function wi(u,g,y,S){return{type:b.FEATURE,properties:{meta:k.VERTEX,parent:u,coord_path:y,active:S?v.ACTIVE:v.INACTIVE},geometry:{type:b.POINT,coordinates:g}}}function Ic(u,g,y){var S=g.geometry.coordinates,C=y.geometry.coordinates;if(S[1]>85||S[1]<O||C[1]>85||C[1]<O)return null;var P={lng:(S[0]+C[0])/2,lat:(S[1]+C[1])/2};return{type:b.FEATURE,properties:{meta:k.MIDPOINT,parent:u,lng:P.lng,lat:P.lat,coord_path:y.properties.coord_path},geometry:{type:b.POINT,coordinates:[P.lng,P.lat]}}}function wo(u,g,y){g===void 0&&(g={}),y===void 0&&(y=null);var S,C=u.geometry,P=C.type,E=C.coordinates,F=u.properties&&u.properties.id,z=[];function H($,Z){var Rt="",tt=null;$.forEach(function(Ht,I){var G=Z!=null?Z+"."+I:String(I),ft=wi(F,Ht,G,U(G));if(g.midpoints&&tt){var te=Ic(F,tt,ft);te&&z.push(te)}tt=ft;var Ut=JSON.stringify(Ht);Rt!==Ut&&z.push(ft),I===0&&(Rt=Ut)})}function U($){return!!g.selectedPaths&&g.selectedPaths.indexOf($)!==-1}return P===b.POINT?z.push(wi(F,E,y,U(y))):P===b.POLYGON?E.forEach(function($,Z){H($,y!==null?y+"."+Z:String(Z))}):P===b.LINE_STRING?H(E,y):P.indexOf(b.MULTI_PREFIX)===0&&(S=P.replace(b.MULTI_PREFIX,""),E.forEach(function($,Z){var Rt={type:b.FEATURE,properties:u.properties,geometry:{type:S,coordinates:$}};z=z.concat(wo(Rt,g,Z))})),z}var Le={enable:function(u){setTimeout(function(){u.map&&u.map.doubleClickZoom&&u._ctx&&u._ctx.store&&u._ctx.store.getInitialConfigValue&&u._ctx.store.getInitialConfigValue("doubleClickZoom")&&u.map.doubleClickZoom.enable()},0)},disable:function(u){setTimeout(function(){u.map&&u.map.doubleClickZoom&&u.map.doubleClickZoom.disable()},0)}},Mo={exports:{}},Rc=function(u){if(!u||!u.type)return null;var g=Hp[u.type];if(!g)return null;if(g==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:u}]};if(g==="feature")return{type:"FeatureCollection",features:[u]};if(g==="featurecollection")return u},Hp={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},Up=i(Rc),Yp=Object.freeze({__proto__:null,default:function u(g){switch(g&&g.type||null){case"FeatureCollection":return g.features=g.features.reduce(function(y,S){return y.concat(u(S))},[]),g;case"Feature":return g.geometry?u(g.geometry).map(function(y){var S={type:"Feature",properties:JSON.parse(JSON.stringify(g.properties)),geometry:y};return g.id!==void 0&&(S.id=g.id),S}):[g];case"MultiPoint":return g.coordinates.map(function(y){return{type:"Point",coordinates:y}});case"MultiPolygon":return g.coordinates.map(function(y){return{type:"Polygon",coordinates:y}});case"MultiLineString":return g.coordinates.map(function(y){return{type:"LineString",coordinates:y}});case"GeometryCollection":return g.geometries.map(u).reduce(function(y,S){return y.concat(S)},[]);case"Point":case"Polygon":case"LineString":return[g]}}}),Xp=Rc,So=s(Yp),Gp=function(u){return function g(y){return Array.isArray(y)&&y.length&&typeof y[0]=="number"?[y]:y.reduce(function(S,C){return Array.isArray(C)&&Array.isArray(C[0])?S.concat(g(C)):(S.push(C),S)},[])}(u)};So instanceof Function||(So=So.default);var Fc={exports:{}},qp=Fc.exports=function(u){return new Se(u)};function Se(u){this.value=u}function Nc(u,g,y){var S=[],C=[],P=!0;return function E(F){var z=y?Bc(F):F,H={},U=!0,$={node:z,node_:F,path:[].concat(S),parent:C[C.length-1],parents:C,key:S.slice(-1)[0],isRoot:S.length===0,level:S.length,circular:null,update:function(tt,Ht){$.isRoot||($.parent.node[$.key]=tt),$.node=tt,Ht&&(U=!1)},delete:function(tt){delete $.parent.node[$.key],tt&&(U=!1)},remove:function(tt){zc($.parent.node)?$.parent.node.splice($.key,1):delete $.parent.node[$.key],tt&&(U=!1)},keys:null,before:function(tt){H.before=tt},after:function(tt){H.after=tt},pre:function(tt){H.pre=tt},post:function(tt){H.post=tt},stop:function(){P=!1},block:function(){U=!1}};if(!P)return $;function Z(){if(typeof $.node=="object"&&$.node!==null){$.keys&&$.node_===$.node||($.keys=ko($.node)),$.isLeaf=$.keys.length==0;for(var tt=0;tt<C.length;tt++)if(C[tt].node_===F){$.circular=C[tt];break}}else $.isLeaf=!0,$.keys=null;$.notLeaf=!$.isLeaf,$.notRoot=!$.isRoot}Z();var Rt=g.call($,$.node);return Rt!==void 0&&$.update&&$.update(Rt),H.before&&H.before.call($,$.node),U&&(typeof $.node!="object"||$.node===null||$.circular||(C.push($),Z(),Co($.keys,function(tt,Ht){S.push(tt),H.pre&&H.pre.call($,$.node[tt],tt);var I=E($.node[tt]);y&&Po.call($.node,tt)&&($.node[tt]=I.node),I.isLast=Ht==$.keys.length-1,I.isFirst=Ht==0,H.post&&H.post.call($,I),S.pop()}),C.pop()),H.after&&H.after.call($,$.node)),$}(u).node}function Bc(u){if(typeof u=="object"&&u!==null){var g;if(zc(u))g=[];else if(Mi(u)==="[object Date]")g=new Date(u.getTime?u.getTime():u);else if(function(C){return Mi(C)==="[object RegExp]"}(u))g=new RegExp(u);else if(function(C){return Mi(C)==="[object Error]"}(u))g={message:u.message};else if(function(C){return Mi(C)==="[object Boolean]"}(u))g=new Boolean(u);else if(function(C){return Mi(C)==="[object Number]"}(u))g=new Number(u);else if(function(C){return Mi(C)==="[object String]"}(u))g=new String(u);else if(Object.create&&Object.getPrototypeOf)g=Object.create(Object.getPrototypeOf(u));else if(u.constructor===Object)g={};else{var y=u.constructor&&u.constructor.prototype||u.__proto__||{},S=function(){};S.prototype=y,g=new S}return Co(ko(u),function(C){g[C]=u[C]}),g}return u}Se.prototype.get=function(u){for(var g=this.value,y=0;y<u.length;y++){var S=u[y];if(!g||!Po.call(g,S)){g=void 0;break}g=g[S]}return g},Se.prototype.has=function(u){for(var g=this.value,y=0;y<u.length;y++){var S=u[y];if(!g||!Po.call(g,S))return!1;g=g[S]}return!0},Se.prototype.set=function(u,g){for(var y=this.value,S=0;S<u.length-1;S++){var C=u[S];Po.call(y,C)||(y[C]={}),y=y[C]}return y[u[S]]=g,g},Se.prototype.map=function(u){return Nc(this.value,u,!0)},Se.prototype.forEach=function(u){return this.value=Nc(this.value,u,!1),this.value},Se.prototype.reduce=function(u,g){var y=arguments.length===1,S=y?this.value:g;return this.forEach(function(C){this.isRoot&&y||(S=u.call(this,S,C))}),S},Se.prototype.paths=function(){var u=[];return this.forEach(function(g){u.push(this.path)}),u},Se.prototype.nodes=function(){var u=[];return this.forEach(function(g){u.push(this.node)}),u},Se.prototype.clone=function(){var u=[],g=[];return function y(S){for(var C=0;C<u.length;C++)if(u[C]===S)return g[C];if(typeof S=="object"&&S!==null){var P=Bc(S);return u.push(S),g.push(P),Co(ko(S),function(E){P[E]=y(S[E])}),u.pop(),g.pop(),P}return S}(this.value)};var ko=Object.keys||function(u){var g=[];for(var y in u)g.push(y);return g};function Mi(u){return Object.prototype.toString.call(u)}var zc=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"},Co=function(u,g){if(u.forEach)return u.forEach(g);for(var y=0;y<u.length;y++)g(u[y],y,u)};Co(ko(Se.prototype),function(u){qp[u]=function(g){var y=[].slice.call(arguments,1),S=new Se(g);return S[u].apply(S,y)}});var Po=Object.hasOwnProperty||function(u,g){return g in u},Kp=Fc.exports,Jp=ce;function ce(u){if(!(this instanceof ce))return new ce(u);this._bbox=u||[1/0,1/0,-1/0,-1/0],this._valid=!!u}ce.prototype.include=function(u){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],u[0]),this._bbox[1]=Math.min(this._bbox[1],u[1]),this._bbox[2]=Math.max(this._bbox[2],u[0]),this._bbox[3]=Math.max(this._bbox[3],u[1]),this},ce.prototype.equals=function(u){var g;return g=u instanceof ce?u.bbox():u,this._bbox[0]==g[0]&&this._bbox[1]==g[1]&&this._bbox[2]==g[2]&&this._bbox[3]==g[3]},ce.prototype.center=function(u){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},ce.prototype.union=function(u){var g;return this._valid=!0,g=u instanceof ce?u.bbox():u,this._bbox[0]=Math.min(this._bbox[0],g[0]),this._bbox[1]=Math.min(this._bbox[1],g[1]),this._bbox[2]=Math.max(this._bbox[2],g[2]),this._bbox[3]=Math.max(this._bbox[3],g[3]),this},ce.prototype.bbox=function(){return this._valid?this._bbox:null},ce.prototype.contains=function(u){if(!u)return this._fastContains();if(!this._valid)return null;var g=u[0],y=u[1];return this._bbox[0]<=g&&this._bbox[1]<=y&&this._bbox[2]>=g&&this._bbox[3]>=y},ce.prototype.intersect=function(u){return this._valid?(g=u instanceof ce?u.bbox():u,!(this._bbox[0]>g[2]||this._bbox[2]<g[0]||this._bbox[3]<g[1]||this._bbox[1]>g[3])):null;var g},ce.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var u="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",u)},ce.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Zp=function(u){if(!u)return[];var g=So(Xp(u)),y=[];return g.features.forEach(function(S){S.geometry&&(y=y.concat(Gp(S.geometry.coordinates)))}),y},Qp=Kp,tm=Jp,$c={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},em=Object.keys($c);function ya(u){for(var g=tm(),y=Zp(u),S=0;S<y.length;S++)g.include(y[S]);return g}Mo.exports=function(u){return ya(u).bbox()},Mo.exports.polygon=function(u){return ya(u).polygon()},Mo.exports.bboxify=function(u){return Qp(u).map(function(g){g&&em.some(function(y){return!!g[y]&&$c[y].indexOf(g.type)!==-1})&&(g.bbox=ya(g).bbox(),this.update(g))})};var nm=i(Mo.exports),Oo=-90;function xa(u,g){var y=Oo,S=90,C=Oo,P=90,E=270,F=-270;u.forEach(function(H){var U=nm(H),$=U[1],Z=U[3],Rt=U[0],tt=U[2];$>y&&(y=$),Z<S&&(S=Z),Z>C&&(C=Z),$<P&&(P=$),Rt<E&&(E=Rt),tt>F&&(F=tt)});var z=g;return y+z.lat>85&&(z.lat=85-y),C+z.lat>90&&(z.lat=90-C),S+z.lat<-85&&(z.lat=-85-S),P+z.lat<Oo&&(z.lat=Oo-P),E+z.lng<=-270&&(z.lng+=360*Math.ceil(Math.abs(z.lng)/360)),F+z.lng>=270&&(z.lng-=360*Math.ceil(Math.abs(z.lng)/360)),z}function va(u,g){var y=xa(u.map(function(S){return S.toGeoJSON()}),g);u.forEach(function(S){var C,P=S.getCoordinates(),E=function(z){var H={lng:z[0]+y.lng,lat:z[1]+y.lat};return[H.lng,H.lat]},F=function(z){return z.map(function(H){return E(H)})};S.type===b.POINT?C=E(P):S.type===b.LINE_STRING||S.type===b.MULTI_POINT?C=P.map(E):S.type===b.POLYGON||S.type===b.MULTI_LINE_STRING?C=P.map(F):S.type===b.MULTI_POLYGON&&(C=P.map(function(z){return z.map(function(H){return F(H)})})),S.incomingCoords(C)})}var Kt={onSetup:function(u){var g=this,y={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:u.featureIds||[]};return this.setSelected(y.initiallySelectedFeatureIds.filter(function(S){return g.getFeature(S)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),y},fireUpdate:function(){this.map.fire(x.UPDATE,{action:M.MOVE,features:this.getSelected().map(function(u){return u.toGeoJSON()})})},fireActionable:function(){var u=this,g=this.getSelected(),y=g.filter(function(F){return u.isInstanceOf("MultiFeature",F)}),S=!1;if(g.length>1){S=!0;var C=g[0].type.replace("Multi","");g.forEach(function(F){F.type.replace("Multi","")!==C&&(S=!1)})}var P=y.length>0,E=g.length>0;this.setActionableState({combineFeatures:S,uncombineFeatures:P,trash:E})},getUniqueIds:function(u){return u.length?u.map(function(g){return g.properties.id}).filter(function(g){return g!==void 0}).reduce(function(g,y){return g.add(y),g},new Y).values():[]},stopExtendedInteractions:function(u){u.boxSelectElement&&(u.boxSelectElement.parentNode&&u.boxSelectElement.parentNode.removeChild(u.boxSelectElement),u.boxSelectElement=null),this.map.dragPan.enable(),u.boxSelecting=!1,u.canBoxSelect=!1,u.dragMoving=!1,u.canDragMove=!1},onStop:function(){Le.enable(this)},onMouseMove:function(u,g){return ba(g)&&u.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(u),!0},onMouseOut:function(u){return!u.dragMoving||this.fireUpdate()}};Kt.onTap=Kt.onClick=function(u,g){return _o(g)?this.clickAnywhere(u,g):bo(k.VERTEX)(g)?this.clickOnVertex(u,g):ba(g)?this.clickOnFeature(u,g):void 0},Kt.clickAnywhere=function(u){var g=this,y=this.getSelectedIds();y.length&&(this.clearSelectedFeatures(),y.forEach(function(S){return g.doRender(S)})),Le.enable(this),this.stopExtendedInteractions(u)},Kt.clickOnVertex=function(u,g){this.changeMode(_.DIRECT_SELECT,{featureId:g.featureTarget.properties.parent,coordPath:g.featureTarget.properties.coord_path,startPos:g.lngLat}),this.updateUIClasses({mouse:p.MOVE})},Kt.startOnActiveFeature=function(u,g){this.stopExtendedInteractions(u),this.map.dragPan.disable(),this.doRender(g.featureTarget.properties.id),u.canDragMove=!0,u.dragMoveLocation=g.lngLat},Kt.clickOnFeature=function(u,g){var y=this;Le.disable(this),this.stopExtendedInteractions(u);var S=yo(g),C=this.getSelectedIds(),P=g.featureTarget.properties.id,E=this.isSelected(P);if(!S&&E&&this.getFeature(P).type!==b.POINT)return this.changeMode(_.DIRECT_SELECT,{featureId:P});E&&S?(this.deselect(P),this.updateUIClasses({mouse:p.POINTER}),C.length===1&&Le.enable(this)):!E&&S?(this.select(P),this.updateUIClasses({mouse:p.MOVE})):E||S||(C.forEach(function(F){return y.doRender(F)}),this.setSelected(P),this.updateUIClasses({mouse:p.MOVE})),this.doRender(P)},Kt.onMouseDown=function(u,g){return Wn(g)?this.startOnActiveFeature(u,g):this.drawConfig.boxSelect&&Lc(g)?this.startBoxSelect(u,g):void 0},Kt.startBoxSelect=function(u,g){this.stopExtendedInteractions(u),this.map.dragPan.disable(),u.boxSelectStartLocation=_a(g.originalEvent,this.map.getContainer()),u.canBoxSelect=!0},Kt.onTouchStart=function(u,g){if(Wn(g))return this.startOnActiveFeature(u,g)},Kt.onDrag=function(u,g){return u.canDragMove?this.dragMove(u,g):this.drawConfig.boxSelect&&u.canBoxSelect?this.whileBoxSelect(u,g):void 0},Kt.whileBoxSelect=function(u,g){u.boxSelecting=!0,this.updateUIClasses({mouse:p.ADD}),u.boxSelectElement||(u.boxSelectElement=document.createElement("div"),u.boxSelectElement.classList.add(d.BOX_SELECT),this.map.getContainer().appendChild(u.boxSelectElement));var y=_a(g.originalEvent,this.map.getContainer()),S=Math.min(u.boxSelectStartLocation.x,y.x),C=Math.max(u.boxSelectStartLocation.x,y.x),P=Math.min(u.boxSelectStartLocation.y,y.y),E=Math.max(u.boxSelectStartLocation.y,y.y),F="translate("+S+"px, "+P+"px)";u.boxSelectElement.style.transform=F,u.boxSelectElement.style.WebkitTransform=F,u.boxSelectElement.style.width=C-S+"px",u.boxSelectElement.style.height=E-P+"px"},Kt.dragMove=function(u,g){u.dragMoving=!0,g.originalEvent.stopPropagation();var y={lng:g.lngLat.lng-u.dragMoveLocation.lng,lat:g.lngLat.lat-u.dragMoveLocation.lat};va(this.getSelected(),y),u.dragMoveLocation=g.lngLat},Kt.onTouchEnd=Kt.onMouseUp=function(u,g){var y=this;if(u.dragMoving)this.fireUpdate();else if(u.boxSelecting){var S=[u.boxSelectStartLocation,_a(g.originalEvent,this.map.getContainer())],C=this.featuresAt(null,S,"click"),P=this.getUniqueIds(C).filter(function(E){return!y.isSelected(E)});P.length&&(this.select(P),P.forEach(function(E){return y.doRender(E)}),this.updateUIClasses({mouse:p.MOVE}))}this.stopExtendedInteractions(u)},Kt.toDisplayFeatures=function(u,g,y){g.properties.active=this.isSelected(g.properties.id)?v.ACTIVE:v.INACTIVE,y(g),this.fireActionable(),g.properties.active===v.ACTIVE&&g.geometry.type!==b.POINT&&wo(g).forEach(y)},Kt.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Kt.onCombineFeatures=function(){var u=this.getSelected();if(!(u.length===0||u.length<2)){for(var g=[],y=[],S=u[0].type.replace("Multi",""),C=0;C<u.length;C++){var P=u[C];if(P.type.replace("Multi","")!==S)return;P.type.includes("Multi")?P.getCoordinates().forEach(function(F){g.push(F)}):g.push(P.getCoordinates()),y.push(P.toGeoJSON())}if(y.length>1){var E=this.newFeature({type:b.FEATURE,properties:y[0].properties,geometry:{type:"Multi"+S,coordinates:g}});this.addFeature(E),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([E.id]),this.map.fire(x.COMBINE_FEATURES,{createdFeatures:[E.toGeoJSON()],deletedFeatures:y})}this.fireActionable()}},Kt.onUncombineFeatures=function(){var u=this,g=this.getSelected();if(g.length!==0){for(var y=[],S=[],C=function(E){var F=g[E];u.isInstanceOf("MultiFeature",F)&&(F.getFeatures().forEach(function(z){u.addFeature(z),z.properties=F.properties,y.push(z.toGeoJSON()),u.select([z.id])}),u.deleteFeature(F.id,{silent:!0}),S.push(F.toGeoJSON()))},P=0;P<g.length;P++)C(P);y.length>1&&this.map.fire(x.UNCOMBINE_FEATURES,{createdFeatures:y,deletedFeatures:S}),this.fireActionable()}};var Vc=bo(k.VERTEX),jc=bo(k.MIDPOINT),_n={fireUpdate:function(){this.map.fire(x.UPDATE,{action:M.CHANGE_COORDINATES,features:this.getSelected().map(function(u){return u.toGeoJSON()})})},fireActionable:function(u){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:u.selectedCoordPaths.length>0})},startDragging:function(u,g){this.map.dragPan.disable(),u.canDragMove=!0,u.dragMoveLocation=g.lngLat},stopDragging:function(u){this.map.dragPan.enable(),u.dragMoving=!1,u.canDragMove=!1,u.dragMoveLocation=null},onVertex:function(u,g){this.startDragging(u,g);var y=g.featureTarget.properties,S=u.selectedCoordPaths.indexOf(y.coord_path);yo(g)||S!==-1?yo(g)&&S===-1&&u.selectedCoordPaths.push(y.coord_path):u.selectedCoordPaths=[y.coord_path];var C=this.pathsToCoordinates(u.featureId,u.selectedCoordPaths);this.setSelectedCoordinates(C)},onMidpoint:function(u,g){this.startDragging(u,g);var y=g.featureTarget.properties;u.feature.addCoordinate(y.coord_path,y.lng,y.lat),this.fireUpdate(),u.selectedCoordPaths=[y.coord_path]},pathsToCoordinates:function(u,g){return g.map(function(y){return{feature_id:u,coord_path:y}})},onFeature:function(u,g){u.selectedCoordPaths.length===0?this.startDragging(u,g):this.stopDragging(u)},dragFeature:function(u,g,y){va(this.getSelected(),y),u.dragMoveLocation=g.lngLat},dragVertex:function(u,g,y){for(var S=u.selectedCoordPaths.map(function(F){return u.feature.getCoordinate(F)}),C=xa(S.map(function(F){return{type:b.FEATURE,properties:{},geometry:{type:b.POINT,coordinates:F}}}),y),P=0;P<S.length;P++){var E=S[P];u.feature.updateCoordinate(u.selectedCoordPaths[P],E[0]+C.lng,E[1]+C.lat)}},clickNoTarget:function(){this.changeMode(_.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(_.SIMPLE_SELECT)},clickActiveFeature:function(u){u.selectedCoordPaths=[],this.clearSelectedCoordinates(),u.feature.changed()},onSetup:function(u){var g=u.featureId,y=this.getFeature(g);if(!y)throw new Error("You must provide a featureId to enter direct_select mode");if(y.type===b.POINT)throw new TypeError("direct_select mode doesn't handle point features");var S={featureId:g,feature:y,dragMoveLocation:u.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:u.coordPath?[u.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(g,S.selectedCoordPaths)),this.setSelected(g),Le.disable(this),this.setActionableState({trash:!0}),S},onStop:function(){Le.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(u,g,y){u.featureId===g.properties.id?(g.properties.active=v.ACTIVE,y(g),wo(g,{map:this.map,midpoints:!0,selectedPaths:u.selectedCoordPaths}).forEach(y)):(g.properties.active=v.INACTIVE,y(g)),this.fireActionable(u)},onTrash:function(u){u.selectedCoordPaths.sort(function(g,y){return y.localeCompare(g,"en",{numeric:!0})}).forEach(function(g){return u.feature.removeCoordinate(g)}),this.fireUpdate(),u.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(u),u.feature.isValid()===!1&&(this.deleteFeature([u.featureId]),this.changeMode(_.SIMPLE_SELECT,{}))},onMouseMove:function(u,g){var y=Wn(g),S=Vc(g),C=jc(g),P=u.selectedCoordPaths.length===0;return y&&P||S&&!P?this.updateUIClasses({mouse:p.MOVE}):this.updateUIClasses({mouse:p.NONE}),(S||y||C)&&u.dragMoving&&this.fireUpdate(),this.stopDragging(u),!0},onMouseOut:function(u){return u.dragMoving&&this.fireUpdate(),!0}};_n.onTouchStart=_n.onMouseDown=function(u,g){return Vc(g)?this.onVertex(u,g):Wn(g)?this.onFeature(u,g):jc(g)?this.onMidpoint(u,g):void 0},_n.onDrag=function(u,g){if(u.canDragMove===!0){u.dragMoving=!0,g.originalEvent.stopPropagation();var y={lng:g.lngLat.lng-u.dragMoveLocation.lng,lat:g.lngLat.lat-u.dragMoveLocation.lat};u.selectedCoordPaths.length>0?this.dragVertex(u,g,y):this.dragFeature(u,g,y),u.dragMoveLocation=g.lngLat}},_n.onClick=function(u,g){return _o(g)?this.clickNoTarget(u,g):Wn(g)?this.clickActiveFeature(u,g):ma(g)?this.clickInactive(u,g):void this.stopDragging(u)},_n.onTap=function(u,g){return _o(g)?this.clickNoTarget(u,g):Wn(g)?this.clickActiveFeature(u,g):ma(g)?this.clickInactive(u,g):void 0},_n.onTouchEnd=_n.onMouseUp=function(u){u.dragMoving&&this.fireUpdate(),this.stopDragging(u)};var ze={};function Eo(u,g){return!!u.lngLat&&u.lngLat.lng===g[0]&&u.lngLat.lat===g[1]}ze.onSetup=function(){var u=this.newFeature({type:b.FEATURE,properties:{},geometry:{type:b.POINT,coordinates:[]}});return this.addFeature(u),this.clearSelectedFeatures(),this.updateUIClasses({mouse:p.ADD}),this.activateUIButton(m.POINT),this.setActionableState({trash:!0}),{point:u}},ze.stopDrawingAndRemove=function(u){this.deleteFeature([u.point.id],{silent:!0}),this.changeMode(_.SIMPLE_SELECT)},ze.onTap=ze.onClick=function(u,g){this.updateUIClasses({mouse:p.MOVE}),u.point.updateCoordinate("",g.lngLat.lng,g.lngLat.lat),this.map.fire(x.CREATE,{features:[u.point.toGeoJSON()]}),this.changeMode(_.SIMPLE_SELECT,{featureIds:[u.point.id]})},ze.onStop=function(u){this.activateUIButton(),u.point.getCoordinate().length||this.deleteFeature([u.point.id],{silent:!0})},ze.toDisplayFeatures=function(u,g,y){var S=g.properties.id===u.point.id;if(g.properties.active=S?v.ACTIVE:v.INACTIVE,!S)return y(g)},ze.onTrash=ze.stopDrawingAndRemove,ze.onKeyUp=function(u,g){if(xo(g)||vo(g))return this.stopDrawingAndRemove(u,g)};var Hn={onSetup:function(){var u=this.newFeature({type:b.FEATURE,properties:{},geometry:{type:b.POLYGON,coordinates:[[]]}});return this.addFeature(u),this.clearSelectedFeatures(),Le.disable(this),this.updateUIClasses({mouse:p.ADD}),this.activateUIButton(m.POLYGON),this.setActionableState({trash:!0}),{polygon:u,currentVertexPosition:0}},clickAnywhere:function(u,g){if(u.currentVertexPosition>0&&Eo(g,u.polygon.coordinates[0][u.currentVertexPosition-1]))return this.changeMode(_.SIMPLE_SELECT,{featureIds:[u.polygon.id]});this.updateUIClasses({mouse:p.ADD}),u.polygon.updateCoordinate("0."+u.currentVertexPosition,g.lngLat.lng,g.lngLat.lat),u.currentVertexPosition++,u.polygon.updateCoordinate("0."+u.currentVertexPosition,g.lngLat.lng,g.lngLat.lat)},clickOnVertex:function(u){return this.changeMode(_.SIMPLE_SELECT,{featureIds:[u.polygon.id]})},onMouseMove:function(u,g){u.polygon.updateCoordinate("0."+u.currentVertexPosition,g.lngLat.lng,g.lngLat.lat),Zi(g)&&this.updateUIClasses({mouse:p.POINTER})}};Hn.onTap=Hn.onClick=function(u,g){return Zi(g)?this.clickOnVertex(u,g):this.clickAnywhere(u,g)},Hn.onKeyUp=function(u,g){xo(g)?(this.deleteFeature([u.polygon.id],{silent:!0}),this.changeMode(_.SIMPLE_SELECT)):vo(g)&&this.changeMode(_.SIMPLE_SELECT,{featureIds:[u.polygon.id]})},Hn.onStop=function(u){this.updateUIClasses({mouse:p.NONE}),Le.enable(this),this.activateUIButton(),this.getFeature(u.polygon.id)!==void 0&&(u.polygon.removeCoordinate("0."+u.currentVertexPosition),u.polygon.isValid()?this.map.fire(x.CREATE,{features:[u.polygon.toGeoJSON()]}):(this.deleteFeature([u.polygon.id],{silent:!0}),this.changeMode(_.SIMPLE_SELECT,{},{silent:!0})))},Hn.toDisplayFeatures=function(u,g,y){var S=g.properties.id===u.polygon.id;if(g.properties.active=S?v.ACTIVE:v.INACTIVE,!S)return y(g);if(g.geometry.coordinates.length!==0){var C=g.geometry.coordinates[0].length;if(!(C<3)){if(g.properties.meta=k.FEATURE,y(wi(u.polygon.id,g.geometry.coordinates[0][0],"0.0",!1)),C>3){var P=g.geometry.coordinates[0].length-3;y(wi(u.polygon.id,g.geometry.coordinates[0][P],"0."+P,!1))}if(C<=4){var E=[[g.geometry.coordinates[0][0][0],g.geometry.coordinates[0][0][1]],[g.geometry.coordinates[0][1][0],g.geometry.coordinates[0][1][1]]];if(y({type:b.FEATURE,properties:g.properties,geometry:{coordinates:E,type:b.LINE_STRING}}),C===3)return}return y(g)}}},Hn.onTrash=function(u){this.deleteFeature([u.polygon.id],{silent:!0}),this.changeMode(_.SIMPLE_SELECT)};var Un={onSetup:function(u){var g,y,S=(u=u||{}).featureId,C="forward";if(S){if(!(g=this.getFeature(S)))throw new Error("Could not find a feature with the provided featureId");var P=u.from;if(P&&P.type==="Feature"&&P.geometry&&P.geometry.type==="Point"&&(P=P.geometry),P&&P.type==="Point"&&P.coordinates&&P.coordinates.length===2&&(P=P.coordinates),!P||!Array.isArray(P))throw new Error("Please use the `from` property to indicate which point to continue the line from");var E=g.coordinates.length-1;if(g.coordinates[E][0]===P[0]&&g.coordinates[E][1]===P[1])y=E+1,g.addCoordinate.apply(g,[y].concat(g.coordinates[E]));else{if(g.coordinates[0][0]!==P[0]||g.coordinates[0][1]!==P[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");C="backwards",y=0,g.addCoordinate.apply(g,[y].concat(g.coordinates[0]))}}else g=this.newFeature({type:b.FEATURE,properties:{},geometry:{type:b.LINE_STRING,coordinates:[]}}),y=0,this.addFeature(g);return this.clearSelectedFeatures(),Le.disable(this),this.updateUIClasses({mouse:p.ADD}),this.activateUIButton(m.LINE),this.setActionableState({trash:!0}),{line:g,currentVertexPosition:y,direction:C}},clickAnywhere:function(u,g){if(u.currentVertexPosition>0&&Eo(g,u.line.coordinates[u.currentVertexPosition-1])||u.direction==="backwards"&&Eo(g,u.line.coordinates[u.currentVertexPosition+1]))return this.changeMode(_.SIMPLE_SELECT,{featureIds:[u.line.id]});this.updateUIClasses({mouse:p.ADD}),u.line.updateCoordinate(u.currentVertexPosition,g.lngLat.lng,g.lngLat.lat),u.direction==="forward"?(u.currentVertexPosition++,u.line.updateCoordinate(u.currentVertexPosition,g.lngLat.lng,g.lngLat.lat)):u.line.addCoordinate(0,g.lngLat.lng,g.lngLat.lat)},clickOnVertex:function(u){return this.changeMode(_.SIMPLE_SELECT,{featureIds:[u.line.id]})},onMouseMove:function(u,g){u.line.updateCoordinate(u.currentVertexPosition,g.lngLat.lng,g.lngLat.lat),Zi(g)&&this.updateUIClasses({mouse:p.POINTER})}};Un.onTap=Un.onClick=function(u,g){if(Zi(g))return this.clickOnVertex(u,g);this.clickAnywhere(u,g)},Un.onKeyUp=function(u,g){vo(g)?this.changeMode(_.SIMPLE_SELECT,{featureIds:[u.line.id]}):xo(g)&&(this.deleteFeature([u.line.id],{silent:!0}),this.changeMode(_.SIMPLE_SELECT))},Un.onStop=function(u){Le.enable(this),this.activateUIButton(),this.getFeature(u.line.id)!==void 0&&(u.line.removeCoordinate(""+u.currentVertexPosition),u.line.isValid()?this.map.fire(x.CREATE,{features:[u.line.toGeoJSON()]}):(this.deleteFeature([u.line.id],{silent:!0}),this.changeMode(_.SIMPLE_SELECT,{},{silent:!0})))},Un.onTrash=function(u){this.deleteFeature([u.line.id],{silent:!0}),this.changeMode(_.SIMPLE_SELECT)},Un.toDisplayFeatures=function(u,g,y){var S=g.properties.id===u.line.id;if(g.properties.active=S?v.ACTIVE:v.INACTIVE,!S)return y(g);g.geometry.coordinates.length<2||(g.properties.meta=k.FEATURE,y(wi(u.line.id,g.geometry.coordinates[u.direction==="forward"?g.geometry.coordinates.length-2:1],""+(u.direction==="forward"?g.geometry.coordinates.length-2:1),!1)),y(g))};var Wc={simple_select:Kt,direct_select:_n,draw_point:ze,draw_polygon:Hn,draw_line_string:Un},im={defaultMode:_.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Dc,modes:Wc,controls:{},userProperties:!1},sm={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},om={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Hc(u,g){return u.map(function(y){return y.source?y:bn(y,{id:y.id+"."+g,source:g==="hot"?f.HOT:f.COLD})})}var wa={exports:{}};(function(u,g){var y="__lodash_hash_undefined__",S=9007199254740991,C="[object Arguments]",P="[object Array]",E="[object Boolean]",F="[object Date]",z="[object Error]",H="[object Function]",U="[object Map]",$="[object Number]",Z="[object Object]",Rt="[object Promise]",tt="[object RegExp]",Ht="[object Set]",I="[object String]",G="[object Symbol]",ft="[object WeakMap]",te="[object ArrayBuffer]",Ut="[object DataView]",Ma=/^\[object .+?Constructor\]$/,cm=/^(?:0|[1-9]\d*)$/,Ct={};Ct["[object Float32Array]"]=Ct["[object Float64Array]"]=Ct["[object Int8Array]"]=Ct["[object Int16Array]"]=Ct["[object Int32Array]"]=Ct["[object Uint8Array]"]=Ct["[object Uint8ClampedArray]"]=Ct["[object Uint16Array]"]=Ct["[object Uint32Array]"]=!0,Ct[C]=Ct[P]=Ct[te]=Ct[E]=Ct[Ut]=Ct[F]=Ct[z]=Ct[H]=Ct[U]=Ct[$]=Ct[Z]=Ct[tt]=Ct[Ht]=Ct[I]=Ct[ft]=!1;var Xc=typeof os=="object"&&os&&os.Object===Object&&os,hm=typeof self=="object"&&self&&self.Object===Object&&self,Ke=Xc||hm||Function("return this")(),Gc=g&&!g.nodeType&&g,qc=Gc&&u&&!u.nodeType&&u,Kc=qc&&qc.exports===Gc,Sa=Kc&&Xc.process,Jc=function(){try{return Sa&&Sa.binding&&Sa.binding("util")}catch{}}(),Zc=Jc&&Jc.isTypedArray;function um(A,L){for(var V=-1,q=A==null?0:A.length;++V<q;)if(L(A[V],V,A))return!0;return!1}function dm(A){var L=-1,V=Array(A.size);return A.forEach(function(q,Pt){V[++L]=[Pt,q]}),V}function fm(A){var L=-1,V=Array(A.size);return A.forEach(function(q){V[++L]=q}),V}var Qc,th,eh,gm=Array.prototype,pm=Function.prototype,Ao=Object.prototype,ka=Ke["__core-js_shared__"],nh=pm.toString,$e=Ao.hasOwnProperty,ih=(Qc=/[^.]+$/.exec(ka&&ka.keys&&ka.keys.IE_PROTO||""))?"Symbol(src)_1."+Qc:"",sh=Ao.toString,mm=RegExp("^"+nh.call($e).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oh=Kc?Ke.Buffer:void 0,Do=Ke.Symbol,rh=Ke.Uint8Array,ah=Ao.propertyIsEnumerable,bm=gm.splice,Yn=Do?Do.toStringTag:void 0,lh=Object.getOwnPropertySymbols,_m=oh?oh.isBuffer:void 0,ym=(th=Object.keys,eh=Object,function(A){return th(eh(A))}),Ca=Si(Ke,"DataView"),Qi=Si(Ke,"Map"),Pa=Si(Ke,"Promise"),Oa=Si(Ke,"Set"),Ea=Si(Ke,"WeakMap"),ts=Si(Object,"create"),xm=qn(Ca),vm=qn(Qi),wm=qn(Pa),Mm=qn(Oa),Sm=qn(Ea),ch=Do?Do.prototype:void 0,Ta=ch?ch.valueOf:void 0;function Xn(A){var L=-1,V=A==null?0:A.length;for(this.clear();++L<V;){var q=A[L];this.set(q[0],q[1])}}function Je(A){var L=-1,V=A==null?0:A.length;for(this.clear();++L<V;){var q=A[L];this.set(q[0],q[1])}}function Gn(A){var L=-1,V=A==null?0:A.length;for(this.clear();++L<V;){var q=A[L];this.set(q[0],q[1])}}function Lo(A){var L=-1,V=A==null?0:A.length;for(this.__data__=new Gn;++L<V;)this.add(A[L])}function yn(A){var L=this.__data__=new Je(A);this.size=L.size}function km(A,L){var V=Fo(A),q=!V&&Tm(A),Pt=!V&&!q&&Aa(A),at=!V&&!q&&!Pt&&_h(A),Nt=V||q||Pt||at,Yt=Nt?function(Zt,Ve){for(var Ze=-1,he=Array(Zt);++Ze<Zt;)he[Ze]=Ve(Ze);return he}(A.length,String):[],Ie=Yt.length;for(var Jt in A)!L&&!$e.call(A,Jt)||Nt&&(Jt=="length"||Pt&&(Jt=="offset"||Jt=="parent")||at&&(Jt=="buffer"||Jt=="byteLength"||Jt=="byteOffset")||Em(Jt,Ie))||Yt.push(Jt);return Yt}function Io(A,L){for(var V=A.length;V--;)if(gh(A[V][0],L))return V;return-1}function es(A){return A==null?A===void 0?"[object Undefined]":"[object Null]":Yn&&Yn in Object(A)?function(L){var V=$e.call(L,Yn),q=L[Yn];try{L[Yn]=void 0;var Pt=!0}catch{}var at=sh.call(L);return Pt&&(V?L[Yn]=q:delete L[Yn]),at}(A):function(L){return sh.call(L)}(A)}function hh(A){return ns(A)&&es(A)==C}function uh(A,L,V,q,Pt){return A===L||(A==null||L==null||!ns(A)&&!ns(L)?A!=A&&L!=L:function(at,Nt,Yt,Ie,Jt,Zt){var Ve=Fo(at),Ze=Fo(Nt),he=Ve?P:xn(at),Qe=Ze?P:xn(Nt),ki=(he=he==C?Z:he)==Z,No=(Qe=Qe==C?Z:Qe)==Z,Ci=he==Qe;if(Ci&&Aa(at)){if(!Aa(Nt))return!1;Ve=!0,ki=!1}if(Ci&&!ki)return Zt||(Zt=new yn),Ve||_h(at)?dh(at,Nt,Yt,Ie,Jt,Zt):function(vt,gt,Bo,vn,Da,ke,tn){switch(Bo){case Ut:if(vt.byteLength!=gt.byteLength||vt.byteOffset!=gt.byteOffset)return!1;vt=vt.buffer,gt=gt.buffer;case te:return!(vt.byteLength!=gt.byteLength||!ke(new rh(vt),new rh(gt)));case E:case F:case $:return gh(+vt,+gt);case z:return vt.name==gt.name&&vt.message==gt.message;case tt:case I:return vt==gt+"";case U:var wn=dm;case Ht:var ss=1&vn;if(wn||(wn=fm),vt.size!=gt.size&&!ss)return!1;var zo=tn.get(vt);if(zo)return zo==gt;vn|=2,tn.set(vt,gt);var Pi=dh(wn(vt),wn(gt),vn,Da,ke,tn);return tn.delete(vt),Pi;case G:if(Ta)return Ta.call(vt)==Ta.call(gt)}return!1}(at,Nt,he,Yt,Ie,Jt,Zt);if(!(1&Yt)){var is=ki&&$e.call(at,"__wrapped__"),yh=No&&$e.call(Nt,"__wrapped__");if(is||yh){var Dm=is?at.value():at,Lm=yh?Nt.value():Nt;return Zt||(Zt=new yn),Jt(Dm,Lm,Yt,Ie,Zt)}}return Ci?(Zt||(Zt=new yn),function(vt,gt,Bo,vn,Da,ke){var tn=1&Bo,wn=fh(vt),ss=wn.length,zo=fh(gt).length;if(ss!=zo&&!tn)return!1;for(var Pi=ss;Pi--;){var Kn=wn[Pi];if(!(tn?Kn in gt:$e.call(gt,Kn)))return!1}var xh=ke.get(vt);if(xh&&ke.get(gt))return xh==gt;var $o=!0;ke.set(vt,gt),ke.set(gt,vt);for(var La=tn;++Pi<ss;){var Vo=vt[Kn=wn[Pi]],jo=gt[Kn];if(vn)var vh=tn?vn(jo,Vo,Kn,gt,vt,ke):vn(Vo,jo,Kn,vt,gt,ke);if(!(vh===void 0?Vo===jo||Da(Vo,jo,Bo,vn,ke):vh)){$o=!1;break}La||(La=Kn=="constructor")}if($o&&!La){var Wo=vt.constructor,Ho=gt.constructor;Wo==Ho||!("constructor"in vt)||!("constructor"in gt)||typeof Wo=="function"&&Wo instanceof Wo&&typeof Ho=="function"&&Ho instanceof Ho||($o=!1)}return ke.delete(vt),ke.delete(gt),$o}(at,Nt,Yt,Ie,Jt,Zt)):!1}(A,L,V,q,uh,Pt))}function Cm(A){return!(!bh(A)||function(L){return!!ih&&ih in L}(A))&&(ph(A)?mm:Ma).test(qn(A))}function Pm(A){if(V=(L=A)&&L.constructor,q=typeof V=="function"&&V.prototype||Ao,L!==q)return ym(A);var L,V,q,Pt=[];for(var at in Object(A))$e.call(A,at)&&at!="constructor"&&Pt.push(at);return Pt}function dh(A,L,V,q,Pt,at){var Nt=1&V,Yt=A.length,Ie=L.length;if(Yt!=Ie&&!(Nt&&Ie>Yt))return!1;var Jt=at.get(A);if(Jt&&at.get(L))return Jt==L;var Zt=-1,Ve=!0,Ze=2&V?new Lo:void 0;for(at.set(A,L),at.set(L,A);++Zt<Yt;){var he=A[Zt],Qe=L[Zt];if(q)var ki=Nt?q(Qe,he,Zt,L,A,at):q(he,Qe,Zt,A,L,at);if(ki!==void 0){if(ki)continue;Ve=!1;break}if(Ze){if(!um(L,function(No,Ci){if(is=Ci,!Ze.has(is)&&(he===No||Pt(he,No,V,q,at)))return Ze.push(Ci);var is})){Ve=!1;break}}else if(he!==Qe&&!Pt(he,Qe,V,q,at)){Ve=!1;break}}return at.delete(A),at.delete(L),Ve}function fh(A){return function(L,V,q){var Pt=V(L);return Fo(L)?Pt:function(at,Nt){for(var Yt=-1,Ie=Nt.length,Jt=at.length;++Yt<Ie;)at[Jt+Yt]=Nt[Yt];return at}(Pt,q(L))}(A,Am,Om)}function Ro(A,L){var V,q,Pt=A.__data__;return((q=typeof(V=L))=="string"||q=="number"||q=="symbol"||q=="boolean"?V!=="__proto__":V===null)?Pt[typeof L=="string"?"string":"hash"]:Pt.map}function Si(A,L){var V=function(q,Pt){return q==null?void 0:q[Pt]}(A,L);return Cm(V)?V:void 0}Xn.prototype.clear=function(){this.__data__=ts?ts(null):{},this.size=0},Xn.prototype.delete=function(A){var L=this.has(A)&&delete this.__data__[A];return this.size-=L?1:0,L},Xn.prototype.get=function(A){var L=this.__data__;if(ts){var V=L[A];return V===y?void 0:V}return $e.call(L,A)?L[A]:void 0},Xn.prototype.has=function(A){var L=this.__data__;return ts?L[A]!==void 0:$e.call(L,A)},Xn.prototype.set=function(A,L){var V=this.__data__;return this.size+=this.has(A)?0:1,V[A]=ts&&L===void 0?y:L,this},Je.prototype.clear=function(){this.__data__=[],this.size=0},Je.prototype.delete=function(A){var L=this.__data__,V=Io(L,A);return!(V<0)&&(V==L.length-1?L.pop():bm.call(L,V,1),--this.size,!0)},Je.prototype.get=function(A){var L=this.__data__,V=Io(L,A);return V<0?void 0:L[V][1]},Je.prototype.has=function(A){return Io(this.__data__,A)>-1},Je.prototype.set=function(A,L){var V=this.__data__,q=Io(V,A);return q<0?(++this.size,V.push([A,L])):V[q][1]=L,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new Xn,map:new(Qi||Je),string:new Xn}},Gn.prototype.delete=function(A){var L=Ro(this,A).delete(A);return this.size-=L?1:0,L},Gn.prototype.get=function(A){return Ro(this,A).get(A)},Gn.prototype.has=function(A){return Ro(this,A).has(A)},Gn.prototype.set=function(A,L){var V=Ro(this,A),q=V.size;return V.set(A,L),this.size+=V.size==q?0:1,this},Lo.prototype.add=Lo.prototype.push=function(A){return this.__data__.set(A,y),this},Lo.prototype.has=function(A){return this.__data__.has(A)},yn.prototype.clear=function(){this.__data__=new Je,this.size=0},yn.prototype.delete=function(A){var L=this.__data__,V=L.delete(A);return this.size=L.size,V},yn.prototype.get=function(A){return this.__data__.get(A)},yn.prototype.has=function(A){return this.__data__.has(A)},yn.prototype.set=function(A,L){var V=this.__data__;if(V instanceof Je){var q=V.__data__;if(!Qi||q.length<199)return q.push([A,L]),this.size=++V.size,this;V=this.__data__=new Gn(q)}return V.set(A,L),this.size=V.size,this};var Om=lh?function(A){return A==null?[]:(A=Object(A),function(L,V){for(var q=-1,Pt=L==null?0:L.length,at=0,Nt=[];++q<Pt;){var Yt=L[q];V(Yt,q,L)&&(Nt[at++]=Yt)}return Nt}(lh(A),function(L){return ah.call(A,L)}))}:function(){return[]},xn=es;function Em(A,L){return!!(L=L??S)&&(typeof A=="number"||cm.test(A))&&A>-1&&A%1==0&&A<L}function qn(A){if(A!=null){try{return nh.call(A)}catch{}try{return A+""}catch{}}return""}function gh(A,L){return A===L||A!=A&&L!=L}(Ca&&xn(new Ca(new ArrayBuffer(1)))!=Ut||Qi&&xn(new Qi)!=U||Pa&&xn(Pa.resolve())!=Rt||Oa&&xn(new Oa)!=Ht||Ea&&xn(new Ea)!=ft)&&(xn=function(A){var L=es(A),V=L==Z?A.constructor:void 0,q=V?qn(V):"";if(q)switch(q){case xm:return Ut;case vm:return U;case wm:return Rt;case Mm:return Ht;case Sm:return ft}return L});var Tm=hh(function(){return arguments}())?hh:function(A){return ns(A)&&$e.call(A,"callee")&&!ah.call(A,"callee")},Fo=Array.isArray,Aa=_m||function(){return!1};function ph(A){if(!bh(A))return!1;var L=es(A);return L==H||L=="[object GeneratorFunction]"||L=="[object AsyncFunction]"||L=="[object Proxy]"}function mh(A){return typeof A=="number"&&A>-1&&A%1==0&&A<=S}function bh(A){var L=typeof A;return A!=null&&(L=="object"||L=="function")}function ns(A){return A!=null&&typeof A=="object"}var _h=Zc?function(A){return function(L){return A(L)}}(Zc):function(A){return ns(A)&&mh(A.length)&&!!Ct[es(A)]};function Am(A){return(L=A)!=null&&mh(L.length)&&!ph(L)?km(A):Pm(A);var L}u.exports=function(A,L){return uh(A,L)}})(wa,wa.exports);var Uc=i(wa.exports);function Yc(u,g){return u.length===g.length&&JSON.stringify(u.map(function(y){return y}).sort())===JSON.stringify(g.map(function(y){return y}).sort())}var rm={Polygon:Lt,LineString:qt,Point:Gt,MultiPolygon:de,MultiLineString:de,MultiPoint:de},am=Object.freeze({__proto__:null,CommonSelectors:Vp,constrainFeatureMovement:xa,createMidPoint:Ic,createSupplementaryPoints:wo,createVertex:wi,doubleClickZoom:Le,euclideanDistance:K,featuresAt:Q,getFeatureAtAndSetCursors:X,isClick:St,isEventAtCoordinates:Eo,isTap:yt,mapEventToBoundingBox:B,ModeHandler:e,moveFeatures:va,sortFeatures:W,stringSetsAreEqual:Yc,StringSet:Y,theme:Dc,toDenseArray:Ji}),lm=function(u,g){var y={options:u=function(C){C===void 0&&(C={});var P=bn(C);return C.controls||(P.controls={}),C.displayControlsDefault===!1?P.controls=bn(om,C.controls):P.controls=bn(sm,C.controls),(P=bn(im,P)).styles=Hc(P.styles,"cold").concat(Hc(P.styles,"hot")),P}(u)};g=function(C,P){return P.modes=_,P.getFeatureIdsAt=function(E){return Q.click({point:E},null,C).map(function(F){return F.properties.id})},P.getSelectedIds=function(){return C.store.getSelectedIds()},P.getSelected=function(){return{type:b.FEATURE_COLLECTION,features:C.store.getSelectedIds().map(function(E){return C.store.get(E)}).map(function(E){return E.toGeoJSON()})}},P.getSelectedPoints=function(){return{type:b.FEATURE_COLLECTION,features:C.store.getSelectedCoordinates().map(function(E){return{type:b.FEATURE,properties:{},geometry:{type:b.POINT,coordinates:E.coordinates}}})}},P.set=function(E){if(E.type===void 0||E.type!==b.FEATURE_COLLECTION||!Array.isArray(E.features))throw new Error("Invalid FeatureCollection");var F=C.store.createRenderBatch(),z=C.store.getAllIds().slice(),H=P.add(E),U=new Y(H);return(z=z.filter(function($){return!U.has($)})).length&&P.delete(z),F(),H},P.add=function(E){var F=JSON.parse(JSON.stringify(Up(E))).features.map(function(z){if(z.id=z.id||ie(),z.geometry===null)throw new Error("Invalid geometry: null");if(C.store.get(z.id)===void 0||C.store.get(z.id).type!==z.geometry.type){var H=rm[z.geometry.type];if(H===void 0)throw new Error("Invalid geometry type: "+z.geometry.type+".");var U=new H(C,z);C.store.add(U)}else{var $=C.store.get(z.id);$.properties=z.properties,Uc($.properties,z.properties)||C.store.featureChanged($.id),Uc($.getCoordinates(),z.geometry.coordinates)||$.incomingCoords(z.geometry.coordinates)}return z.id});return C.store.render(),F},P.get=function(E){var F=C.store.get(E);if(F)return F.toGeoJSON()},P.getAll=function(){return{type:b.FEATURE_COLLECTION,features:C.store.getAll().map(function(E){return E.toGeoJSON()})}},P.delete=function(E){return C.store.delete(E,{silent:!0}),P.getMode()!==_.DIRECT_SELECT||C.store.getSelectedIds().length?C.store.render():C.events.changeMode(_.SIMPLE_SELECT,void 0,{silent:!0}),P},P.deleteAll=function(){return C.store.delete(C.store.getAllIds(),{silent:!0}),P.getMode()===_.DIRECT_SELECT?C.events.changeMode(_.SIMPLE_SELECT,void 0,{silent:!0}):C.store.render(),P},P.changeMode=function(E,F){return F===void 0&&(F={}),E===_.SIMPLE_SELECT&&P.getMode()===_.SIMPLE_SELECT?(Yc(F.featureIds||[],C.store.getSelectedIds())||(C.store.setSelected(F.featureIds,{silent:!0}),C.store.render()),P):(E===_.DIRECT_SELECT&&P.getMode()===_.DIRECT_SELECT&&F.featureId===C.store.getSelectedIds()[0]||C.events.changeMode(E,F,{silent:!0}),P)},P.getMode=function(){return C.events.getMode()},P.trash=function(){return C.events.trash({silent:!0}),P},P.combineFeatures=function(){return C.events.combineFeatures({silent:!0}),P},P.uncombineFeatures=function(){return C.events.uncombineFeatures({silent:!0}),P},P.setFeatureProperty=function(E,F,z){return C.store.setFeatureProperty(E,F,z),P},P}(y,g),y.api=g;var S=$p(y);return g.onAdd=S.onAdd,g.onRemove=S.onRemove,g.types=m,g.options=u,g};function To(u){lm(u,this)}return To.modes=Wc,To.constants=T,To.lib=am,To})})(Dp);var nC=Dp.exports;const Sn=Xm(nC);function iC(n){let t,e,i;return{c(){t=ot("button"),t.textContent="Import current view",_e(t,"type","button")},m(s,o){Ot(s,t,o),e||(i=ye(t,"click",n[0]),e=!0)},p:ue,i:ue,o:ue,d(s){s&&Et(t),e=!1,i()}}}function sC(n){let t='poly:"';for(let[i,s]of n.geometry.coordinates[0])t+=`${s} ${i} `;return t=t.slice(0,-1)+'"',`https://overpass-api.de/api/interpreter?data=${`(nwr(${t}); node(w)->.x; <;); out meta;`}`}function ys(n){return[n.lng,n.lat]}function oC(n,t,e){let{map:i}=t;const s=wf();let o=null;yf(()=>{i!=null&&i.loaded()&&o&&i.removeControl(o)});async function r(c){try{s("loading","Loading from Overpass");let d=await(await fetch(sC(c))).text();s("gotXml",d)}catch(h){s("error",h.toString())}}function a(){let c=i.getBounds();return{type:"Feature",properties:{},geometry:{coordinates:[[ys(c.getSouthWest()),ys(c.getNorthWest()),ys(c.getNorthEast()),ys(c.getSouthEast()),ys(c.getSouthWest())]],type:"Polygon"}}}async function l(){if(i){if(i.getZoom()<13){s("error","Zoom in more to import");return}await r(a())}}return n.$$set=c=>{"map"in c&&e(1,i=c.map)},n.$$.update=()=>{n.$$.dirty&14&&i&&!o&&(e(2,Sn.constants.classes.CONTROL_BASE="maplibregl-ctrl",Sn),e(2,Sn.constants.classes.CONTROL_PREFIX="maplibregl-ctrl-",Sn),e(2,Sn.constants.classes.CONTROL_GROUP="maplibregl-ctrl-group",Sn),e(3,o=new Sn({displayControlsDefault:!1,controls:{polygon:!0}})),i.addControl(o),i.on("draw.create",async c=>{let h=c.features[0];o.deleteAll(),await r(h)}))},[l,i,Sn,o]}class XC extends Gi{constructor(t){super(),qi(this,t,oC,iC,yi,{map:1})}}export{hC as C,lC as G,cC as J,YC as L,XC as O,ab as _,UC as a};
