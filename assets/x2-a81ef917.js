import{S as ie,i as re,s as fe,G as pe,e as z,h as T,z as W,l as R,I as x,q as N,J as de,K as me,N as ge,O as _e,t as y,b as k,v as J,w as be,Q as he,R as we,T as $,U as ee,m as Le,L as ye,c as q,f as I,a as D,d as P,o as ve,H as Ce,x as H,y as Q,g as Y,n as v,A as V,r as te,u as ne,M as ke,_ as Me,V as ue,W as Be,j as se,D as Se,E as Ee,X as ze}from"./SequentialLegend-04a99162.js";import{L as Oe,C as Ie,O as qe,_ as De,J as Pe,a as Re,G as Je}from"./OverpassSelector-32fec53c.js";import{S as Ne,L as Te}from"./SidebarControls-812e1477.js";function je(s){let e,t,l,n,o,u,p;const a=s[18].default,r=pe(a,s,s[17],null);return{c(){e=z("div"),r&&r.c(),T(e,"tabindex",t=s[1]?0:void 0),T(e,"role",l=s[1]?"button":void 0),W(e,"z-index",s[2])},m(i,d){R(i,e,d),r&&r.m(e,null),o=!0,u||(p=[x(s[6].call(null,e)),x(n=Ae.call(null,e,s[0])),N(e,"click",s[19]),N(e,"dblclick",s[20]),N(e,"contextmenu",s[21]),N(e,"mouseenter",s[22]),N(e,"mouseleave",s[23]),N(e,"mousemove",s[24]),N(e,"keydown",s[7])],u=!0)},p(i,[d]){r&&r.p&&(!o||d&131072)&&de(r,a,i,i[17],o?ge(a,i[17],d,null):me(i[17]),null),(!o||d&2&&t!==(t=i[1]?0:void 0))&&T(e,"tabindex",t),(!o||d&2&&l!==(l=i[1]?"button":void 0))&&T(e,"role",l),n&&_e(n.update)&&d&1&&n.update.call(null,i[0]),d&4&&W(e,"z-index",i[2])},i(i){o||(y(r,i),o=!0)},o(i){k(r,i),o=!1},d(i){i&&J(e),r&&r.d(i),u=!1,be(p)}}}function Ae(s,e){const t=s.className;function l(n){n?s.className=`${t} ${n}`:s.className=t}return l(e),{update:l}}function Fe(s,e,t){let l,n,o,{$$slots:u={},$$scope:p}=e,{lngLat:a}=e,{class:r=void 0}=e,{interactive:i=!0}=e,{asButton:d=!1}=e,{draggable:C=!1}=e,{feature:h=null}=e,{offset:B=void 0}=e,{zIndex:g=void 0}=e,{rotation:w=0}=e,{opacity:S=1}=e;const O=he(),{map:A,layerEvent:F,self:j}=we();$(s,A,f=>t(26,o=f)),$(s,F,f=>t(25,l=f)),$(s,j,f=>t(16,n=f));function L(f){ee(j,n=new Le.Marker({element:f,rotation:w,draggable:C,offset:B,opacity:S.toString()}).setLngLat(a).addTo(o),n);const G=()=>c("dragstart"),U=()=>{_(),c("drag")},K=()=>{_(),c("dragend")};return C&&(n.on("dragstart",G),n.on("drag",U),n.on("dragend",K)),{destroy(){C&&(n==null||n.off("dragstart",G),n==null||n.off("drag",U),n==null||n.off("dragend",K)),n==null||n.remove()}}}function _(){let f=n==null?void 0:n.getLngLat();f&&(Array.isArray(a)?t(9,a=[f.lng,f.lat]):a&&"lon"in a?t(9,a={lon:f.lng,lat:f.lat}):t(9,a=f))}function b(f){f.key===" "&&(f.preventDefault(),f.stopPropagation(),c("click"))}function c(f){if(!i)return;let G=n==null?void 0:n.getLngLat();if(!G)return;const U=[G.lng,G.lat];let K={map:o,marker:n,lngLat:U,features:[{type:"Feature",properties:(h==null?void 0:h.properties)??{},geometry:{type:"Point",coordinates:U}}]};ee(F,l={...K,layerType:"marker",type:f},l),O(f,K)}const E=()=>c("click"),X=()=>c("dblclick"),Z=()=>c("contextmenu"),m=f=>{c("mouseenter")},M=()=>{c("mouseleave")},ce=()=>c("mousemove");return s.$$set=f=>{"lngLat"in f&&t(9,a=f.lngLat),"class"in f&&t(0,r=f.class),"interactive"in f&&t(10,i=f.interactive),"asButton"in f&&t(1,d=f.asButton),"draggable"in f&&t(11,C=f.draggable),"feature"in f&&t(12,h=f.feature),"offset"in f&&t(13,B=f.offset),"zIndex"in f&&t(2,g=f.zIndex),"rotation"in f&&t(14,w=f.rotation),"opacity"in f&&t(15,S=f.opacity),"$$scope"in f&&t(17,p=f.$$scope)},s.$$.update=()=>{s.$$.dirty&66048&&(n==null||n.setLngLat(a)),s.$$.dirty&73728&&(n==null||n.setOffset(B??[0,0])),s.$$.dirty&81920&&(n==null||n.setRotation(w)),s.$$.dirty&98304&&(n==null||n.setOpacity(S.toString()))},[r,d,g,A,F,j,L,b,c,a,i,C,h,B,w,S,n,p,u,E,X,Z,m,M,ce]}class Xe extends ie{constructor(e){super(),re(this,e,Fe,je,fe,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2,rotation:14,opacity:15})}}const Ze=`<svg width="40" height="50" viewBox="0 0 40 50" xmlns="http://www.w3.org/2000/svg">
    <defs/>
    <path id="path2" fill="none" stroke="none" visibility="hidden" d="M 1.0169492 25.59322 L 25.016949 25.59322 L 25.016949 49.59322 L 1.0169492 49.59322 Z"/>
    <path id="path4" fill="#000000" stroke="none" d="M 19.198305 2.6101693 C 10.336661 2.6101693 3.1694916 9.7773384 3.1694916 18.638983 C 3.1694916 30.660593 19.198305 48.406779 19.198305 48.406779 C 19.198305 48.406779 35.227118 30.660593 35.227118 18.638983 C 35.227118 9.7773384 28.059949 2.6101693 19.198305 2.6101693 Z M 19.198305 24.363559 C 16.038339 24.363559 13.473728 21.798949 13.473728 18.638983 C 13.473728 15.479016 16.038339 12.914406 19.198305 12.914406 C 22.358271 12.914406 24.922881 15.479016 24.922881 18.638983 C 24.922881 21.798949 22.358271 24.363559 19.198305 24.363559 Z"/>
</svg>
`;function ae(s){let e,t;return{c(){e=z("p"),t=Y(s[10])},m(l,n){R(l,e,n),v(e,t)},p(l,n){n&1024&&Be(t,l[10])},d(l){l&&J(e)}}}function le(s){let e,t,l,n,o,u,p,a,r,i,d,C;function h(g){s[21](g)}let B={};return s[2]!==void 0&&(B.cost=s[2]),a=new Re({props:B}),H.push(()=>Q(a,"cost",h)),{c(){e=z("div"),t=z("label"),l=Y(`Max requests (limit for faster updates):
          `),n=z("br"),o=I(),u=z("input"),p=I(),q(a.$$.fragment),T(u,"type","number"),T(u,"min",1)},m(g,w){R(g,e,w),v(e,t),v(t,l),v(t,n),v(t,o),v(t,u),se(u,s[1]),R(g,p,w),D(a,g,w),i=!0,d||(C=N(u,"input",s[20]),d=!0)},p(g,w){w&2&&ue(u.value)!==g[1]&&se(u,g[1]);const S={};!r&&w&4&&(r=!0,S.cost=g[2],V(()=>r=!1)),a.$set(S)},i(g){i||(y(a.$$.fragment,g),i=!0)},o(g){k(a.$$.fragment,g),i=!1},d(g){g&&(J(e),J(p)),P(a,g),d=!1,C()}}}function oe(s){let e,t,l,n,o;function u(a){s[22](a)}let p={outputMetadata:s[6].metadata,map:s[3]};return s[8]!==void 0&&(p.controls=s[8]),l=new Ne({props:p}),H.push(()=>Q(l,"controls",u)),{c(){e=z("hr"),t=I(),q(l.$$.fragment)},m(a,r){R(a,e,r),R(a,t,r),D(l,a,r),o=!0},p(a,r){const i={};r&64&&(i.outputMetadata=a[6].metadata),r&8&&(i.map=a[3]),!n&&r&256&&(n=!0,i.controls=a[8],V(()=>n=!1)),l.$set(i)},i(a){o||(y(l.$$.fragment,a),o=!0)},o(a){k(l.$$.fragment,a),o=!1},d(a){a&&(J(e),J(t)),P(l,a)}}}function Ge(s){let e,t,l,n,o,u,p,a,r,i,d,C,h,B,g,w,S,O,A;t=new Ce({props:{app:"interactive"}});function F(c){s[17](c)}let j={};s[0]!==void 0&&(j.example=s[0]),i=new Ie({props:j}),H.push(()=>Q(i,"example",F)),h=new qe({props:{map:s[3]}}),h.$on("gotXml",s[13]),h.$on("loading",s[18]),h.$on("error",s[19]);let L=s[10]&&ae(s),_=s[4]&&le(s),b=s[6].metadata&&oe(s);return{c(){e=z("div"),q(t.$$.fragment),l=I(),n=z("label"),o=Y("Open an "),u=z("i"),u.textContent=".osm.pbf",p=Y(`
      file
      `),a=z("input"),r=I(),q(i.$$.fragment),C=I(),q(h.$$.fragment),B=I(),L&&L.c(),g=I(),_&&_.c(),w=I(),b&&b.c(),T(a,"type","file"),T(e,"slot","left")},m(c,E){R(c,e,E),D(t,e,null),v(e,l),v(e,n),v(n,o),v(n,u),v(n,p),v(n,a),s[16](a),v(e,r),D(i,e,null),v(e,C),D(h,e,null),v(e,B),L&&L.m(e,null),v(e,g),_&&_.m(e,null),v(e,w),b&&b.m(e,null),S=!0,O||(A=N(a,"change",s[11]),O=!0)},p(c,E){const X={};!d&&E&1&&(d=!0,X.example=c[0],V(()=>d=!1)),i.$set(X);const Z={};E&8&&(Z.map=c[3]),h.$set(Z),c[10]?L?L.p(c,E):(L=ae(c),L.c(),L.m(e,g)):L&&(L.d(1),L=null),c[4]?_?(_.p(c,E),E&16&&y(_,1)):(_=le(c),_.c(),y(_,1),_.m(e,w)):_&&(te(),k(_,1,1,()=>{_=null}),ne()),c[6].metadata?b?(b.p(c,E),E&64&&y(b,1)):(b=oe(c),b.c(),y(b,1),b.m(e,null)):b&&(te(),k(b,1,1,()=>{b=null}),ne())},i(c){S||(y(t.$$.fragment,c),y(i.$$.fragment,c),y(h.$$.fragment,c),y(_),y(b),S=!0)},o(c){k(t.$$.fragment,c),k(i.$$.fragment,c),k(h.$$.fragment,c),k(_),k(b),S=!1},d(c){c&&J(e),P(t),s[16](null),P(i),P(h),L&&L.d(),_&&_.d(),b&&b.d(),O=!1,A()}}}function He(s){let e,t;return{c(){e=new ze(!1),t=Se(),e.a=t},m(l,n){e.m(Ze,l,n),R(l,t,n)},p:Ee,d(l){l&&(J(t),e.d())}}}function Ue(s){let e,t;return e=new Te({props:{controls:s[8]}}),{c(){q(e.$$.fragment)},m(l,n){D(e,l,n),t=!0},p(l,n){const o={};n&256&&(o.controls=l[8]),e.$set(o)},i(l){t||(y(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){P(e,l)}}}function Ke(s){let e,t,l,n,o;function u(a){s[14](a)}let p={draggable:!0,$$slots:{default:[He]},$$scope:{ctx:s}};return s[5]!==void 0&&(p.lngLat=s[5]),e=new Xe({props:p}),H.push(()=>Q(e,"lngLat",u)),e.$on("dragend",s[12]),n=new Je({props:{data:s[6],$$slots:{default:[Ue]},$$scope:{ctx:s}}}),{c(){q(e.$$.fragment),l=I(),q(n.$$.fragment)},m(a,r){D(e,a,r),R(a,l,r),D(n,a,r),o=!0},p(a,r){const i={};r&67108864&&(i.$$scope={dirty:r,ctx:a}),!t&&r&32&&(t=!0,i.lngLat=a[5],V(()=>t=!1)),e.$set(i);const d={};r&64&&(d.data=a[6]),r&67109120&&(d.$$scope={dirty:r,ctx:a}),n.$set(d)},i(a){o||(y(e.$$.fragment,a),y(n.$$.fragment,a),o=!0)},o(a){k(e.$$.fragment,a),k(n.$$.fragment,a),o=!1},d(a){a&&J(l),P(e,a),P(n,a)}}}function We(s){let e,t,l,n;function o(p){s[15](p)}let u={style:"https://api.maptiler.com/maps/dataviz/style.json?key=MZEJTanw3WpxRvt7qDfo",standardControls:!0,hash:!0,$$slots:{default:[Ke]},$$scope:{ctx:s}};return s[3]!==void 0&&(u.map=s[3]),t=new ke({props:u}),H.push(()=>Q(t,"map",o)),{c(){e=z("div"),q(t.$$.fragment),T(e,"slot","main"),W(e,"position","relative"),W(e,"width","100%"),W(e,"height","100vh")},m(p,a){R(p,e,a),D(t,e,null),n=!0},p(p,a){const r={};a&67109216&&(r.$$scope={dirty:a,ctx:p}),!l&&a&8&&(l=!0,r.map=p[3],V(()=>l=!1)),t.$set(r)},i(p){n||(y(t.$$.fragment,p),n=!0)},o(p){k(t.$$.fragment,p),n=!1},d(p){p&&J(e),P(t)}}}function Qe(s){let e,t,l,n;return e=new ye({props:{$$slots:{main:[We],left:[Ge]},$$scope:{ctx:s}}}),l=new Oe({props:{loading:s[7]}}),{c(){q(e.$$.fragment),t=I(),q(l.$$.fragment)},m(o,u){D(e,o,u),R(o,t,u),D(l,o,u),n=!0},p(o,[u]){const p={};u&67110783&&(p.$$scope={dirty:u,ctx:o}),e.$set(p);const a={};u&128&&(a.loading=o[7]),l.$set(a)},i(o){n||(y(e.$$.fragment,o),y(l.$$.fragment,o),n=!0)},o(o){k(e.$$.fragment,o),k(l.$$.fragment,o),n=!1},d(o){o&&J(t),P(e,o),P(l,o)}}}function Ve(s,e,t){ve(async()=>{await De(),await Me()});let l,n,o="",u={lng:0,lat:0},p={type:"FeatureCollection",features:[]},a=!1,r=1e3,i="Distance",d={maxCount:1e3,originRadius:3,destinationRadius:3,streetviewOn:!1},C;async function h(m){t(0,o=""),t(7,a=!0),B(await C.files[0].arrayBuffer())}function B(m){try{t(4,n=new Pe(new Uint8Array(m))),t(2,i="Distance");let M=n.getBounds();l.fitBounds([[M[0],M[1]],[M[2],M[3]]],{padding:20,animate:!1}),t(5,u.lng=(M[0]+M[2])/2,u),t(5,u.lat=(M[1]+M[3])/2,u),w()}catch(M){window.alert(`Problem importing osm.pbf file: ${M}`)}t(7,a=!1)}async function g(m){if(m!=""){t(7,a=!0);let M=await fetch(`https://assets.od2net.org/pbf_clips/${m}.osm.pbf`);B(await M.arrayBuffer())}}function w(){n&&t(6,p=JSON.parse(n.recalculate({lng:u.lng,lat:u.lat,max_requests:r,cost:i})))}function S(m,M){w()}let O="";function A(m){t(10,O="Parsing XML"),B(new TextEncoder().encode(m.detail)),t(10,O="")}function F(m){u=m,t(5,u)}function j(m){l=m,t(3,l)}function L(m){H[m?"unshift":"push"](()=>{C=m,t(9,C)})}function _(m){o=m,t(0,o)}const b=m=>t(10,O=m.detail),c=m=>t(10,O=m.detail);function E(){r=ue(this.value),t(1,r)}function X(m){i=m,t(2,i)}function Z(m){d=m,t(8,d)}return s.$$.update=()=>{s.$$.dirty&1&&g(o),s.$$.dirty&6&&S()},[o,r,i,l,n,u,p,a,d,C,O,h,w,A,F,j,L,_,b,c,E,X,Z]}class Ye extends ie{constructor(e){super(),re(this,e,Ve,Qe,fe,{})}}new Ye({target:document.getElementById("app")});
